---
title: DLP ポリシーの作成、テスト、調整
ms.author: deniseb
author: denisebmsft
manager: laurawi
ms.audience: Admin
ms.topic: article
f1_keywords:
- ms.o365.cc.NewPolicyFromTemplate
ms.service: O365-seccomp
localization_priority: Normal
ms.collection:
- M365-security-compliance
search.appverid:
- MET150
ms.assetid: 59414438-99f5-488b-975c-5023f2254369
description: 'DLP ポリシーの使用を開始する最も簡単で最も一般的な方法は、Office 365 に含まれるいずれかのテンプレートを使用することです。 '
ms.openlocfilehash: 0c6b3bce7b336b08595a432c29601ecb63155589
ms.sourcegitcommit: e7a776a04ef6ed5e287a33cfdc36aa2d72862b55
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/29/2019
ms.locfileid: "31000860"
---
# <a name="create-test-and-tune-a-dlp-policy"></a>DLP ポリシーの作成、テスト、調整

**プリンシパルの作成者** <br/>
Paul Cunningham、Microsoft MVP <br/>
[実際的な365](https://practical365.com/) <br/>
[@Practical365](https://twitter.com/practical365)<br/>
__________________________________________________

データ損失防止とは、Office 365 のコンプライアンス機能で、組織が不要な機密情報を意図的または偶発的に危険にさらすことを防ぐために設計されています。 DLP は、exchange Server と exchange Online ではルートがあり、SharePoint Online と OneDrive for business にも適用されます。

DLP では、コンテンツ分析エンジンを使用して、電子メールメッセージとファイルの内容を調べ、クレジットカード番号や個人を特定できる情報 (PII) などの機密情報を検索します。 機密情報は、電子メールメッセージやファイルの暗号化などの追加の手順を行わずに、電子メールで送信したり、ドキュメントに含めたりする必要はありません。 DLP を使用すると、機密情報を検出し、次のような処理を実行できます。

- 監査目的でイベントをログに記録する
- エンドユーザーに電子メールを送信しているかファイルを共有していることを示す警告を表示する
- メールまたはファイル共有が行われないようにアクティブにブロックする

場合によっては、保護する必要があるデータの種類が自分にとって考慮されないため、DLP を破棄することがあります。 医療記録や財務情報などの機密データは、健康保険やオンラインストアを実行している会社にのみ存在するという前提があります。 しかし、機密情報を認識していない場合でも、企業は定期的に機密情報を処理することができます。 従業員名と誕生日の日付のスプレッドシートは、顧客名とクレジットカードの詳細のスプレッドシートと同じくらい重要です。 この種の情報は、従業員が日常的なタスクを静かに実行するため、システムから CSV ファイルをエクスポートしたり、ユーザーにメールを送信したりすることはありません。 その結果を考慮せずに、クレジットカードまたは銀行口座の詳細が含まれるメールを送信する頻度は意外になるかもしれません。

## <a name="how-sensitive-information-is-detected-by-dlp"></a>DLP による機密情報の検出方法

機密情報は、一致パターンに対する特定のキーワードの近接度など、他のインジケーターと組み合わせて、正規表現 (RegEx) パターンマッチングで識別されます。 この例は、クレジットカード番号です。 VISA クレジットカード番号には16桁の数字があります。 ただし、これらの数字は、1111-1111-1111-1111、1111 1111 1111 1111、1111111111111111などのさまざまな方法で記述することができます。

16桁の文字列は必ずしもクレジットカード番号ではなく、ヘルプデスクシステムからのチケット番号、またはハードウェアの一部のシリアル番号でもかまいません。 クレジットカード番号と無害な16桁の文字列との違いを伝えるために、数値がさまざまなクレジットカードブランドの既知のパターンと一致することを確認するために、計算が実行されます (チェックサム)。

さらに、"VISA" や "AMEX" などのキーワードと、クレジットカードの有効期限が切れる日付の間の類似性は、データがクレジットカード番号であるかどうかを決定することも検討しています。

言い換えると、DLP は通常、電子メールの次の2つのテキストの違いを認識するのに十分なものです。

- "新しいラップトップをご注文いただくことができます。 VISA カード1111-1111-1111-1111、有効期限11/22、および自分が所有しているときに送信する予定の日付を送信する
- "My ラップトップのシリアル番号は2222-2222-2222-2222 で、11/2010 で購入されました。 ところで、旅行 visa は承認されていますか?

ブックマークを保持するための適切な参照情報は、[機密情報の種類に](what-the-sensitive-information-types-look-for.md)ついて、各情報の種類がどのように検出されるかを説明するトピックです。

## <a name="where-to-start-with-data-loss-prevention"></a>データ損失防止の開始点

データ漏洩のリスクがまったくわからない場合は、DLP を実装することから始めなければならないことを十分に理解することは困難です。 さいわい、DLP ポリシーを "テストモード" で実行して、有効にする前に、その実効性と正確性を測定できます。

exchange Online の DLP ポリシーは、exchange 管理センターを使用して管理できます。 しかし、セキュリティ & コンプライアンスセンターを使用して、すべてのワークロードに対して DLP ポリシーを構成することができます。このため、この記事のデモで使用していることがわかります。 Security & コンプライアンスセンターでは、**データ損失防止** > **ポリシー**の下に DLP ポリシーが見つかります。 [**ポリシーの作成**] をクリックして開始します。

Office 365 には、dlp ポリシーの作成に使用できる一連の[dlp ポリシーテンプレート](what-the-dlp-policy-templates-include.md)が用意されています。 オーストラリアのビジネスであるとします。 ポリシーテンプレートをフィルター処理して、オーストラリアに関連するものだけを表示することができます。これは、財務、医療、健康、およびプライバシーの一般的なカテゴリに分類されます。

![国または地域を選択するためのオプション](media/DLP-create-test-tune-choose-country.png)

このデモでは、オーストラリアの納税者情報 (PII) データを選択します。このデータには、オーストラリアの税ファイル番号 (tfn) と運転免許証番号の情報の種類が含まれます。

![ポリシーテンプレートを選択するオプション](media/DLP-create-test-tune-choose-policy-template.png)

新しい DLP ポリシーに名前を付けます。 既定の名前は DLP ポリシーテンプレートと一致しますが、同じテンプレートから複数のポリシーを作成できるので、よりわかりやすい名前を選択する必要があります。

![ポリシーに名前をつけるオプション](media/DLP-create-test-tune-name-policy.png)

ポリシーが適用される場所を選択します。 DLP ポリシーは、Exchange online、SharePoint Online、OneDrive for business に適用できます。 このポリシーは、すべての場所に適用するように構成したままにします。

![すべての場所を選択するオプション](media/DLP-create-test-tune-choose-locations.png)

最初の [**ポリシーの設定**] の手順では、既定値をそのまま使用します。 DLP ポリシーでは、多くのカスタマイズを行うことができますが、既定の設定で作業を開始するのが適切です。

![保護するコンテンツの種類をカスタマイズするためのオプション](media/DLP-create-test-tune-default-customization-settings.png)

[**次へ**] をクリックすると、追加の**ポリシー設定**ページが表示され、その他のカスタマイズオプションが表示されます。 テストするだけのポリシーの場合は、次のようにして調整を開始できます。

- 今のところ、ポリシーヒントをオフにしています。これは、ユーザーに対して何らかの結果を表示しないようにする場合に実行するのに適した手順です。 ポリシーヒントでは、ユーザーが DLP ポリシーに違反しようとしていることを示す警告が表示されます。 たとえば、添付したファイルにクレジットカード番号が含まれていて、電子メールが拒否されるという警告が Outlook ユーザーに表示されます。 ポリシーヒントの目的は、準拠していない動作が発生する前に、それを停止することです。
- また、このポリシーでは、データを大量に共有するだけでなく、オーストラリアの PII データの共有を検出することができます。
- インシデントレポートの電子メールに別の受信者も追加しました。

![その他のポリシー設定](media/DLP-create-test-tune-more-policy-settings.png)

最後に、このポリシーを最初にテストモードで実行するように構成しました。 テストモードでは、ポリシーヒントを無効にするためのオプションもあります。 これにより、ポリシー内でポリシーヒントを有効にすることができますが、テスト中にそれらを表示または抑制するかどうかを決定します。

![最初にポリシーをテストするオプション](media/DLP-create-test-tune-test-mode.png)

最終確認画面で、[**作成**] をクリックしてポリシーの作成を完了します。

## <a name="test-a-dlp-policy"></a>DLP ポリシーをテストする

新しい DLP ポリシーが約1時間以内に有効になります。 通常のユーザーアクティビティでトリガーされるようになるか、自分でトリガーしてみることができます。 以前は、[機密情報の種類に](what-the-sensitive-information-types-look-for.md)ついてこのトピックにリンクしていました。これにより、DLP 一致をトリガーする方法についての情報が提供されます。

例として、この記事に対して作成した DLP ポリシーはオーストラリアの税ファイル番号 (tfn) を検出します。 ドキュメントによれば、一致は次の条件に基づいています。

![オーストラリアの税ファイル番号に関するドキュメント](media/DLP-create-test-tune-Australia-Tax-File-Number-doc.png)
 
blunt のように、tfn の検出をデモンストレーションするために、"税ファイル番号" という単語を持つ電子メールと、近接している9桁の文字列は、問題を発生させることなく sail ます。 DLP ポリシーをトリガーしない理由は、この9桁の文字列が、無害な番号の文字列だけでなく、有効な tfn であることを示すチェックサムを渡す必要があるためです。

![チェックサムを渡さないオーストラリアの税ファイル番号](media/DLP-create-test-tune-email-test1.png)

これに対して、"税ファイル番号" という語句を持つ電子メールと、チェックサムを渡す有効な tfn がポリシーをトリガーします。 ここでは、を使用している tfn I を使用しているのは、有効な (正規の) tfns を生成する web サイトから取得されたものです。 [有効だが、偽装されたクレジットカード番号](http://www.fakecreditcardgenerator.net/)を生成する類似のサイトがあります。 DLP ポリシーをテストする際の最も一般的な間違いの1つは、無効で、チェックサムを渡さない (したがってポリシーをトリガーしない) ため、このようなサイトが非常に役立ちます。

![チェックサムに合格するオーストラリアの税ファイル番号](media/DLP-create-test-tune-email-test2.png)

インシデントレポートの電子メールには、検出された機密情報の種類、検出されたインスタンス数、および検出の信頼レベルが含まれています。

![検出された税ファイル番号を示すインシデントレポート](media/DLP-create-test-tune-email-incident-report.png)

dlp ポリシーをテストモードのままにして、インシデントレポートの電子メールを分析する場合は、dlp ポリシーの精度と、それが実施されたときにどの程度有効になるかについての感じを始めることができます。 インシデントレポートに加えて、 [DLP レポートを使用](view-the-dlp-reports.md)して、テナント全体のポリシー一致の集約されたビューを表示できます。

## <a name="tune-a-dlp-policy"></a>DLP ポリシーを調整する

ポリシーヒットを分析する際に、ポリシーの動作についていくらか調整する必要があるかもしれません。 簡単な例として、電子メール内の1つの tfn が問題ではないと判断する場合があります (デモのためにそのままにしておきましょう)。ただし、2つ以上のインスタンスが問題であると考えられます。 複数のインスタンスは、たとえば外部の会計サービスなど、従業員が HR データベースから外部の関係者に対して CSV エクスポートを送信するなど、危険なシナリオになる可能性があります。 間違いなく、検出してブロックすることをお勧めします。

セキュリティ & コンプライアンスセンターでは、既存のポリシーを編集して動作を調整することができます。

![ポリシーを編集するオプション](media/DLP-create-test-tune-edit-policy.png)
 
特定のワークロードのみ、または特定のサイトやアカウントに対してのみポリシーが適用されるように、場所の設定を調整することができます。

![特定の場所を選択するためのオプション](media/DLP-create-test-tune-edit-locations.png)

また、ポリシー設定を調整し、必要に応じてルールを編集することもできます。

![ルールを編集するオプション](media/DLP-create-test-tune-edit-rule.png)

DLP ポリシー内のルールを編集する場合は、次のように変更できます。

- 条件 (ルールをトリガーする機密データのインスタンスの種類と数を含む)。
- コンテンツへのアクセスを制限するなど、実行されるアクション。
- ユーザー通知。これは、電子メールクライアントまたは web ブラウザーでユーザーに表示されるポリシーヒントです。
- ユーザーによる上書き。ユーザーが自分の電子メールまたはファイル共有を続行するかどうかを指定します。
- インシデントレポート。管理者に通知します。

![ルールのパーツを編集するためのオプション](media/DLP-create-test-tune-editing-options.png)

このデモでは、ユーザーによる通知をポリシーに追加しています (十分なユーザー認識トレーニングを行わずにこれを行うことに注意してください)。また、ユーザーは、ビジネス上の理由でポリシーを上書きするか、誤検知としてフラグを設定することができました。 組織のポリシーに関する追加情報を含める場合、またはユーザーに質問がある場合にサポートに連絡するようにユーザーに求める場合は、電子メールとポリシーのヒントテキストをカスタマイズすることもできます。

![ユーザー通知および上書きのオプション](media/DLP-create-test-tune-user-notifications.png)

このポリシーには、ボリュームの大容量と低音量の処理に関する2つのルールが含まれているため、必要なアクションを使用して両方を編集してください。 そのような場合は、特性に応じて異なるケースを扱うことができます。 たとえば、音量違反が少ない場合に上書きを許可し、高ボリューム違反に対する上書きを許可することができます。

![低ボリューム用に高音量および1つのルールを適用する1つのルール](media/DLP-create-test-tune-two-rules.png)

また、ポリシーに違反するコンテンツへのアクセスを実際にブロックまたは制限する場合は、ルールに対してアクションを構成する必要があります。

![コンテンツへのアクセスを制限するオプション](media/DLP-create-test-tune-restrict-access-action.png)

これらの変更をポリシー設定に保存した後、ポリシーの [メイン設定] ページに戻り、ポリシーがテストモードのときにユーザーにポリシーヒントを表示するオプションを有効にする必要もあります。 これは、エンドユーザーに DLP ポリシーを導入するための効果的な方法であり、ユーザーの認識トレーニングを行うことで、生産性に影響を与える誤検知の数が多くなりすぎないようにすることができます。

![テストモードでポリシーヒントを表示するオプション](media/DLP-create-test-tune-show-policy-tips.png)

サーバー側 (またはクラウド側) では、さまざまな処理間隔によって、変更が直ちに反映されない場合があります。 ユーザーに新しいポリシーヒントが表示されるように DLP ポリシーを変更する場合、変更内容が Outlook クライアントに直ちに反映されることはありません。これは、24時間ごとにポリシーの変更をチェックします。 テストのための処理を高速化する必要がある場合は、このレジストリ修正を使用して、 [PolicyNudges キーから最新のダウンロードタイムスタンプを消去](https://support.microsoft.com/en-au/help/2823261/changes-to-a-data-loss-prevention-policy-don-t-take-effect-in-outlook?__hstc=18650278.46377037dc0a82baa8a30f0ef07a7b2f.1538687978676.1538693509953.1540315763430.3&__hssc=18650278.1.1540315763430&__hsfp=3446956451)することができます。 Outlook は、次回再起動したときに最新のポリシー情報をダウンロードし、電子メールメッセージの作成を開始します。

ポリシーヒントを有効にしている場合は、Outlook のヒントが表示され、ユーザーが発生したときに誤検知を報告することができます。

![誤検知を報告するためのオプションを含むポリシーヒント](media/DLP-create-test-tune-policy-tip-in-outlook.png)

## <a name="investigate-false-positives"></a>誤検知を調査する

DLP ポリシーテンプレートは、すぐには完全なものではありません。 お客様の環境で誤検知が発生している可能性があります。これは、DLP の展開を容易にし、ポリシーを適切にテストして調整するための重要な理由です。

誤検知の例を次に示します。 この電子メールは、非常に無害です。 ユーザーは、自分の携帯電話番号をユーザーに提供し、電子メール署名も含めます。

![誤検知情報を示す電子メール](media/DLP-create-test-tune-false-positive-email.png)
 
ただし、電子メールに機密情報が含まれていることを警告するポリシーヒントがユーザーに表示されます。特に、オーストラリアの運転免許証番号です。

![ポリシーヒントで誤検知を報告するオプション](media/DLP-create-test-tune-policy-tip-closeup.png)

ユーザーは誤検知を報告することができ、管理者はこのエラーが発生した理由を調べることができます。 インシデントレポートの電子メールでは、電子メールは誤検知としてフラグが付けられます。

![誤検知を示すインシデントレポート](media/DLP-create-test-tune-false-positive-incident-report.png)

このドライバーのライセンスケースは、を掘り下げていくのに適した例です。 この誤検知が発生した理由は、"オーストラリアのドライバーのライセンス" の種類が、キーワード "シドニー nsw" (大文字と小文字を区別しない) の300文字以内の9桁の文字列でトリガーされるためです。 そのため、電話番号とメール署名によってトリガーされるのは、ユーザーがシドニーにいる場合のみです。

興味深いことに、"シドニー, NSW" にコンマがある場合、DLP ポリシーはトリガーされません。 ここでコンマを使用して、オーストラリアの他の都市や州がオーストラリアのドライバーのライセンス情報の種類のキーワードに含まれていない理由についてはわかりません。 そのためには、どうすればよいでしょうか。 いくつかのオプションがあります。

1つのオプションは、オーストラリアドライバーのライセンス情報の種類をポリシーから削除することです。 これは、DLP ポリシーテンプレートの一部であるため、そこに含まれていますが、これを使用することは強制されません。 課税対象のファイル番号だけでなく、ドライバーのライセンスを必要としない場合は、削除するだけでかまいません。 たとえば、ポリシーの低ボリュームルールから削除しても、複数のドライバーライセンスの一覧が検出されるように、高ボリュームルールのままにしておくこともできます。

![ルールから機密情報の種類を削除するオプション](media/DLP-create-test-tune-delete-low-volume-rule.png)
 
別の方法として、インスタンス数を増やすだけで、複数のインスタンスが存在する場合にのみドライバーのライセンスの少ないボリュームが検出されるようにすることができます。

![インスタンス数を編集するオプション](media/DLP-create-test-tune-edit-instance-count.png)

インスタンス数の変更に加えて、一致精度 (または信頼度) を調整することもできます。 機密情報の種類に複数のパターンが含まれている場合は、ルールの一致精度を調整して、ルールが特定のパターンのみに一致するようにすることができます。 たとえば、誤検知を減らすために、最も信頼度の高いパターンに一致するようにルールの一致精度を設定することができます。 信頼レベルがどのように計算されるかを理解することは少し複雑ですが (この投稿の範囲を超えて)、[信頼度を使用してルールを調整する方法](https://docs.microsoft.com/en-us/office365/securitycompliance/data-loss-prevention-policies#match-accuracy)を説明します。

さらに高度な機能を利用する場合は、機密情報の種類をカスタマイズすることができます。たとえば、[オーストラリアのドライバーのライセンス](https://docs.microsoft.com/en-us/office365/securitycompliance/what-the-sensitive-information-types-look-for#australia-drivers-license-number)のキーワードリストから "シドニー NSW" を削除して、上記の誤検知を排除することができます。 XML と PowerShell を使用してこれを行う方法については、このトピックの「[組み込みの機密情報の種類をカスタマイズ](customize-a-built-in-sensitive-information-type.md)する」を参照してください。

## <a name="turn-off-a-dlp-policy"></a>DLP ポリシーをオフにする

DLP ポリシーが正確かつ効果的に機密情報の種類を検出していることを確認し、エンドユーザーが適切にポリシーを処理できる状態になっている場合は、ポリシーを有効にすることができます。

![ポリシーを有効にするオプション](media/DLP-create-test-tune-turn-on-policy.png)
 
ポリシーが有効になるまで待機している場合は、 [Security & コンプライアンスセンター PowerShell に接続](https://docs.microsoft.com/en-us/powershell/exchange/office-365-scc/connect-to-scc-powershell/connect-to-scc-powershell?view=exchange-ps)し、 [DlpCompliancePolicy コマンドレット](https://docs.microsoft.com/en-us/powershell/module/exchange/policy-and-compliance-dlp/get-dlpcompliancepolicy?view=exchange-ps)を実行して、再配置の状態を確認します。

![PowerShell でのコマンドレットの実行](media/DLP-create-test-tune-PowerShell.png)

DLP ポリシーを有効にした後、独自の最終的なテストを実行して、予期されるポリシーアクションが発生していることを確認する必要があります。 クレジットカードデータなどをテストしようとしている場合は、オンラインの web サイトがあります。サンプルクレジットカードまたはチェックサムを渡してポリシーをトリガーする個人情報を生成する方法についての情報が表示されます。

ユーザーによる上書きを許可するポリシーでは、ポリシーヒントの一部としてそのオプションがユーザーに表示されます。

![ユーザーによる上書きを許可するポリシーヒント](media/DLP-create-test-tune-override-option.png)

コンテンツを制限するポリシーは、ポリシーヒントの一部としてユーザーに警告を表示し、電子メールを送信できないようにします。

![コンテンツが制限されているポリシーのヒント](media/DLP-create-test-tune-restrict-warning.png)

## <a name="summary"></a>Summary

データ損失防止ポリシーは、すべての種類の組織に適しています。 一部の DLP ポリシーのテストは、ポリシーヒント、エンドユーザーによる上書き、インシデントレポートなどの制御によって、リスクの低い課題となります。 一部の DLP ポリシーを自動的にテストして、組織内で既に発生している違反の種類を確認してから、誤検知率の低いポリシーを作成し、許可されたものと許可されていないものについてユーザーを教育し、dlp ポリシーをに展開することができます。機関.
