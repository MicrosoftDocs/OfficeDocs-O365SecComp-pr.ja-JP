---
title: Office 365 の検索での office 365 テナントの分離
ms.author: robmazz
author: robmazz
manager: laurawi
ms.date: 8/21/2018
audience: ITPro
ms.topic: article
ms.service: Office 365 Administration
localization_priority: None
search.appverid:
- MET150
ms.collection: Strat_O365_Enterprise
description: '概要: Office 365 の検索で、テナントの分離の説明。'
ms.openlocfilehash: cc73f3c157ffd20b3891a6b7c58e7d0b2adf4e55
ms.sourcegitcommit: 36c5466056cdef6ad2a8d9372f2bc009a30892bb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/27/2018
ms.locfileid: "22531547"
---
# <a name="tenant-isolation-in-office-365-search"></a>Office 365 の検索でのテナントの分離
SharePoint Online の検索では、テナントとの間をリークしている情報に対する保護の共有データ構造の効率性のバランスがとれたテナント分離モデルを使用します。このモデルでは、検索機能を防ぐこと。
- 他のテナントからのドキュメントを含むクエリ結果を返す
- スキルを持つユーザーが他のテナントについての情報を推測可能性がありますクエリの実行結果のための十分な情報を公開します。
- 他のテナントのスキーマまたは設定を表示
- テナントや不適切なテナントでストアの結果の間で情報を処理する分析機能を混在させる
- 他のテナントから辞書のエントリを使用します。

テナント データの種類、使用保護のレイヤーを 1 つまたは複数のコードに情報の偶発的なリークを防ぐためにします。最も重要なデータには、1 つの欠陥のことは実際や感覚的な情報漏洩のないことを確認する保護のほとんどのレイヤーがあります。

## <a name="tenant-separation-for-the-search-index"></a>検索インデックスのテナントの分離
検索インデックスがインデックスのコンポーネントをホストするサーバーのディスクに格納されているし、テナントは、インデックス ・ ファイルを共有します。テナントのインデックス付けされたドキュメントは、そのテナントのクエリに対してのみ表示されます。3 つの独立したメカニズムでは、情報の漏洩を防ぐ。
- テナント ID フィルター
- テナント ID 用語の先頭に付けます
- ACL チェック

すべての 3 つのメカニズムでは、ドキュメントが正しくないテナントの検索が失敗する必要があります。

## <a name="tenant-id-filtering-and-tenant-id-term-prefixing"></a>テナント ID フィルターおよびテナント ID の用語の先頭に付けます
プレフィックスのテナント ID を使用して、フルテキスト インデックスでインデックスが設定されたすべての単語の検索たとえば、"*foo*"という用語は、「*123*」の ID を使用してテナントのインデックスが、フルテキスト インデックス内エントリは"*123foo です。*」

テナント ID のフィルタ リングと呼ばれるプロセスを使用してテナント ID を含めるには、すべてのクエリが変換されます。"< 使用する*guid*> に"*foo*"のクエリを変換するなど。*foo**TenantID*: <*guid*>"は、<*guid*> がテナントのクエリを実行することを表します。各インデックス ノード内で、このクエリの変換が発生して、クエリも、コンテンツの処理に影響を与えることです。すべてのクエリには、テナント ID を追加するために最適なテナントの 1 つのランクの一致を調べることによって他のテナントの用語の頻度を推論できません。

テナント ID の用語のプレフィックスは、フル テキスト インデックスでのみ発生します。処理された検索は、"*タイトル: foo*"などには、合成検索インデックス用語をテナント ID で始まるは、代わりに、処理された検索は、フィールド名の接頭辞です。"*タイトル: foo*"のクエリを変換するなど、"*fields.title:foo と fields.tenantID*: <*guid*>.」用語の頻度は、合成検索インデックス内のヒットのランキングに影響しません、ために、用語の先頭に付けます、テナントの分離の必要性はありません。「*タイトルは以下となります*」と同様に処理された検索では、テナントのコンテンツの分離はテナント ID のクエリの変換、フィルタ リングとは異なります。

## <a name="document-access-control-list-checks"></a>ドキュメントのアクセス制御リストのチェック
検索検索インデックスに保存されている Acl を通じてドキュメントにアクセスを制御します。すべての項目には、[ACL] のフィールドに特殊な用語のセットを使用してインデックスが付けられます。ACL のフィールドには、グループ、またはドキュメントを表示できるユーザーごとの 1 つの用語が含まれています。すべてのクエリが認証されたユーザーが属するグループごとに 1 つのアクセス制御エントリ (ACE) 用語のリストが大きくなります。

"< 使用する*guid*> のようなクエリでは。*foo と tenantID*: <*guid*>"になります。"<*guid*>。*foo と tenantID*: <*guid*> *、* (*docACL:*<*ace1*> *または docACL*: <*ace2*> *または docACL*: <*ace3*> *.*)"

ユーザー id とグループ id とので Ace が一意では、これにより、一部のユーザーに表示されているドキュメントのテナント間でのセキュリティのレベルです。特別な"すべての外部ユーザーを除く」の場合は、同じテナント内の正規のユーザーにアクセスを許可する ACE。パブリックのドキュメントでのテナントの分離によってテナント ID フィルターでは「Everyone」に対して Ace がすべてのテナントに対して同じであるため。Ace もサポートを拒否します。クエリの補強では、拒否 ACE との一致がある場合に、結果からドキュメントを削除する句を追加します。

Exchange のオンライン検索は、インデックスが SharePoint Online のようにテナント ID (サブスクリプション ID) ではなく個々 のユーザーのメールボックスに対するメールボックスの ID で分割されます。パーティション分割メカニズムでは、SharePoint Online と同じですが、ACL はフィルター処理します。
