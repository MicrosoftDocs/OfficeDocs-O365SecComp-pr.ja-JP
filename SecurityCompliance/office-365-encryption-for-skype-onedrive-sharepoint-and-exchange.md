---
title: Skype、OneDrive、SharePoint、および Exchange の Office 365 暗号化
ms.author: krowley
author: kccross
manager: laurawi
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: None
search.appverid:
- MET150
ms.collection:
- Strat_O365_Enterprise
- M365-security-compliance
- Strat_O365_Enterprise
description: '概要: Skype、OneDrive、SharePoint、および Exchange Online の暗号化について説明します。'
ms.openlocfilehash: 55141f671e6cb3d7ea837bfcf9701e37a18fb7ba
ms.sourcegitcommit: 7adfd8eda038cf25449bdf3df78b5e2fcc1999e7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/01/2019
ms.locfileid: "30357568"
---
# <a name="office-365-encryption-for-skype-for-business-onedrive-for-business-sharepoint-online-and-exchange-online"></a><span data-ttu-id="7a1c9-103">Skype for business、OneDrive for business、SharePoint online、Exchange online の Office 365 暗号化</span><span class="sxs-lookup"><span data-stu-id="7a1c9-103">Office 365 Encryption for Skype for Business, OneDrive for Business, SharePoint Online, and Exchange Online</span></span>

<span data-ttu-id="7a1c9-104">Office 365 は、高度なセキュリティで保護された環境で、物理データセンターのセキュリティ、ネットワークセキュリティ、アクセスセキュリティ、アプリケーションセキュリティ、およびデータセキュリティがあります。</span><span class="sxs-lookup"><span data-stu-id="7a1c9-104">Office 365 is a highly secure environment that offers extensive protection in multiple layers: physical data center security, network security, access security, application security, and data security.</span></span>

## <a name="skype-for-business"></a><span data-ttu-id="7a1c9-105">Skype for Business</span><span class="sxs-lookup"><span data-stu-id="7a1c9-105">Skype for Business</span></span>

<span data-ttu-id="7a1c9-p101">Skype for business の顧客データは、会議の参加者によってアップロードされたファイルやプレゼンテーションの形式で保存されている場合があります。Web 会議サーバーは、256ビットキーを使用して AES を使用して顧客データを暗号化します。暗号化された顧客データは、ファイル共有に保存されます。顧客データの各要素は、ランダムに生成された異なる256ビットキーを使用して暗号化されます。会議で顧客データの一部が共有されている場合、Web 会議サーバーは、HTTPS を介して暗号化された顧客データをダウンロードするよう、会議クライアントに指示します。対応するキーをクライアントに送信して、顧客データを復号化できるようにします。Web 会議サーバーは、クライアントが会議の顧客データにアクセスできるようにするために、会議クライアントも認証します。Web 会議に参加する場合、各会議クライアントは、最初に TLS を介してフロントエンドサーバーの内部で実行されている会議フォーカスコンポーネントを使用して SIP ダイアログを確立します。会議フォーカスは、Web 会議サーバーによって生成された認証 cookie を会議クライアントに渡します。その後、会議クライアントは Web 会議サーバーに接続して、サーバーによって認証される認証 cookie を提示します。</span><span class="sxs-lookup"><span data-stu-id="7a1c9-p101">Skype for Business customer data may be stored at rest in the form of files or presentations that are uploaded by meeting participants. The Web Conferencing server encrypts customer data using AES with a 256-bit key. The encrypted customer data is stored on a file share. Each piece of customer data is encrypted using a different randomly generated 256-bit key. When a piece of customer data is shared in a conference, the Web Conferencing server instructs the conferencing clients to download the encrypted customer data via HTTPS. It sends the corresponding key to clients so that the customer data can be decrypted. The Web Conferencing server also authenticates conferencing clients before it allows the clients access to conference customer data. When joining a Web conference, each conferencing client establishes a SIP dialog with the conferencing focus component running inside the front-end server over TLS first. The conferencing focus passes to the conference client an authentication cookie generated by the Web Conferencing server. The conferencing client then connects to the Web Conferencing server presenting the authentication cookie to be authenticated by the server.</span></span>

## <a name="sharepoint-online-and-onedrive-for-business"></a><span data-ttu-id="7a1c9-116">SharePoint Online と OneDrive for Business</span><span class="sxs-lookup"><span data-stu-id="7a1c9-116">SharePoint Online and OneDrive for Business</span></span>

<span data-ttu-id="7a1c9-p102">SharePoint Online のすべての顧客ファイルは、1つのテナントに対して常に排他的な一意のファイルごとのキーによって保護されています。これらのキーは、SharePoint Online サービスによって作成され、管理されるか、顧客キーが使用されるときに、顧客によって作成および管理されます。ファイルをアップロードすると、アップロード要求のコンテキスト内で SharePoint Online によって暗号化が実行されてから、Azure ストレージに送信されます。ファイルがダウンロードされると、SharePoint Online は一意のドキュメント識別子に基づいて Azure ストレージから暗号化された顧客データを取得し、顧客データを復号化してからユーザーに送信します。Azure ストレージには、お客様のデータを復号化したり、識別したり、理解したりする機能はありません。すべての暗号化と復号化は、テナントの分離を強制するのと同じシステムで行われます。これは、Azure Active Directory と SharePoint Online です。</span><span class="sxs-lookup"><span data-stu-id="7a1c9-p102">All customer files in SharePoint Online are protected by unique, per-file keys that are always exclusive to a single tenant. The keys are either created and managed by the SharePoint Online service, or when Customer Key is used, created and managed by customers. When a file is uploaded, encryption is performed by SharePoint Online within the context of the upload request, before being sent to Azure storage. When a file is downloaded, SharePoint Online retrieves the encrypted customer data from Azure storage based on the unique document identifier and decrypts the customer data before sending it to the user. Azure storage has no ability to decrypt, or even identify or understand the customer data. All encryption and decryption happen in the same systems that enforce tenant isolation, which are Azure Active Directory and SharePoint Online.</span></span>

<span data-ttu-id="7a1c9-p103">Office 365 のいくつかのワークロード sharepoint online のデータを格納する Microsoft Teams、sharepoint online のすべてのファイルを格納し、OneDrive for business を使用します。SharePoint Online に格納されているすべての顧客データは、(1 つ以上の AES 256 ビットキーを使用して) 暗号化され、次のようにデータセンター全体に分散されます。(この暗号化プロセスのすべての手順は、FIPS 140-2 レベル2で検証されています。fips 140-2 準拠の詳細については、「 [fips 140-2 コンプライアンス](https://docs.microsoft.com/previous-versions/sql/sql-server-2008-r2/bb326611(v=sql.105))」を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="7a1c9-p103">Several workloads in Office 365 store data in SharePoint Online, including Microsoft Teams, which stores all files in SharePoint Online, and OneDrive for Business, which uses SharePoint Online for its storage. All customer data stored in SharePoint Online is encrypted (with one or more AES 256-bit keys) and distributed across the datacenter as follows. (Every step of this encryption process is FIPS 140-2 Level 2 validated. For additional information about FIPS 140-2 compliance, see [FIPS 140-2 Compliance](https://docs.microsoft.com/previous-versions/sql/sql-server-2008-r2/bb326611(v=sql.105)).)</span></span>

- <span data-ttu-id="7a1c9-p104">各ファイルは、ファイルサイズに応じて、1つまたは複数のチャンクに分割されます。各チャンクは、固有の AES 256 ビットキーを使用して暗号化されます。</span><span class="sxs-lookup"><span data-stu-id="7a1c9-p104">Each file is split into one or more chunks, depending on file size. Each chunk is encrypted using its own unique AES 256-bit key.</span></span>
- <span data-ttu-id="7a1c9-129">ファイルが更新されると、その更新は同じ方法で処理されます。変更は1つ以上のチャンクに分割され、各チャンクは個別の一意のキーを使用して暗号化されます。</span><span class="sxs-lookup"><span data-stu-id="7a1c9-129">When a file is updated, the update is handled in the same way: the change is split into one or more chunks, and each chunk is encrypted with a separate unique key.</span></span>
- <span data-ttu-id="7a1c9-130">これらのチャンク–ファイル、ファイル、および更新デルタは、複数の azure ストレージアカウント間でランダムに分散される azure ストレージの blob として格納されます。</span><span class="sxs-lookup"><span data-stu-id="7a1c9-130">These chunks – files, pieces of files, and update deltas – are stored as blobs in Azure storage that are randomly distributed across multiple Azure storage accounts.</span></span>
- <span data-ttu-id="7a1c9-131">このような顧客データのチャンクの暗号化キーのセットは、それ自体が暗号化されます。</span><span class="sxs-lookup"><span data-stu-id="7a1c9-131">The set of encryption keys for these chunks of customer data is itself encrypted.</span></span>

    - <span data-ttu-id="7a1c9-132">blob の暗号化に使用されるキーは、SharePoint Online コンテンツデータベースに格納されます。</span><span class="sxs-lookup"><span data-stu-id="7a1c9-132">The keys used to encrypt the blobs are stored in the SharePoint Online Content Database.</span></span>
    - <span data-ttu-id="7a1c9-p105">コンテンツデータベースは、データベースのアクセス制御と、保存時の暗号化によって保護されています。暗号化は、 [Azure SQL Database](https://docs.microsoft.com/azure/sql-database/sql-database-technical-overview)で[透過的データ暗号化](https://docs.microsoft.com/sql/relational-databases/security/encryption/transparent-data-encryption-tde)(tde) を使用して実行されます。(azure SQL Database は、リレーショナルデータ、JSON、空間的、XML などの構造をサポートする Microsoft azure の汎用リレーショナルデータベースサービスです)。これらの機密情報は、テナントレベルではなく、SharePoint Online のサービスレベルで行われます。これらの機密情報 (マスターキーと呼ばれることもあります) は、キーストアと呼ばれる別の安全なリポジトリに格納されます。tde は、アクティブデータベースとデータベースのバックアップとトランザクションログの両方に対して、セキュリティで保護を提供します。</span><span class="sxs-lookup"><span data-stu-id="7a1c9-p105">The Content Database is protected by database access controls and encryption at rest. Encryption is performed using [Transparent Data Encryption](https://docs.microsoft.com/sql/relational-databases/security/encryption/transparent-data-encryption-tde) (TDE) in [Azure SQL Database](https://docs.microsoft.com/azure/sql-database/sql-database-technical-overview). (Azure SQL Database is a general-purpose relational database service in Microsoft Azure that supports structures such as relational data, JSON, spatial, and XML.) These secrets are at the service level for SharePoint Online, not at the tenant level. These secrets (sometimes referred to as the master keys) are stored in a separate secure repository called the Key Store. TDE provides security at rest for both the active database and the database backups and transaction logs.</span></span>
    - <span data-ttu-id="7a1c9-p106">顧客がオプションのキーを指定すると、顧客キーが Azure key Vault に格納され、サービスはキーを使用してテナントキーを暗号化します。これは、サイトキーを暗号化するために使用されます。これは、ファイルレベルのキーを暗号化するために使用されます。基本的に、顧客がキーを提供すると、新しいキー階層が導入されます。</span><span class="sxs-lookup"><span data-stu-id="7a1c9-p106">When customers provide the optional key, the customer key is stored in Azure Key Vault, and the service uses the key to encrypt a tenant key, which is used to encrypt a site key, which is then used to encrypt the file level keys. Essentially, a new key hierarchy is introduced when the customer provides a key.</span></span>
- <span data-ttu-id="7a1c9-140">ファイルを再アセンブルするために使用されるマップは、暗号化されたキーと共にコンテンツデータベースに格納されます。これは、それらを復号化するために必要なマスターキーとは別に格納されます。</span><span class="sxs-lookup"><span data-stu-id="7a1c9-140">The map used to re-assemble the file is stored in the Content Database along with the encrypted keys, separately from the master key needed to decrypt them.</span></span>
- <span data-ttu-id="7a1c9-p107">各 Azure storage アカウントには、アクセスの種類 (読み取り、書き込み、列挙、および削除) ごとに固有の資格情報があります。資格情報の各セットは、セキュリティで保護されたキーストアに保持され、定期的に更新されます。前述したように、それぞれ異なる関数を持つ3種類のストアがあります。</span><span class="sxs-lookup"><span data-stu-id="7a1c9-p107">Each Azure storage account has its own unique credentials per access type (read, write, enumerate, and delete). Each set of credentials is held in the secure Key Store and is regularly refreshed. As described above, there are three different types of stores, each with a distinct function:</span></span>
    - <span data-ttu-id="7a1c9-p108">お客様のデータは、Azure ストレージに暗号化された blob として格納されます。顧客データの各チャンクのキーは暗号化され、コンテンツデータベースに格納されます。お客様のデータ自体には、復号化の方法についての手掛かりはありません。</span><span class="sxs-lookup"><span data-stu-id="7a1c9-p108">Customer data is stored as encrypted blobs in Azure storage. The key to each chunk of customer data is encrypted and stored separately in the Content Database. The customer data itself holds no clue as to how it can be decrypted.</span></span>
    - <span data-ttu-id="7a1c9-p109">コンテンツデータベースは SQL Server データベースです。Azure ストレージに格納されている顧客データ blob と、それらの blob を暗号化するために必要なキーを検索して再構築するために必要なマップを保持します。ただし、キーのセットは (前述のように) 暗号化され、別のキーストアに保持されます。</span><span class="sxs-lookup"><span data-stu-id="7a1c9-p109">The Content Database is a SQL Server database. It holds the map required to locate and reassemble the customer data blobs held in Azure storage as well as the keys needed to encrypt those blobs. However, the set of keys is itself encrypted (as explained above) and held in a separate Key Store.</span></span>
    - <span data-ttu-id="7a1c9-p110">キーストアは、コンテンツデータベースと Azure ストレージとは物理的に分離されています。各 Azure storage コンテナーの資格情報と、コンテンツデータベースに保持されている暗号化キーのセットに対するマスタキーを保持します。</span><span class="sxs-lookup"><span data-stu-id="7a1c9-p110">The Key Store is physically separate from the Content Database and Azure storage. It holds the credentials for each Azure storage container and the master key to the set of encrypted keys held in the Content Database.</span></span>

<span data-ttu-id="7a1c9-p111">これら3つの各ストレージコンポーネント (Azure blob ストア、コンテンツデータベース、およびキーストア) は物理的に分離されています。いずれかのコンポーネントに保持されている情報は、それ自体では使用できません。3つのすべてにアクセスできない場合は、チャンクへのキーを取得し、それらを使用できるようにするためにキーを復号化し、対応するチャンクにキーを関連付け、各チャンクを復号化するか、またはドキュメントを構成するチャンクから再構築することはできません。</span><span class="sxs-lookup"><span data-stu-id="7a1c9-p111">Each of these three storage components – the Azure blob store, the Content Database, and the Key Store – is physically separate. The information held in any one of the components is unusable on its own. Without access to all three, it is impossible to retrieve the keys to the chunks, decrypt the keys to make them usable, associate the keys with their corresponding chunks, decrypt each chunk, or reconstruct a document from its constituent chunks.</span></span>

<span data-ttu-id="7a1c9-155">データセンター内のコンピューター上の物理ディスクボリュームを保護する BitLocker 証明書は、ファームキーで保護された安全なリポジトリ (SharePoint Online シークレットストア) に格納されます。</span><span class="sxs-lookup"><span data-stu-id="7a1c9-155">BitLocker certificates, which protect the physical disk volumes on machines in the datacenter, are stored in a secure repository (the SharePoint Online secret store) that is protected by the Farm key.</span></span>

<span data-ttu-id="7a1c9-156">blob キーごとのキーを保護する tde キーは、次の2つの場所に格納されます。</span><span class="sxs-lookup"><span data-stu-id="7a1c9-156">The TDE keys that protect the per-blob keys are stored in two locations:</span></span>

- <span data-ttu-id="7a1c9-157">保護されたリポジトリ。これは、BitLocker 証明書を格納し、ファームキーによって保護されています。そして</span><span class="sxs-lookup"><span data-stu-id="7a1c9-157">The secure repository, which houses the BitLocker certificates and is protected by the Farm Key; and</span></span>
- <span data-ttu-id="7a1c9-158">Azure SQL データベースによって管理される、セキュリティで保護されたリポジトリ。</span><span class="sxs-lookup"><span data-stu-id="7a1c9-158">In a secure repository managed by Azure SQL Database.</span></span>

<span data-ttu-id="7a1c9-p112">Azure ストレージコンテナーへのアクセスに使用される資格情報は、必要に応じて sharepoint online シークレットストアに保持され、各 sharepoint online ファームに委任されます。これらの資格情報は、データの読み取りまたは書き込みに使用される個別の資格情報と、60日ごとに自動的に有効期限切れになるように、ポリシーが適用された、Azure ストレージの SAS 署名です。データの読み取りまたは書き込みに異なる資格情報が使用されます (両方ではない)。また、SharePoint Online ファームには、列挙するためのアクセス許可が与えられていません。</span><span class="sxs-lookup"><span data-stu-id="7a1c9-p112">The credentials used to access the Azure storage containers are also held in the SharePoint Online secret store and delegated to each SharePoint Online farm as needed. These credentials are Azure storage SAS signatures, with separate credentials used to read or write data, and with policy applied so that they auto-expire every 60 days. Different credentials are used to read or write data (not both) and SharePoint Online farms are not given permissions to enumerate.</span></span>

> [!NOTE]
> <span data-ttu-id="7a1c9-p113">Office 365 米国政府機関のお客様の場合、データ blob は米国政府機関のストレージに格納されます。さらに、office 365 での SharePoint Online キーへのアクセスについては、米国政府機関に限定されています。Azure の米国政府運用スタッフには、データ blob の暗号化に使用される SharePoint Online キーストアへのアクセス権がありません。</span><span class="sxs-lookup"><span data-stu-id="7a1c9-p113">For Office 365 U.S. Government customers, data blobs are stored in Azure U.S. Government Storage. In addition, access to SharePoint Online keys in Office 365 U.S. Government is limited to Office 365 staff that have been specifically screened. Azure U.S. Government operations staff do not have access to the SharePoint Online key store that is used for encrypting data blobs.</span></span>

<span data-ttu-id="7a1c9-165">SharePoint online と onedrive for business のデータ暗号化の詳細については、「 [onedrive for business および sharepoint Online のデータ暗号化](https://technet.microsoft.com/en-us/library/dn905447.aspx)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7a1c9-165">For more information about data encryption in SharePoint Online and OneDrive for Business, see [Data Encryption in OneDrive for Business and SharePoint Online](https://technet.microsoft.com/en-us/library/dn905447.aspx).</span></span>

### <a name="list-items-in-sharepoint-online"></a><span data-ttu-id="7a1c9-166">SharePoint Online のリストアイテム</span><span class="sxs-lookup"><span data-stu-id="7a1c9-166">List Items in SharePoint Online</span></span>

<span data-ttu-id="7a1c9-p114">リストアイテムは、ユーザーが作成したリスト内の行、sharepoint online ブログ内の個々の投稿、sharepoint online wiki ページ内のエントリなど、一時的に作成された、またはサイト内で動的に維持できる、より小さな顧客データの塊です。リストアイテムは、コンテンツデータベース (Azure SQL Database) に格納され、tde で保護されています。</span><span class="sxs-lookup"><span data-stu-id="7a1c9-p114">List Items are smaller chunks of customer data that are created ad-hoc or that can live more dynamically within a site, such as rows in a user-created list, individual posts in a SharePoint Online blog, or entries within a SharePoint Online wiki page. List items are stored in the Content Database (Azure SQL Database) and protected with TDE.</span></span>

## <a name="encryption-of-data-in-transit"></a><span data-ttu-id="7a1c9-169">転送中データの暗号化</span><span class="sxs-lookup"><span data-stu-id="7a1c9-169">Encryption of data in transit</span></span>

<span data-ttu-id="7a1c9-170">OneDrive for Business および SharePoint Online では、データを入力し、データセンターを終了する 2 つのシナリオがあります。</span><span class="sxs-lookup"><span data-stu-id="7a1c9-170">In OneDrive for Business and SharePoint Online, there are two scenarios in which data enters and exits the datacenters.</span></span>

- <span data-ttu-id="7a1c9-p115">**サーバーとのクライアント通信**インターネット経由での OneDrive for business への通信では、SSL/TLS 接続が使用されます。すべての SSL 接続は、2048ビットのキーを使用して確立されます。</span><span class="sxs-lookup"><span data-stu-id="7a1c9-p115">**Client communication with the server** - Communication to OneDrive for Business across the Internet uses SSL/TLS connections. All SSL connections are established using 2048-bit keys.</span></span>
- <span data-ttu-id="7a1c9-p116">**データセンター**間でのデータの移動-データセンター間でデータを移動する主な理由は、geo レプリケーションを使用して障害復旧を可能にすることです。たとえば、SQL Server のトランザクションログと blob ストレージのデルタは、このパイプに沿って移動します。このデータは、プライベートネットワークを使用して既に送信されていますが、クラス最高の暗号化を使用してさらに保護されています。</span><span class="sxs-lookup"><span data-stu-id="7a1c9-p116">**Data movement between datacenters** - The primary reason to move data between datacenters is for geo-replication to enable disaster recovery. For instance, SQL Server transaction logs and blob storage deltas travel along this pipe. While this data is already transmitted by using a private network, it is further protected with best-in-class encryption.</span></span>

## <a name="exchange-online"></a><span data-ttu-id="7a1c9-176">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="7a1c9-176">Exchange Online</span></span>

<span data-ttu-id="7a1c9-p117">Exchange Online では、すべてのメールボックスデータに bitlocker を使用し、bitlocker 構成については[暗号化](office-365-bitlocker-and-distributed-key-manager-for-encryption.md)について説明します。サービスレベルの暗号化は、すべてのメールボックスのデータをメールボックスレベルで暗号化します。</span><span class="sxs-lookup"><span data-stu-id="7a1c9-p117">Exchange Online uses BitLocker for all mailbox data, and the BitLocker configuration is described in [BitLocker for Encryption](office-365-bitlocker-and-distributed-key-manager-for-encryption.md). Service-level encryption encrypts all mailbox data at the mailbox level.</span></span> 

<span data-ttu-id="7a1c9-p118">サービス暗号化に加えて、Office 365 は顧客キーをサポートしています。これは、サービス暗号化の上に構築されています。顧客キーは、microsoft のロードマップにもある Exchange Online サービス暗号化の microsoft が管理するキーオプションです。この暗号化方法を使用すると、サーバー管理者とデータの復号化に必要な暗号化キーが分離され、暗号化がデータに直接適用されるため、BitLocker によって保護が強化されます ([BitLocker と比較]-論理ディスクボリュームで暗号化を適用する) Exchange サーバーからコピーした顧客データは暗号化されたままになります。</span><span class="sxs-lookup"><span data-stu-id="7a1c9-p118">In addition to service-encryption, Office 365 supports Customer Key, which is built on top of service-encryption. Customer Key is a Microsoft-managed key option for Exchange Online service encryption that is also on Microsoft's roadmap. This method of encryption provides increased protection not afforded by BitLocker because it provides separation of server administrators and the cryptographic keys necessary for decryption of data, and because the encryption is applied directly to the data (in contrast with BitLocker, which applies encryption at the logical disk volume) any customer data copied from an Exchange server remains encrypted.</span></span>

<span data-ttu-id="7a1c9-p119">exchange online サービス暗号化のスコープは、exchange online 内の rest に格納されている顧客データです。(Skype for business では、ユーザーによって生成されたすべてのコンテンツがユーザーの exchange online メールボックス内に保存されるため、exchange online のサービス暗号化機能を継承します。)</span><span class="sxs-lookup"><span data-stu-id="7a1c9-p119">The scope for Exchange Online service encryption is customer data that is stored at rest within Exchange Online. (Skype for Business stores nearly all user-generated content within the user’s Exchange Online mailbox and therefore inherits the service encryption feature of Exchange Online.)</span></span>
