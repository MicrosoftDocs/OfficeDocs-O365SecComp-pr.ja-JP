---
title: ネットワークアップロードを使用して組織の PST ファイルを Office 365 にインポートする
ms.author: markjjo
author: markjjo
manager: laurawi
ms.date: ''
ms.audience: Admin
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
ms.collection: Strat_O365_IP
search.appverid:
- MOE150
- MED150
- MET150
ms.assetid: 103f940c-0468-4e1a-b527-cc8ad13a5ea6
description: '管理者向け: Office 365 で、ネットワークアップロードを使用して複数の PST ファイルをユーザーのメールボックスに一括インポートする方法について説明します。'
ms.openlocfilehash: 04beb021b34a7357556e4d6e4d26d43de6a85c5d
ms.sourcegitcommit: f57b4001ef1327f0ea622e716a4d7d78f1769b49
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/23/2019
ms.locfileid: "30217357"
---
# <a name="use-network-upload-to-import-your-organization-pst-files-to-office-365"></a><span data-ttu-id="852f8-103">ネットワークアップロードを使用して組織の PST ファイルを Office 365 にインポートする</span><span class="sxs-lookup"><span data-stu-id="852f8-103">Use network upload to import your organization PST files to Office 365</span></span>

> [!NOTE]
> <span data-ttu-id="852f8-p101">この記事は、管理者を対象としています。PST ファイルを自分のメールボックスにインポートしようとしていますか?「 [Outlook .pst ファイルからメール、連絡先、予定表をインポートする](https://go.microsoft.com/fwlink/p/?LinkID=785075)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="852f8-p101">This article is for administrators. Are you trying to import PST files to your own mailbox? See [Import email, contacts, and calendar from an Outlook .pst file](https://go.microsoft.com/fwlink/p/?LinkID=785075)</span></span>
  
<span data-ttu-id="852f8-p102">この記事では、ネットワークアップロードを使用して複数の PST ファイルを Office 365 メールボックスに一括インポートするために必要な手順を説明します。ネットワークアップロードを使用して pst ファイルを Office 365 メールボックスに一括インポートする方法についてよく寄せられる質問については、「 [faq for network upload to import pst files](faqimporting-pst-files-to-office-365.md#using-network-upload-to-import-pst-files)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="852f8-p102">Here are the step-by-step instructions required to use network upload to bulk-import multiple PST files to Office 365 mailboxes. For frequently asked questions about using network upload to bulk-import PST files to Office 365 mailboxes, see [FAQs for using network upload to import PST files](faqimporting-pst-files-to-office-365.md#using-network-upload-to-import-pst-files).</span></span>
  
[<span data-ttu-id="852f8-109">手順 1: SAS URL をコピーして Azure azcopy をインストールする</span><span class="sxs-lookup"><span data-stu-id="852f8-109">Step 1: Copy the SAS URL and install Azure AzCopy</span></span>](#step-1-copy-the-sas-url-and-install-azure-azcopy)

[<span data-ttu-id="852f8-110">手順 2: Office 365 に PST ファイルをアップロードする</span><span class="sxs-lookup"><span data-stu-id="852f8-110">Step 2: Upload your PST files to Office 365</span></span>](#step-2-upload-your-pst-files-to-office-365)

[<span data-ttu-id="852f8-111">オプション手順 3: Office 365 にアップロードされた PST ファイルの一覧を表示する</span><span class="sxs-lookup"><span data-stu-id="852f8-111">(Optional) Step 3: View a list of the PST files uploaded to Office 365</span></span>](#optional-step-3-view-a-list-of-the-pst-files-uploaded-to-office-365)

[<span data-ttu-id="852f8-112">手順 4: PST インポートのマッピングファイルを作成する</span><span class="sxs-lookup"><span data-stu-id="852f8-112">Step 4: Create the PST Import mapping file</span></span>](#step-4-create-the-pst-import-mapping-file)

[<span data-ttu-id="852f8-113">手順 5:Office 365 で PST インポート ジョブを作成する</span><span class="sxs-lookup"><span data-stu-id="852f8-113">Step 5: Create a PST Import job in Office 365</span></span>](#step-5-create-a-pst-import-job-in-office-365)

[<span data-ttu-id="852f8-114">手順 6: データをフィルター処理し、PST インポートジョブを開始する</span><span class="sxs-lookup"><span data-stu-id="852f8-114">Step 6: Filter data and start the PST Import job</span></span>](#step-6-filter-data-and-start-the-pst-import-job)

<span data-ttu-id="852f8-p103">Office 365 メールボックスに PST ファイルをインポートするには、手順1を一度だけ実行する必要があることに注意してください。これらの手順を実行した後、PST ファイルのバッチをアップロードしてインポートするたびに、手順2から手順6に従います。</span><span class="sxs-lookup"><span data-stu-id="852f8-p103">Note that you have to perform Step 1 only once to import PST files to Office 365 mailboxes. After you perform these steps, follow Step 2 through Step 6 each time you want to upload and import a batch of PST files.</span></span>

## <a name="before-you-begin"></a><span data-ttu-id="852f8-117">始める前に</span><span class="sxs-lookup"><span data-stu-id="852f8-117">Before you begin</span></span>
  
- <span data-ttu-id="852f8-p104">PST ファイルを Office 365 メールボックスにインポートするには、Exchange Online でメールボックスのインポートのエクスポートの役割を割り当てられている必要があります。既定では、この役割は Exchange Online のどの役割グループにも割り当てられていません。[組織の管理] 役割グループに、メールボックスのインポートのエクスポートの役割を追加できます。または、新しい役割グループを作成し、メールボックスのインポートのエクスポート役割を割り当てて、自分をメンバーとして追加することもできます。詳細については、「 [Manage role groups](https://go.microsoft.com/fwlink/p/?LinkId=730688)」の「役割グループに役割を追加する」または「役割グループを作成する」のセクションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="852f8-p104">You have to be assigned the Mailbox Import Export role in Exchange Online to import PST files to Office 365 mailboxes. By default, this role isn't assigned to any role group in Exchange Online. You can add the Mailbox Import Export role to the Organization Management role group. Or you can create a new role group, assign the Mailbox Import Export role, and then add yourself as a member. For more information, see the "Add a role to a role group" or the "Create a role group" sections in [Manage role groups](https://go.microsoft.com/fwlink/p/?LinkId=730688).</span></span>
    
    <span data-ttu-id="852f8-123">さらに、Office 365 セキュリティ&amp;コンプライアンスセンターでインポートジョブを作成するには、次のいずれかの条件を満たしている必要があります。</span><span class="sxs-lookup"><span data-stu-id="852f8-123">Additionally, to create import jobs in the Office 365 Security &amp; Compliance Center, one of the following must be true:</span></span>
    
  - <span data-ttu-id="852f8-p105">Exchange Online では、メール受信者の役割が割り当てられている必要があります。既定では、この役割は組織の管理役割グループと受信者管理役割グループに割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="852f8-p105">You have to be assigned the Mail Recipients role in Exchange Online. By default, this role is assigned to the Organization Management and Recipient Management roles groups.</span></span>
    
    <span data-ttu-id="852f8-126">または</span><span class="sxs-lookup"><span data-stu-id="852f8-126">Or</span></span>
    
  - <span data-ttu-id="852f8-127">Office 365 組織の全体管理者である必要があります。</span><span class="sxs-lookup"><span data-stu-id="852f8-127">You have to be a global administrator in your Office 365 organization.</span></span>
    
  > [!TIP]
    > <span data-ttu-id="852f8-p106">Office 365 に PST ファイルをインポートするための特別な目的である Exchange Online に新しい役割グループを作成することを検討してください。PST ファイルのインポートに必要な最低限の特権レベルについては、メールボックスのインポートの役割とメール受信者の役割を新しい役割グループに割り当ててから、メンバーを追加します。</span><span class="sxs-lookup"><span data-stu-id="852f8-p106">Consider creating a new role group in Exchange Online that's specifically intended for importing PST files to Office 365. For the minimum level of privileges required to import PST files, assign the Mailbox Import Export and Mail Recipients roles to the new role group, and then add members.</span></span> 
  
- <span data-ttu-id="852f8-p107">PST ファイルを Office 365 にインポートするためにサポートされている唯一の方法は、このトピックで説明されているように、Azure azcopy ツールを使用することです。azure ストレージエクスプローラーを使用して、PST ファイルを azure ストレージ領域に直接アップロードすることはできません。</span><span class="sxs-lookup"><span data-stu-id="852f8-p107">The only supported method for importing PST files to Office 365 is to use the Azure AzCopy tool, as described in this topic. You can't use the Azure Storage Explorer to upload PST files directly to the Azure storage area.</span></span>
    
- <span data-ttu-id="852f8-p108">Office 365 にインポートする PST ファイルは、組織内のファイルサーバーまたは共有フォルダーに格納する必要があります。手順2では、このファイルサーバーまたは共有フォルダーに格納されている PST ファイルを Office 365 にアップロードする Azure azcopy ツールを実行します。</span><span class="sxs-lookup"><span data-stu-id="852f8-p108">You need to store the PST files that you want to import to Office 365 on a file server or shared folder in your organization. In Step 2, you'll run the Azure AzCopy tool that will upload the PST files that are stored on this file server or shared folder to Office 365.</span></span>
    
- <span data-ttu-id="852f8-p109">この手順では、アクセスキーを含む URL のコピーのコピーと保存を行います。この情報は、手順2で pst ファイルをアップロードするために使用され、手順3で Office 365 にアップロードされた pst ファイルの一覧を表示します。パスワードやその他のセキュリティ関連の情報を保護するのと同じように、この URL を保護するための予防措置を講じるようにしてください。たとえば、パスワードで保護された Microsoft Word 文書、または暗号化された USB ドライブに保存することができます。この組み合わせの URL とキーの例については、「 [More information](#more-information) 」セクションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="852f8-p109">This procedure involves copying and saving a copy of a URL that contains an access key. This information will be used in Step 2 to upload your PST files, and in Step 3 if you want to view a list of the PST files uploaded to Office 365. Be sure to take precautions to protect this URL like you would protect passwords or other security-related information. For example you might save it to a password-protected Microsoft Word document or to an encrypted USB drive. See the [More information](#more-information) section for an example of this combined URL and key.</span></span> 
    
- <span data-ttu-id="852f8-p110">Office 365 の非アクティブなメールボックスに PST ファイルをインポートすることができます。これを行うには、PST インポートマッピングファイルの`Mailbox`パラメーターに非アクティブなメールボックスの GUID を指定します。詳細については\*\*\*\* 、このトピックの「手順4」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="852f8-p110">You can import PST files to an inactive mailbox in Office 365. You do this by specifying the GUID of the inactive mailbox in the  `Mailbox` parameter in the PST Import mapping file. See Step 4 on the **Instructions** tab in this topic for information.</span></span> 
    
- <span data-ttu-id="852f8-p111">Exchange ハイブリッド展開では、プライマリメールボックスがオンプレミスであるユーザーのクラウドベースのアーカイブメールボックスに PST ファイルをインポートできます。これを行うには、PST インポートマッピングファイルで以下の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="852f8-p111">In an Exchange hybrid deployment, you can import PST files to a cloud-based archive mailbox for a user whose primary mailbox is on-premises. You do this by doing the following in the PST Import mapping file:</span></span>
    
  - <span data-ttu-id="852f8-144">`Mailbox`パラメーターに、ユーザーの社内メールボックスの電子メールアドレスを指定します。</span><span class="sxs-lookup"><span data-stu-id="852f8-144">Specify the email address for the user's on-premises mailbox in the  `Mailbox` parameter.</span></span> 
    
  - <span data-ttu-id="852f8-145">`IsArchive`パラメーターに**TRUE**の値を指定します。</span><span class="sxs-lookup"><span data-stu-id="852f8-145">Specify the **TRUE** value in the  `IsArchive` parameter.</span></span> 
    
    <span data-ttu-id="852f8-146">詳細については、[手順 4](#step-4-create-the-pst-import-mapping-file)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="852f8-146">See [Step 4](#step-4-create-the-pst-import-mapping-file) for more information.</span></span> 
    
- <span data-ttu-id="852f8-p112">PST ファイルが Office 365 メールボックスにインポートされると、メールボックスの保持ホールドの設定は無期限に有効になります。これは、メールボックスに割り当てられたアイテム保持ポリシーは、保存機能を無効にするか、保留を解除する日付を設定するまで処理されないことを意味します。なぜこれを行うのでしょうか。メールボックスにインポートされたメッセージが古くなっている場合は、メールボックスに対して構成されたアイテム保持ポリシーに基づいて保持期間が経過したために、削除 (パージ) される可能性があります。メールボックスの保存機能を有効にすると、メールボックスの所有者は新しくインポートされたメッセージを管理することができ、メールボックスの保存期間の設定を変更する時間を与えることができます。保持ホールドの管理に関する提案については、このトピックの「**詳細情報**」タブを参照してください。</span><span class="sxs-lookup"><span data-stu-id="852f8-p112">After PST files are imported to an Office 365 mailbox, the retention hold setting for the mailbox is turned on for an indefinite duration. This means that the retention policy assigned to the mailbox won't be processed until you turn off the retention hold or set a date to turn off the hold. Why do we do this? If messages imported to a mailbox are old, they might be permanently deleted (purged) because their retention period has expired based on the retention settings configured for the mailbox. Placing the mailbox on retention hold will give the mailbox owner time to manage these newly-imported messages or give you time to change the retention settings for the mailbox. See the **More info** tab in this topic for suggestions about managing the retention hold.</span></span> 
    
- <span data-ttu-id="852f8-p113">既定では、Office 365 メールボックスで受信できる最大メッセージサイズは 35 MB です。これは、メールボックスの*MaxReceiveSize*プロパティの既定値が 35 MB に設定されているためです。ただし、Office 365 の最大メッセージ受信サイズの制限は 150 MB です。そのため、35 mb を超えるアイテムを含む PST ファイルをインポートすると、Office 365 インポートサービスによって、ターゲットメールボックスの*MaxReceiveSize*プロパティの値が 150 mb に自動的に変更されます。これにより、150 MB までのメッセージをユーザーのメールボックスにインポートできます。</span><span class="sxs-lookup"><span data-stu-id="852f8-p113">By default, the maximum message size that can be received by an Office 365 mailbox is 35 MB. That's because the default value for the  *MaxReceiveSize*  property for a mailbox is set to 35 MB. However, the limit for the maximum message receive size in Office 365 is 150 MB. So if you import a PST file that contains an item larger than 35 MB, the Office 365 Import service we will automatically change the value of the  *MaxReceiveSize*  property on the target mailbox to 150 MB. This allows messages up to 150 MB to be imported to user mailboxes.</span></span> 
    
    > [!TIP]
    > <span data-ttu-id="852f8-158">メールボックスのメッセージ受信サイズを特定するには、Exchange Online PowerShell で次のコマンドを`Get-Mailbox <user mailbox> | FL MaxReceiveSize`実行します。</span><span class="sxs-lookup"><span data-stu-id="852f8-158">To identify the message receive size for a mailbox, you can run this command in Exchange Online PowerShell:  `Get-Mailbox <user mailbox> | FL MaxReceiveSize`.</span></span> 

## <a name="step-1-copy-the-sas-url-and-install-azure-azcopy"></a><span data-ttu-id="852f8-159">手順 1: SAS URL をコピーして Azure azcopy をインストールする</span><span class="sxs-lookup"><span data-stu-id="852f8-159">Step 1: Copy the SAS URL and install Azure AzCopy</span></span>

<span data-ttu-id="852f8-p114">最初の手順として、Azure azcopy ツールをダウンロードしてインストールします。このツールは、手順2で実行して PST ファイルを Office 365 にアップロードします。組織の SAS URL もコピーします。この url は、組織のための Microsoft クラウド内の Azure ストレージの場所のネットワーク URL と、共有アクセス署名 (SAS) キーの組み合わせです。このキーは、Azure ストレージの場所に PST ファイルをアップロードするために必要なアクセス許可を提供します。SAS URL を保護するための予防措置を講じてください。これは組織に固有であり、手順2で使用されます。</span><span class="sxs-lookup"><span data-stu-id="852f8-p114">The first step is to download and install the Azure AzCopy tool, which is the tool that you'll run in Step 2 to upload PST files to Office 365. You'll also copy the SAS URL for your organization. This URL is a combination of the network URL for the Azure storage location in the Microsoft cloud for your organization and a Shared Access Signature (SAS) key. This key provides you with the necessary permissions to upload PST files to your Azure storage location. Be sure to take precautions to protect the SAS URL. It's unique to your organization and will be used in Step 2.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="852f8-166">network upload メソッドを使用して PST ファイルをインポートするには、次の手順の手順6b でダウンロードできるバージョンの Azure azcopy を使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="852f8-166">To import PST files using the network upload method, we recommend that you use the version of Azure AzCopy that can be downloaded in step 6b in the following procedure.</span></span>
  
1. <span data-ttu-id="852f8-167">に[https://protection.office.com](https://protection.office.com)移動し、Office 365 組織の管理者アカウントの資格情報を使用してサインインします。</span><span class="sxs-lookup"><span data-stu-id="852f8-167">Go to [https://protection.office.com](https://protection.office.com) and sign in using the credentials for an administrator account in your Office 365 organization.</span></span> 
    
2. <span data-ttu-id="852f8-168">セキュリティ&amp; /コンプライアンスセンターの左側のウィンドウで、[**データガバナンス** \>の**インポート**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="852f8-168">In the left pane of the Security &amp; Compliance Center, click **Data governance** \> **Import**.</span></span>
    
    > [!NOTE]
    > <span data-ttu-id="852f8-p115">セキュリティ&amp; /コンプライアンスセンターの [**インポート**] ページにアクセスするには、適切なアクセス許可を割り当てられている必要があります。詳細については、「**はじめに**」セクションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="852f8-p115">You have to be assigned the appropriate permissions to access the **Import** page in the Security &amp; Compliance Center. See the **Before you begin** section for more information.</span></span> 
    
3. <span data-ttu-id="852f8-171">[**インポート**] ページで、 ![[追加](media/ITPro-EAC-AddIcon.gif) ] アイコン [**新しいインポートジョブ**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="852f8-171">On the **Import** page, click ![Add Icon](media/ITPro-EAC-AddIcon.gif) **New import job**.</span></span>
    
    <span data-ttu-id="852f8-172">[ジョブのインポート] ウィザードが表示されます。</span><span class="sxs-lookup"><span data-stu-id="852f8-172">The import job wizard is displayed.</span></span>
    
4. <span data-ttu-id="852f8-p116">PST インポートジョブの名前を入力し、[**次へ**] をクリックします。小文字、数字、ハイフン、およびアンダースコアを使用してください。名前には、大文字を使用したり、スペースを含めたりすることはできません。</span><span class="sxs-lookup"><span data-stu-id="852f8-p116">Type a name for the PST import job, and then click **Next**. Use lowercase letters, numbers, hyphens, and underscores. You can't use uppercase letters or include spaces in the name.</span></span>
    
5. <span data-ttu-id="852f8-176">[**データをアップロードまたは出荷しますか?** ] ページで、[**データのアップロード**] をクリックし、[**次へ**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="852f8-176">On the **Do you want to upload or ship data?** page, click **Upload your data** and then click **Next**.</span></span>
    
    ![[データをアップロードしてネットワークアップロードのインポートジョブを作成する] をクリックします。](media/e59f9dc3-ccde-44ff-ac38-c4e39d76ae85.png)
  
6. <span data-ttu-id="852f8-178">[**データのインポート**] ページで、次の2つの操作を行います。</span><span class="sxs-lookup"><span data-stu-id="852f8-178">On the **Import data** page, do the following two things:</span></span> 
    
    ![SAS URL をコピーして、[データのインポート] ページに Azure azcopy ツールをダウンロードする](media/74411014-ec4b-4e25-9065-404c934cce17.png)
  
    <span data-ttu-id="852f8-p117">a 手順2で、[**ネットワークアップロード SAS URL を表示する**] をクリックします。SAS URL が表示されたら、[**クリップボードにコピー** ] をクリックして貼り付け、ファイルに保存し、後でアクセスできるようにします。</span><span class="sxs-lookup"><span data-stu-id="852f8-p117">a. In step 2, click **Show network upload SAS URL**. After the SAS URL is displayed, click **Copy to clipboard** and then paste it and save it to a file so you can access it later.</span></span>
    
    <span data-ttu-id="852f8-p118">b. 手順3で、[ **azure azcopy のダウンロード**] をクリックして、azure azcopy ツールをダウンロードしてインストールします。ポップアップウィンドウで、[**実行**] をクリックして azcopy をインストールします。</span><span class="sxs-lookup"><span data-stu-id="852f8-p118">b. In step 3, click **Download Azure AzCopy** to download and install the Azure AzCopy tool. In the pop-up window, click **Run** to install AzCopy.</span></span> 
    
> [!NOTE]
> <span data-ttu-id="852f8-186">[**データのインポート**] ページは開いたままにしておくことができます (SAS URL を再度コピーする必要がある場合)。または、[**キャンセル**] をクリックして閉じます。</span><span class="sxs-lookup"><span data-stu-id="852f8-186">You can leave the **Import data** page open (in case you need to copy the SAS URL again) or click **Cancel** to close it.</span></span> 
 
## <a name="step-2-upload-your-pst-files-to-office-365"></a><span data-ttu-id="852f8-187">手順 2: Office 365 に PST ファイルをアップロードする</span><span class="sxs-lookup"><span data-stu-id="852f8-187">Step 2: Upload your PST files to Office 365</span></span>

<span data-ttu-id="852f8-p119">これで、azcopy ツールを使用して PST ファイルを Office 365 にアップロードする準備ができました。このツールは、Microsoft クラウド内の Azure ストレージの場所にそれらをアップロードして保存します。前述したように、PST ファイルをアップロードする Azure ストレージの場所は、Office 365 組織が配置されているのと同じ地域の Microsoft データセンターに存在します。この手順を完了するには、組織内のファイル共有またはファイルサーバーに PST ファイルを配置する必要があります。これは、次の手順でソースディレクトリと呼ばれます。azcopy ツールを実行するたびに、別のソースディレクトリを指定することができます。</span><span class="sxs-lookup"><span data-stu-id="852f8-p119">Now you're ready to use the AzCopy.exe tool to upload PST files to Office 365. This tool uploads and stores them in an Azure storage location in the Microsoft cloud. As previously explained, the Azure storage location that you upload your PST files to resides in the same regional Microsoft datacenter where your Office 365 organization is located. To complete this step, the PST files have to be located in a file share or file server in your organization. This is known as the source directory in the following procedure. Each time you run the AzCopy tool, you can specify a different source directory.</span></span> 
  
1. <span data-ttu-id="852f8-194">ローカル コンピューター上でコマンド プロンプトを開きます。</span><span class="sxs-lookup"><span data-stu-id="852f8-194">Open a Command Prompt on your local computer.</span></span>
    
2. <span data-ttu-id="852f8-p120">手順1で azcopy ツールをインストールしたディレクトリに移動します。ツールを既定の場所にインストールした場合は、 `%ProgramFiles(x86)%\Microsoft SDKs\Azure\AzCopy`に移動します。</span><span class="sxs-lookup"><span data-stu-id="852f8-p120">Go to the directory where you installed the AzCopy.exe tool in Step 1. If you installed the tool in the default location, go to `%ProgramFiles(x86)%\Microsoft SDKs\Azure\AzCopy`.</span></span>
    
3. <span data-ttu-id="852f8-197">次のコマンドを実行して、Office 365 に PST ファイルをアップロードします。</span><span class="sxs-lookup"><span data-stu-id="852f8-197">Run the following command to upload the PST files to Office 365.</span></span>

    ```
    AzCopy.exe /Source:<Location of PST files> /Dest:<SAS URL> /V:<Log file location> /Y
  
    ```
 
    <span data-ttu-id="852f8-p121">次の表では、パラメーターとその必須値について説明します。前の手順で取得した情報は、これらのパラメーターの値で使用されることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="852f8-p121">The following table describes the parameters and their required values. Note that the information you obtained in the previous step is used in the values for these parameters.</span></span>
    
    |<span data-ttu-id="852f8-200">**パラメーター**</span><span class="sxs-lookup"><span data-stu-id="852f8-200">**Parameter**</span></span>|<span data-ttu-id="852f8-201">**説明**</span><span class="sxs-lookup"><span data-stu-id="852f8-201">**Description**</span></span>|<span data-ttu-id="852f8-202">**例**</span><span class="sxs-lookup"><span data-stu-id="852f8-202">**Example**</span></span>|
    |:-----|:-----|:-----|
    | `/Source:` <br/> |<span data-ttu-id="852f8-203">Office 365 にアップロードされる PST ファイルを含む、組織内のソースディレクトリを指定します。</span><span class="sxs-lookup"><span data-stu-id="852f8-203">Specifies the source directory in your organization that contains the PST files that will be uploaded to Office 365.</span></span>  <br/> <span data-ttu-id="852f8-204">このパラメーターの値は必ず二重引用符 (" ") で囲むようにしてください。</span><span class="sxs-lookup"><span data-stu-id="852f8-204">Be sure to surround the value of this parameter with double-quotation marks (" ").</span></span>  <br/> | `/Source:"\\FILESERVER01\PSTs"` <br/> |
    | `/Dest:` <br/> |<span data-ttu-id="852f8-205">手順1で取得した SAS URL を指定します。</span><span class="sxs-lookup"><span data-stu-id="852f8-205">Specifies the SAS URL that you obtained in Step 1.</span></span>  <br/> <span data-ttu-id="852f8-206">このパラメーターの値は必ず二重引用符 (" ") で囲むようにしてください。</span><span class="sxs-lookup"><span data-stu-id="852f8-206">Be sure to surround the value of this parameter with double-quotation marks (" ").</span></span>  <br/> <span data-ttu-id="852f8-p122">**ヒント:** オプションPST ファイルをアップロードするために、Azure ストレージの場所にサブフォルダーを指定することができます。これを行うには、SAS URL にサブフォルダーの場所 ("ingestiondata" の後) を追加します。最初の例では、サブフォルダーを指定しません。これは、pst が Azure ストレージの場所のルート ( *ingestiondata*という名前) にアップロードされることを意味します。2番目の例では、PST ファイルを Azure ストレージの場所のルートにあるサブフォルダー ( *PSTFiles*という名前) にアップロードします。</span><span class="sxs-lookup"><span data-stu-id="852f8-p122">**Tip:** (Optional) You can specify a subfolder in the Azure storage location to upload the PST files to. You do this by adding a subfolder location (after "ingestiondata") in the SAS URL. The first example doesn't specify a subfolder; that means the PSTs will be uploaded to the root (named  *ingestiondata*  ) of the Azure storage location. The second example uploads the PST files to a subfolder (named  *PSTFiles*  ) in the root of the Azure storage location.  </span></span><br/> | `/Dest:"https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D"` <br/> <span data-ttu-id="852f8-211">または</span><span class="sxs-lookup"><span data-stu-id="852f8-211">Or</span></span>  <br/>  `/Dest:"https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata/PSTFiles?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D"` <br/> |
    | `/V:` <br/> |<span data-ttu-id="852f8-p123">詳細なステータス メッセージをログ ファイルに出力します。既定では、詳細なログ ファイルは、%LocalAppData%\Microsoft\Azure\AzCopy 内の AzCopyVerbose.log という名前です。既存のファイルの場所をこのオプションで指定した場合、詳細なログはそのファイルに追加されます。</span><span class="sxs-lookup"><span data-stu-id="852f8-p123">Outputs verbose status messages into a log file. By default, the verbose log file is named AzCopyVerbose.log in %LocalAppData%\Microsoft\Azure\AzCopy. If you specify an existing file location for this option, the verbose log will be appended to that file.</span></span>  <br/> <span data-ttu-id="852f8-215">このパラメーターの値は必ず二重引用符 (" ") で囲むようにしてください。</span><span class="sxs-lookup"><span data-stu-id="852f8-215">Be sure to surround the value of this parameter with double-quotation marks (" ").</span></span>  <br/> | `/V:"c:\Users\Admin\Desktop\Uploadlog.log"` <br/> |
    | `/S` <br/> |<span data-ttu-id="852f8-216">このオプションスイッチでは、 `/Source:`パラメーターで指定されたソースディレクトリ内のサブフォルダーにある pst ファイルが、azcopy ツールによってコピーされるように、再帰モードを指定します。</span><span class="sxs-lookup"><span data-stu-id="852f8-216">This optional switch specifies the recursive mode so that the AzCopy tool will copy PSTs files that are located in subfolders in the source directory that is specified by the  `/Source:` parameter.</span></span>  <br/> <span data-ttu-id="852f8-p124">**注:** このスイッチを含めると、サブフォルダー内の PST ファイルは、アップロード後に、Azure ストレージの場所に別のファイルパス名を持つことになります。手順4で作成した CSV ファイルの正確なファイルのパス名を指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="852f8-p124">**Note:** If you include this switch, PST files in subfolders will have a different file pathname in the Azure storage location after they're uploaded. You'll have to specify the exact file pathname in the CSV file that you create in Step 4.  </span></span><br/> | `/S` <br/> |
    | `/Y` <br/> |<span data-ttu-id="852f8-p125">この必須スイッチでは、PST ファイルを Azure ストレージの場所にアップロードするときに、書き込み専用の SAS トークンを使用できます。手順1で取得した sas url (およびパラメーターで`/Dest:`指定) は書き込み専用の sas url なので、このスイッチを含める必要があります。書き込み専用の SAS URL を使用しても、azure ストレージの場所にアップロードされた PST ファイルの一覧を表示することはできません。</span><span class="sxs-lookup"><span data-stu-id="852f8-p125">This required switch allows the use of write-only SAS tokens when you upload the PST files to the Azure storage location. The SAS URL you obtained in step 1 (and specified in  `/Dest:` parameter) is a write-only SAS URL, which is why you must include this switch. Note that a write-only SAS URL will not prevent you from using the Azure Storage Explorer to view a list of the PST files uploaded to the Azure storage location.  </span></span><br/> | `/Y` <br/> |
   
<span data-ttu-id="852f8-222">各パラメーターの実際の値を使う AzCopy.exe ツールの構文の例を以下に示します。</span><span class="sxs-lookup"><span data-stu-id="852f8-222">Here's an example of the syntax for the AzCopy.exe tool using actual values for each parameter:</span></span>
    
```
  AzCopy.exe /Source:"\\FILESERVER1\PSTs" /Dest:"https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D" /V:"c:\Users\Admin\Desktop\AzCopy1.log" /Y
  
```

<span data-ttu-id="852f8-p126">コマンドを実行すると、PST ファイルのアップロードの進行状況を示す状態メッセージが表示されます。最終の状態メッセージは、正常にアップロードされたファイルの合計数を示しています。 </span><span class="sxs-lookup"><span data-stu-id="852f8-p126">After you run the command, status messages are displayed that show the progress of uploading the PST files. A final status message shows the total number of files that were successfully uploaded.</span></span>

> [!TIP]
> <span data-ttu-id="852f8-p127">azcopy コマンドを正常に実行し、すべてのパラメーターが正しいことを確認したら、手順1で取得した情報をコピーしたのと同じ (セキュリティで保護された) ファイルにコマンドライン構文のコピーを保存します。その後、azcopy ツールを実行して PST ファイルを Office 365 にアップロードするたびに、このコマンドをコマンドプロンプトにコピーして貼り付けることができます。変更する必要があるのは、 `/Source:`パラメーターの値のみです。これは、PST ファイルが配置されているソースディレクトリによって異なります。</span><span class="sxs-lookup"><span data-stu-id="852f8-p127">After you successfully run the AzCopy.exe command and verify that all the parameters are correct, save a copy of the command line syntax to the same (secured) file where you copied the information you obtained in Step 1. Then you can copy and paste this command in a Command Prompt each time that you want to run the AzCopy.exe tool to upload PST files to Office 365. The only value you might have to change are the ones for the  `/Source:` parameter. This depends on the source directory where the PST files are located.</span></span>

## <a name="optional-step-3-view-a-list-of-the-pst-files-uploaded-to-office-365"></a><span data-ttu-id="852f8-229">オプション手順 3: Office 365 にアップロードされた PST ファイルの一覧を表示する</span><span class="sxs-lookup"><span data-stu-id="852f8-229">(Optional) Step 3: View a list of the PST files uploaded to Office 365</span></span>

<span data-ttu-id="852f8-p128">オプションの手順として、Microsoft azure ストレージエクスプローラー (無償のオープンソースツール) をインストールして使用し、azure blob にアップロードした PST ファイルの一覧を表示することができます。これを行うには、次の2つの適切な理由があります。</span><span class="sxs-lookup"><span data-stu-id="852f8-p128">As an optional step, you can install and use the Microsoft Azure Storage Explorer (which is a free, open source tool) to view the list of the PST files that you've uploaded to the Azure blob. There are two good reasons to do this:</span></span>
  
- <span data-ttu-id="852f8-232">組織内の共有フォルダーまたはファイルサーバーの PST ファイルが Azure blob に正常にアップロードされたことを確認します。</span><span class="sxs-lookup"><span data-stu-id="852f8-232">Verify that PST files from the shared folder or file server in your organization were successfully uploaded to the Azure blob.</span></span>
    
- <span data-ttu-id="852f8-p129">Azure blob にアップロードされた各 PST ファイルのファイル名 (およびサブフォルダーが含まれている場合はそのパス名) を確認します。これは、次の手順で pst マッピングファイルを作成している場合に、各 pst ファイルのフォルダーパス名とファイル名の両方を指定する必要があるため、非常に役立ちます。これらの名前を確認すると、PST マッピングファイルの潜在的なエラーを減らすのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="852f8-p129">Verify the filename (and the subfolder pathname if you included one) for each PST file uploaded to the Azure blob. This is really helpful when you're creating the PST mapping file in the next step because you have to specify both the folder pathname and filename for each PST file. Verifying these names can help reduce potential errors in your PST mapping file.</span></span>
    
<span data-ttu-id="852f8-236">Microsoft Azure ストレージエクスプローラーはプレビュー段階です。</span><span class="sxs-lookup"><span data-stu-id="852f8-236">The Microsoft Azure Storage Explorer is in Preview.</span></span>
  
> [!IMPORTANT]
> <span data-ttu-id="852f8-p130">Azure ストレージエクスプローラーを使用して PST ファイルをアップロードまたは変更することはできません。PST ファイルを Office 365 にインポートするためにサポートされている唯一の方法は、azcopy を使用することです。また、Azure blob にアップロードした PST ファイルを削除することもできません。PST ファイルを削除しようとすると、必要なアクセス許可がないというエラーが表示されます。すべての PST ファイルが Azure ストレージ領域から自動的に削除されることに注意してください。進行中のインポートジョブがない場合は、最新のインポートジョブが作成されてから30日後に**ingestiondata**コンテナー内のすべての PST ファイルが削除されます。</span><span class="sxs-lookup"><span data-stu-id="852f8-p130">You can't use the Azure Storage Explorer to upload or modify PST files. The only supported method for importing PST files to Office 365 is to use AzCopy. Also, you can't delete PST files that you've uploaded to the Azure blob. If you try to delete a PST file, you'll receive an error about not having the required permissions. Note that all PST files are automatically deleted from your Azure storage area. If there are no import jobs in progress, then all PST files in the **ingestiondata** container are deleted 30 days after the most recent import job was created.</span></span>
  
<span data-ttu-id="852f8-243">azure ストレージエクスプローラーをインストールして azure ストレージ領域に接続するには、次のようにします。</span><span class="sxs-lookup"><span data-stu-id="852f8-243">To install the Azure Storage Explorer and connect to your Azure storage area:</span></span>
  
1. <span data-ttu-id="852f8-244">[Microsoft Azure ストレージエクスプローラーツール](https://go.microsoft.com/fwlink/p/?LinkId=544842)をダウンロードしてインストールします。</span><span class="sxs-lookup"><span data-stu-id="852f8-244">Download and install the [Microsoft Azure Storage Explorer tool](https://go.microsoft.com/fwlink/p/?LinkId=544842).</span></span>
    
2. <span data-ttu-id="852f8-245">Microsoft Azure ストレージエクスプローラーを起動し、左側のウィンドウで [**ストレージアカウント**] を右クリックして、[ **Azure ストレージに接続] を**クリックします。</span><span class="sxs-lookup"><span data-stu-id="852f8-245">Start the Microsoft Azure Storage Explorer, right-click **Storage Accounts** in the left pane, and then click **Connect to Azure storage**.</span></span>
    
    ![[ストレージアカウント] を右クリックし、[Azure ストレージへの接続] をクリックします。](media/75b80cc3-c336-4f96-ad32-54ac9b96a7af.png)
  
3. <span data-ttu-id="852f8-247">[**共有アクセス署名 (SAS) URI または接続文字列を使用**する] をクリックし、[**次へ**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="852f8-247">Click **Use a shared access signature (SAS) URI or connection string** and click **Next**.</span></span>
    
4. <span data-ttu-id="852f8-248">[ **sas uri を使用**する] をクリックし、手順1で取得した sas URL を [ **uri**] の下のボックスに貼り付け、[**次へ**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="852f8-248">Click **Use a SAS URI**, paste the SAS URL that you obtained in Step 1 into the box under **URI**, and then click **Next**.</span></span>
    
5. <span data-ttu-id="852f8-249">[**接続の概要**] ページで、接続情報を確認し、[**接続**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="852f8-249">On the **Connection summary** page, you can review the connection information, and then click **Connect**.</span></span>
    
    <span data-ttu-id="852f8-p131">**ingestiondata**コンテナーが開きます。このファイルには、手順2でアップロードした PST ファイルが含まれています。**ingestiondata**コンテナーは、**ストレージアカウント** \> **(SAS 接続されたサービス)** \> **Blob コンテナー**の下にあります。</span><span class="sxs-lookup"><span data-stu-id="852f8-p131">The **ingestiondata** container is opened; it contains the PST files that you uploaded in Step 2. The **ingestiondata** container is located under **Storage Accounts** \> **(SAS-Attached Services)** \> **Blob Containers**.</span></span> 
    
    ![Azure ストレージ エクスプローラーには、アップロードした PST ファイルの一覧が表示される](media/12376fed-13a5-4a09-8fe6-e819e011b334.png)
  
6. <span data-ttu-id="852f8-p132">Microsoft azure ストレージエクスプローラーの使用が終了したら、[ **ingestiondata**] を右クリックし、 \*\*\*\* [切断] をクリックして azure ストレージ領域から切断します。そうしないと、次に接続しようとしたときにエラーが表示されます。</span><span class="sxs-lookup"><span data-stu-id="852f8-p132">When you're finished using the Microsoft Azure Storage Explorer, right-click **ingestiondata**, and then click **Detach** to disconnect from your Azure storage area. Otherwise, you'll receive an error the next time you try to attach.</span></span> 
    
    ![ingestion を右クリックして [デタッチ] をクリックし、Azure のストレージ エリアから切断する](media/1e8e5e95-4215-4ce4-a13d-ab5f826a0510.png)
  
## <a name="step-4-create-the-pst-import-mapping-file"></a><span data-ttu-id="852f8-256">手順 4: PST インポートのマッピングファイルを作成する</span><span class="sxs-lookup"><span data-stu-id="852f8-256">Step 4: Create the PST Import mapping file</span></span>

<span data-ttu-id="852f8-p133">pst ファイルが Office 365 組織の Azure ストレージの場所にアップロードされた後、次の手順では、pst ファイルがインポートされるユーザーメールボックスを指定するコンマ区切り値 (CSV) ファイルを作成します。PST インポートジョブを作成する場合は、次の手順でこの CSV ファイルを送信します。</span><span class="sxs-lookup"><span data-stu-id="852f8-p133">After the PST files have been uploaded to the Azure storage location for your Office 365 organization, the next step is to create a comma separated value (CSV) file that specifies which user mailboxes the PST files will be imported to. You'll submit this CSV file in the next step when you create a PST Import job.</span></span>
  
1. <span data-ttu-id="852f8-259">[PST インポートのマッピングファイルのコピーをダウンロード](https://go.microsoft.com/fwlink/p/?LinkId=544717)します。</span><span class="sxs-lookup"><span data-stu-id="852f8-259">[Download a copy of the PST Import mapping file](https://go.microsoft.com/fwlink/p/?LinkId=544717).</span></span>
    
2. <span data-ttu-id="852f8-p134">CSV ファイルを開くか、ローカル コンピューターに保存します。次の例は、完了した PST インポートのマッピング ファイル (メモ帳で開いた) を示しています。Microsoft Excel を使って CSV ファイルを編集するほうが、はるかに簡単です。</span><span class="sxs-lookup"><span data-stu-id="852f8-p134">Open or save the CSV file to your local computer. The following example shows a completed PST Import mapping file (opened in NotePad). It's much easier to use Microsoft Excel to edit the CSV file.</span></span>


    ```
    Workload,FilePath,Name,Mailbox,IsArchive,TargetRootFolder,ContentCodePage,SPFileContainer,SPManifestContainer,SPSiteUrl
    Exchange,,annb.pst,annb@contoso.onmicrosoft.com,FALSE,/,,,,
    Exchange,,annb_archive.pst,annb@contoso.onmicrosoft.com,TRUE,,,,,
    Exchange,,donh.pst,donh@contoso.onmicrosoft.com,FALSE,/,,,,
    Exchange,,donh_archive.pst,donh@contoso.onmicrosoft.com,TRUE,,,,,
    Exchange,PSTFiles,pilarp.pst,pilarp@contoso.onmicrosoft.com,FALSE,/,,,,
    Exchange,PSTFiles,pilarp_archive.pst,pilarp@contoso.onmicrosoft.com,TRUE,/ImportedPst,,,,
    Exchange,PSTFiles,tonyk.pst,tonyk@contoso.onmicrosoft.com,FALSE,,,,,
    Exchange,PSTFiles,tonyk_archive.pst,tonyk@contoso.onmicrosoft.com,TRUE,/ImportedPst,,,,
    Exchange,PSTFiles,zrinkam.pst,zrinkam@contoso.onmicrosoft.com,FALSE,,,,,
    Exchange,PSTFiles,zrinkam_archive.pst,zrinkam@contoso.onmicrosoft.com,TRUE,/ImportedPst,,,,
    ```
    <span data-ttu-id="852f8-p135">CSV ファイルの最初の行、つまりヘッダー行には、pst ファイルをユーザーメールボックスにインポートするために pst インポートサービスによって使用されるパラメーターが一覧表示されます。各パラメーター名はコンマで区切ります。ヘッダー行の下の各行は、特定のメールボックスに PST ファイルをインポートするためのパラメーター値を表します。ユーザーのメールボックスにインポートする PST ファイルごとに1つの行が必要になります。マッピングファイルのプレースホルダーデータを実際のデータに置き換えてください。</span><span class="sxs-lookup"><span data-stu-id="852f8-p135">The first row, or header row, of the CSV file lists the parameters that will be used by the PST Import service to import the PST files to user mailboxes. Each parameter name is separated by a comma. Each row under the header row represents the parameter values for importing a PST file to a specific mailbox. You will need a row for each PST file that you want to import to a user mailbox. Be sure to replace the placeholder data in the mapping file with your actual data.</span></span>

   <span data-ttu-id="852f8-268">**注:** SharePoint のパラメーターを含め、見出し行の内容を変更しないでください。PST インポートプロセス中は無視されます。</span><span class="sxs-lookup"><span data-stu-id="852f8-268">**Note:** Don't change anything in the header row, including the SharePoint parameters; they will be ignored during the PST Import process.</span></span> 

 3. <span data-ttu-id="852f8-269">次の表の情報を使って、必要な情報を含む CSV ファイルを作成します。</span><span class="sxs-lookup"><span data-stu-id="852f8-269">Use the information in the following table to populate the CSV file with the required information.</span></span>


    |<span data-ttu-id="852f8-270">**パラメーター**</span><span class="sxs-lookup"><span data-stu-id="852f8-270">**Parameter**</span></span>|<span data-ttu-id="852f8-271">**説明**</span><span class="sxs-lookup"><span data-stu-id="852f8-271">**Description**</span></span>|<span data-ttu-id="852f8-272">**例**</span><span class="sxs-lookup"><span data-stu-id="852f8-272">**Example**</span></span>|
    |:-----|:-----|:-----|
    | `Workload` <br/> |<span data-ttu-id="852f8-p136">データのインポート先となる Office 365 サービスを指定します。PST ファイルをユーザーのメールボックスにインポート`Exchange`するには、を使用します。</span><span class="sxs-lookup"><span data-stu-id="852f8-p136">Specifies the Office 365 service that data will be imported to. To import PST files to user mailboxes, use  `Exchange`.  </span></span><br/> | `Exchange` <br/> |
    | `FilePath` <br/> |<span data-ttu-id="852f8-275">手順2で PST ファイルをアップロードした Azure ストレージの場所でのフォルダーの場所を指定します。</span><span class="sxs-lookup"><span data-stu-id="852f8-275">Specifies the folder location in the Azure storage location that you uploaded the PST files to in Step 2.</span></span>  <br/> <span data-ttu-id="852f8-p137">手順2の`/Dest:`パラメーターにオプションのサブフォルダー名を SAS URL に含めなかった場合は、CSV ファイルでこのパラメーターを空白のままにしておきます。サブフォルダー名を含めた場合は、このパラメーターで指定します (2 番目の例を参照してください)。このパラメーターの値は、大文字と小文字を区別します。</span><span class="sxs-lookup"><span data-stu-id="852f8-p137">If you didn't include an optional subfolder name in the SAS URL in the  `/Dest:` parameter in Step 2, leave this parameter blank in the CSV file. If you included a subfolder name, specify it in this parameter (see the second example). The value for this parameter is case sensitive.  </span></span><br/> <span data-ttu-id="852f8-279">どちらの方法\*\* でも、 `FilePath`パラメーターの値に "ingestiondata" を含めないでください。</span><span class="sxs-lookup"><span data-stu-id="852f8-279">Either way,  *don't*  include "ingestiondata" in the value for the  `FilePath` parameter.</span></span>  <br/><br/> <span data-ttu-id="852f8-p138">**重要:** ファイルパス名の大文字と小文字は、手順2の`/Dest:`パラメーターの SAS URL にオプションのサブフォルダー名を含めた場合に使用した場合と同じである必要があります。たとえば、手順2でサブ`PSTFiles`フォルダー名を使用して、CSV ファイルの`pstfiles` `FilePath`パラメーターでを使用した場合、PST ファイルのインポートは失敗します。両方のインスタンスで同じケースを使用してください。</span><span class="sxs-lookup"><span data-stu-id="852f8-p138">**Important:** The case for the file path name must be the same as the case you used if you included an optional subfolder name in the SAS URL in the  `/Dest:` parameter in Step 2. For example, if you used  `PSTFiles` for the subfolder name in Step 2 and then use  `pstfiles` in the  `FilePath` parameter in CSV file, the import for the PST file will fail. Be sure to use the same case in both instances.  </span></span><br/> |<span data-ttu-id="852f8-283">(空白)</span><span class="sxs-lookup"><span data-stu-id="852f8-283">(leave blank)</span></span>  <br/> <span data-ttu-id="852f8-284">または</span><span class="sxs-lookup"><span data-stu-id="852f8-284">Or</span></span>  <br/>  `PSTFiles` <br/> |
    | `Name` <br/> |<span data-ttu-id="852f8-p139">ユーザーメールボックスにインポートされる PST ファイルの名前を指定します。このパラメーターの値は、大文字と小文字を区別します。</span><span class="sxs-lookup"><span data-stu-id="852f8-p139">Specifies the name of the PST file that will be imported to the user mailbox. The value for this parameter is case sensitive.  </span></span><br/> <br/><span data-ttu-id="852f8-p140">**重要:** CSV ファイルの pst ファイル名の大文字と小文字は、手順2で Azure ストレージの場所にアップロードされた pst ファイルと同じである必要があります。たとえば、CSV ファイルの`annb.pst` `Name`パラメーターでを使用していて、実際の pst ファイルの名前が`AnnB.pst`である場合、その pst ファイルのインポートは失敗します。CSV ファイルの pst の名前では、実際の pst ファイルと同じ大文字と小文字が使用されていることを確認してください。</span><span class="sxs-lookup"><span data-stu-id="852f8-p140">**Important:** The case for the PST file name in the CSV file must be the same as the PST file that was uploaded to the Azure storage location in Step 2. For example, if you use  `annb.pst` in the  `Name` parameter in the CSV file, but the name of the actual PST file is  `AnnB.pst`, the import for that PST file will fail. Be sure that the name of the PST in the CSV file uses the same case as the actual PST file.  </span></span><br/> | `annb.pst` <br/> |
    | `Mailbox` <br/> |<span data-ttu-id="852f8-p141">PST ファイルのインポート先となるメールボックスの電子メールアドレスを指定します。pst インポートサービスは、pst ファイルのパブリックフォルダーへのインポートをサポートしていないため、パブリックフォルダーを指定することはできません。</span><span class="sxs-lookup"><span data-stu-id="852f8-p141">Specifies the email address of the mailbox that the PST file will be imported to. Note that you can't specify a public folder because the PST Import Service doesn't support importing PST files to public folders.  </span></span><br/> <span data-ttu-id="852f8-p142">非アクティブなメールボックスに PST ファイルをインポートするには、このパラメーターのメールボックス GUID を指定する必要があります。この GUID を取得するには、Exchange Online で次の PowerShell コマンドを実行します。`Get-Mailbox <identity of inactive mailbox> -InactiveMailboxOnly | FL Guid`</span><span class="sxs-lookup"><span data-stu-id="852f8-p142">To import a PST file to an inactive mailbox, you have to specify the mailbox GUID for this parameter. To obtain this GUID, run the following PowerShell command in Exchange Online:  `Get-Mailbox <identity of inactive mailbox> -InactiveMailboxOnly | FL Guid`</span></span> <br/> <br/><span data-ttu-id="852f8-p143">**注:** 場合によっては、1つのメールボックスがアクティブなメールボックスであり、もう一方のメールボックスが削除済み (非アクティブ) 状態になっているメールボックスが同じメールアドレスを持つ複数のメールボックスが存在することがあります。このような状況では、PST ファイルをインポートするメールボックスを一意に識別するために、メールボックスの GUID を指定する必要があります。この GUID をアクティブなメールボックスに対して取得するには`Get-Mailbox <identity of active mailbox> | FL Guid`、次の PowerShell コマンドを実行します。回復可能な削除 (または非アクティブ) のメールボックスの GUID を取得`Get-Mailbox <identity of soft-deleted or inactive mailbox> -SoftDeletedMailbox | FL Guid`するには、次のコマンドを実行します。</span><span class="sxs-lookup"><span data-stu-id="852f8-p143">**Note:** In some cases, you might have multiple mailboxes with the same email address, where one mailbox is an active mailbox and the other mailbox is in a soft-deleted (or inactive) state. In these situations, you have to specify the mailbox GUID to uniquely identify the mailbox to import the PST file to. To obtain this GUID for active mailboxes, run the following PowerShell command:  `Get-Mailbox <identity of active mailbox> | FL Guid`. To obtain the GUID for soft-deleted (or inactive) mailboxes, run this command  `Get-Mailbox <identity of soft-deleted or inactive mailbox> -SoftDeletedMailbox | FL Guid`.  </span></span><br/> | `annb@contoso.onmicrosoft.com` <br/> <span data-ttu-id="852f8-298">または</span><span class="sxs-lookup"><span data-stu-id="852f8-298">Or</span></span>  <br/>  `2d7a87fe-d6a2-40cc-8aff-1ebea80d4ae7` <br/> |
    | `IsArchive` <br/> | <span data-ttu-id="852f8-p144">PST ファイルをユーザーのアーカイブ メールボックスにインポートするかどうかを指定します。次のような 2 つの選択肢があります。</span><span class="sxs-lookup"><span data-stu-id="852f8-p144">Specifies whether or not to import the PST file to the user's archive mailbox. There are two options:  </span></span><br/><br/><span data-ttu-id="852f8-301">**FALSE** -PST ファイルをユーザーのプライマリメールボックスにインポートします。</span><span class="sxs-lookup"><span data-stu-id="852f8-301">**FALSE** - Imports the PST file to the user's primary mailbox.</span></span>  <br/> <span data-ttu-id="852f8-p145">**TRUE** -PST ファイルをユーザーのアーカイブメールボックスにインポートします。これ[は、ユーザーのアーカイブメールボックスが有効になっ](enable-archive-mailboxes.md)ていることを前提としています。</span><span class="sxs-lookup"><span data-stu-id="852f8-p145">**TRUE** - Imports the PST file to the user's archive mailbox. This assumes that the [user's archive mailbox is enabled](enable-archive-mailboxes.md). </span></span><br/><br/><span data-ttu-id="852f8-p146">このパラメーターをに`TRUE`設定し、ユーザーのアーカイブメールボックスが有効になっていない場合、そのユーザーのインポートは失敗します。1人のユーザーに対してインポートが失敗した場合 (アーカイブが有効になっておら`TRUE`ず、このプロパティがに設定されているため)、インポートジョブの他のユーザーに影響が及ぶことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="852f8-p146">If you set this parameter to  `TRUE` and the user's archive mailbox isn't enabled, the import for that user will fail. Note that if an import fails for one user (because their archive isn't enabled and this property is set to  `TRUE`), the other users in the import job won't be affected.  </span></span><br/>  <span data-ttu-id="852f8-306">このパラメーターを空白のままにすると、PST ファイルがユーザーのプライマリメールボックスにインポートされます。</span><span class="sxs-lookup"><span data-stu-id="852f8-306">If you leave this parameter blank, the PST file is imported to the user's primary mailbox.</span></span>  <br/> <br/><span data-ttu-id="852f8-307">**注:** プライマリメールボックスがオンプレミスであるユーザーのクラウドベースのアーカイブメールボックスに PST ファイルをインポートするには`TRUE` 、このパラメーターに対してを指定して、 `Mailbox`パラメーターのユーザーの社内メールボックスの電子メールアドレスを指定するだけです。</span><span class="sxs-lookup"><span data-stu-id="852f8-307">**Note:** To import a PST file to a cloud-based archive mailbox for a user whose primary mailbox is on-premises, just specify  `TRUE` for this parameter and specify the email address for the user's on-premises mailbox for the  `Mailbox` parameter.</span></span>  <br/> | `FALSE` <br/> <span data-ttu-id="852f8-308">または</span><span class="sxs-lookup"><span data-stu-id="852f8-308">Or</span></span>  <br/>  `TRUE` <br/> |
    | `TargetRootFolder` <br/> | <span data-ttu-id="852f8-309">PST ファイルのインポート先メールボックスフォルダーを指定します。</span><span class="sxs-lookup"><span data-stu-id="852f8-309">Specifies the mailbox folder that the PST file is imported to.</span></span>  <br/>  <span data-ttu-id="852f8-310">このパラメーターを空白のままにした場合、PST はメールボックスのルートレベル (受信トレイフォルダーとその他の既定のメールボックスフォルダーと同じレベル) にある**インポート**された新しいフォルダーにインポートされます。</span><span class="sxs-lookup"><span data-stu-id="852f8-310">If you leave this parameter blank, the PST will be imported to a new folder named **Imported** located at the root level of the mailbox (the same level as the Inbox folder and the other default mailbox folders).</span></span>  <br/>  <span data-ttu-id="852f8-311">を指定`/`した場合、PST ファイル内のアイテムは、ユーザーの受信トレイフォルダーに直接インポートされます。</span><span class="sxs-lookup"><span data-stu-id="852f8-311">If you specify  `/`, items in the PST file will be imported directly in to the user's Inbox folder.</span></span>  <br/><br/>  <span data-ttu-id="852f8-p147">を指定`/<foldername>`した場合、PST ファイルのアイテムは、 \* \<foldername\> \*という名前のフォルダーにインポートされます。たとえば、を使用`/ImportedPst`すると、アイテムは**ImportedPst**という名前のフォルダーにインポートされます。このフォルダーは、受信トレイフォルダーと同じレベルにあるユーザーのメールボックスに配置されます。</span><span class="sxs-lookup"><span data-stu-id="852f8-p147">If you specify  `/<foldername>`, items in the PST file will be imported to a folder named  *\<foldername\>*  . For example, if you use  `/ImportedPst`, items would be imported to a folder named **ImportedPst**. This folder will be located in the user's mailbox at the same level as the Inbox folder.  </span></span><br/><br/> <span data-ttu-id="852f8-315">**ヒント:** pst ファイルのインポートに最適なフォルダーの場所を決定できるように、いくつかのテストバッチを実行して、このパラメーターを試してみることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="852f8-315">**Tip:** Consider running a few test batches to experiment with this parameter so you can determine the best folder location to import PSTs files to.</span></span>  <br/> |<span data-ttu-id="852f8-316">(空白)</span><span class="sxs-lookup"><span data-stu-id="852f8-316">(leave blank)</span></span>  <br/> <span data-ttu-id="852f8-317">または</span><span class="sxs-lookup"><span data-stu-id="852f8-317">Or</span></span>  <br/>  `/` <br/> <span data-ttu-id="852f8-318">または</span><span class="sxs-lookup"><span data-stu-id="852f8-318">Or</span></span>  <br/>  `/ImportedPst` <br/> |
    | `ContentCodePage` <br/> |<span data-ttu-id="852f8-p148">このオプションパラメーターは、ANSI ファイル形式で PST ファイルをインポートするために使用するコードページの数値を指定します。このパラメーターは、中国語、日本語、および韓国語 (CJK) の組織から PST ファイルをインポートするために使用されます。これらの言語では、通常、文字エンコードに2バイト文字セット (DBCS) を使用します。メールボックスフォルダー名に DBCS を使用する言語の PST ファイルをインポートするためにこのパラメーターを使用していない場合は、インポート後にフォルダー名が正しくないことがよくあります。</span><span class="sxs-lookup"><span data-stu-id="852f8-p148">This optional parameter specifies a numeric value for the code page to use for importing PST files in the ANSI file format. This parameter is used for importing PST files from Chinese, Japanese, and Korean (CJK) organizations because these languages typically use a double byte character set (DBCS) for character encoding. If this parameter isn't used to import PST files for languages that use DBCS for mailbox folder names, the folder names are often garbled after they're imported.  </span></span><br/><br/> <span data-ttu-id="852f8-322">このパラメーターに使用することがサポートされている値の一覧については、「[コードページ識別子](https://go.microsoft.com/fwlink/p/?LinkId=328514)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="852f8-322">For a list of supported values to use for this parameter, see [Code Page Identifiers](https://go.microsoft.com/fwlink/p/?LinkId=328514).</span></span>  <br/> <br/><span data-ttu-id="852f8-p149">**注:** 前述したように、これはオプションのパラメーターであり、CSV ファイルに含める必要はありません。または、1つまたは複数の行の値を空白のままにしておくこともできます。</span><span class="sxs-lookup"><span data-stu-id="852f8-p149">**Note:** As previously stated, this is an optional parameter and you don't have to include it in the CSV file. Or you can include it and leave the value blank for one or more rows.  </span></span><br/> |<span data-ttu-id="852f8-325">(空白)</span><span class="sxs-lookup"><span data-stu-id="852f8-325">(leave blank)</span></span>  <br/> <span data-ttu-id="852f8-326">または</span><span class="sxs-lookup"><span data-stu-id="852f8-326">Or</span></span>  <br/>  <span data-ttu-id="852f8-327">`932`(ANSI/OEM 日本語のコードページ識別子)</span><span class="sxs-lookup"><span data-stu-id="852f8-327">`932` (which is the code page identifier for ANSI/OEM Japanese)</span></span>  <br/> |
    | `SPFileContainer` <br/> |<span data-ttu-id="852f8-328">PST インポートの場合は、このパラメーターを空白のままにします。 </span><span class="sxs-lookup"><span data-stu-id="852f8-328">For PST Import, leave this parameter blank.</span></span>  <br/> |<span data-ttu-id="852f8-329">該当なし</span><span class="sxs-lookup"><span data-stu-id="852f8-329">Not applicable</span></span>  <br/> |
    | `SPManifestContainer` <br/> |<span data-ttu-id="852f8-330">PST インポートの場合は、このパラメーターを空白のままにします。 </span><span class="sxs-lookup"><span data-stu-id="852f8-330">For PST Import, leave this parameter blank.</span></span>  <br/> |<span data-ttu-id="852f8-331">該当なし</span><span class="sxs-lookup"><span data-stu-id="852f8-331">Not applicable</span></span>  <br/> |
    | `SPSiteUrl` <br/> |<span data-ttu-id="852f8-332">PST インポートの場合は、このパラメーターを空白のままにします。 </span><span class="sxs-lookup"><span data-stu-id="852f8-332">For PST Import, leave this parameter blank.</span></span>  <br/> |<span data-ttu-id="852f8-333">該当なし</span><span class="sxs-lookup"><span data-stu-id="852f8-333">Not applicable</span></span>  <br/> |

## <a name="step-5-create-a-pst-import-job-in-office-365"></a><span data-ttu-id="852f8-334">手順 5:Office 365 で PST インポート ジョブを作成する</span><span class="sxs-lookup"><span data-stu-id="852f8-334">Step 5: Create a PST Import job in Office 365</span></span>

<span data-ttu-id="852f8-p150">次の手順では、Office 365 のインポートサービスで PST インポートジョブを作成します。前述のとおり、手順4で作成した PST インポートマッピングファイルを送信します。新しいジョブを作成すると、Office 365 は pst ファイルのデータを分析し、pst インポートマッピングファイルで指定されたメールボックスに実際にインポートされるデータをフィルター処理する機会を提供します ([手順 6](#step-6-filter-data-and-start-the-pst-import-job)を参照)。</span><span class="sxs-lookup"><span data-stu-id="852f8-p150">The next step is to create the PST Import job in the Import service in Office 365. As previously explained, you will submit the PST Import mapping file that you created in Step 4. After you create the new job, Office 365 analyzes the data in the PST files and then gives you an opportunity to filter the data that actually gets imported to the mailboxes specified in the PST import mapping file (see [Step 6](#step-6-filter-data-and-start-the-pst-import-job)).</span></span>
  
1. <span data-ttu-id="852f8-338">に[https://protection.office.com](https://protection.office.com)移動し、Office 365 組織の管理者アカウントの資格情報を使用してサインインします。</span><span class="sxs-lookup"><span data-stu-id="852f8-338">Go to [https://protection.office.com](https://protection.office.com) and sign in using the credentials for an administrator account in your Office 365 organization.</span></span> 
    
2. <span data-ttu-id="852f8-339">セキュリティ&amp; /コンプライアンスセンターの左側のウィンドウで、[**データガバナンス**] をクリックし、[**インポート**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="852f8-339">In the left pane of the Security &amp; Compliance Center, click **Data governance** and then click **Import**.</span></span>
    
3. <span data-ttu-id="852f8-340">[**インポート**] ページで、 ![[追加](media/ITPro-EAC-AddIcon.gif) ] アイコン [**新しいインポートジョブ**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="852f8-340">On the **Import** page, click ![Add Icon](media/ITPro-EAC-AddIcon.gif) **New import job**.</span></span>
    
    <span data-ttu-id="852f8-p151">**注:** 新しいインポートジョブを作成するには、セキュリティ&amp;コンプライアンスセンターの [**インポート**] ページにアクセスするための適切なアクセス許可が割り当てられている必要があります。詳細については、「**はじめに**」セクションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="852f8-p151">**Note:** You have to be assigned the appropriate permissions to access the **Import** page in the Security &amp; Compliance Center to create a new import job. See the **Before you begin** section for more information.</span></span> 
    
4. <span data-ttu-id="852f8-p152">PST インポートジョブの名前を入力し、[**次へ**] をクリックします。小文字、数字、ハイフン、およびアンダースコアを使用してください。名前には、大文字を使用したり、スペースを含めたりすることはできません。</span><span class="sxs-lookup"><span data-stu-id="852f8-p152">Type a name for the PST import job, and then click **Next**. Use lowercase letters, numbers, hyphens, and underscores. You can't use uppercase letters or include spaces in the name.</span></span>
    
5. <span data-ttu-id="852f8-346">[**データをアップロードまたは出荷しますか?** ] ページで、[**データのアップロード**] をクリックし、[**次へ**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="852f8-346">On the **Do you want to upload or ship data?** page, click **Upload your data** and then click **Next**.</span></span>
    
    ![[データをアップロードしてネットワークアップロードのインポートジョブを作成する] をクリックします。](media/e59f9dc3-ccde-44ff-ac38-c4e39d76ae85.png)
  
6. <span data-ttu-id="852f8-348">[**データのインポート**] ページの手順4で、[ファイルの**アップロードが完了**しました] と [**マッピングファイルにアクセス**できます] チェックボックスをオンにして、[**次へ**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="852f8-348">In step 4 on the **Import data** page, click the **I'm done uploading my files** and **I have access to the mapping file** check boxes, and then click **Next**.</span></span>
    
    ![手順4で2つのチェックボックスをクリックします。](media/9f2427e8-3af2-4e27-95e6-a9f08430d3d8.png)
  
7. <span data-ttu-id="852f8-350">[**マッピングファイルの選択**] ページで、[**マッピングファイルの選択**] をクリックして、手順4で作成した PST インポートマッピングファイルを送信します。</span><span class="sxs-lookup"><span data-stu-id="852f8-350">On the **Select the mapping file** page, click **Select mapping file** to submit the PST Import mapping file that you created in Step 4.</span></span> 
    
    ![[マッピングファイルの選択] をクリックして、インポートジョブ用に作成した CSV ファイルを送信します。](media/d30b1d73-80bb-491e-a642-a21673d06889.png)
  
8. <span data-ttu-id="852f8-352">csv ファイルの名前が [**マッピングファイル名**] の下に表示されたら、[**検証**] をクリックして csv ファイルにエラーがないか確認します。</span><span class="sxs-lookup"><span data-stu-id="852f8-352">After the name of the CSV file appears under **Mapping file name**, click **Validate** to check your CSV file for errors.</span></span> 
    
    ![[検証] をクリックして、CSV ファイルのエラーを確認します。](media/4680999d-5538-4059-b878-2736a5445037.png)
  
    <span data-ttu-id="852f8-p153">PST インポートジョブを作成するには、CSV ファイルが正常に検証されている必要があります。メモファイル名が正常に検証された後に、緑に変更されます。検証が失敗した場合は、[ **View log** ] リンクをクリックします。検証エラーレポートが開き、エラーが発生したファイル内の各行に関するエラーメッセージが表示されます。</span><span class="sxs-lookup"><span data-stu-id="852f8-p153">The CSV file has to be successfully validated to create a PST Import job. Note the file name is changed to green after it's successfully validated. If the validation fails, click the **View log** link. A validation error report is opened, with a error message for each row in the file that failed.</span></span> 
    
9. <span data-ttu-id="852f8-358">PST マッピングファイルが正常に検証された後、使用条件ドキュメントを読み、チェックボックスをオンにします。</span><span class="sxs-lookup"><span data-stu-id="852f8-358">After the PST mapping file is successfully validated, read the terms and conditions document, and then click the checkbox.</span></span>
    
10. <span data-ttu-id="852f8-359">[**保存**] をクリックしてジョブを送信し、ジョブが正常に作成されたら [**閉じる**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="852f8-359">Click **Save** to submit the job, and then click **Close** after the job is successfully created.</span></span> 
    
    <span data-ttu-id="852f8-360">状態のポップアップページが表示され、状態が "**分析中**" で、新しいインポートジョブが [**インポート**] ページの一覧に表示されます。</span><span class="sxs-lookup"><span data-stu-id="852f8-360">A status flyout page is displayed, with a status of **Analysis in progress** and the new import job is displayed in the list on the **Import** page.</span></span> 
    
11. <span data-ttu-id="852f8-p154">[最新の情報](media/O365-MDM-Policy-RefreshIcon.gif)に更新] アイコンをクリックして、[**状態**] 列に表示される状態情報を更新します。 \*\*\*\* ![分析が完了し、データをインポートできる状態になると、状態は [**分析完了**] に変更されます。</span><span class="sxs-lookup"><span data-stu-id="852f8-p154">Click **Refresh** ![Refresh icon](media/O365-MDM-Policy-RefreshIcon.gif) to update the status information that's displayed in the **Status** column. When the analysis is complete and the data is ready to be imported, the status is changed to **Analysis completed**.</span></span>
    
    <span data-ttu-id="852f8-363">インポートジョブをクリックすると、[状態] ポップアップページが表示されます。これには、マッピングファイルに記載されている各 PST ファイルの状態など、インポートジョブに関する詳細情報が表示されます。</span><span class="sxs-lookup"><span data-stu-id="852f8-363">You can click the import job to display the status flyout page, which contains more detailed information about the import job such as the status of each PST file listed in the mapping file.</span></span>
 
## <a name="step-6-filter-data-and-start-the-pst-import-job"></a><span data-ttu-id="852f8-364">手順 6: データをフィルター処理し、PST インポートジョブを開始する</span><span class="sxs-lookup"><span data-stu-id="852f8-364">Step 6: Filter data and start the PST Import job</span></span>

<span data-ttu-id="852f8-p155">手順5でインポートジョブを作成した後、Office 365 は、アイテムの保存期間と pst ファイルに含まれるさまざまなメッセージの種類を識別することによって、pst ファイル (安全で安全な方法) のデータを分析します。分析が完了し、データをインポートする準備ができたら、PST ファイルに含まれるすべてのデータをインポートするか、インポートするデータを制御するフィルターを設定してインポートしたデータをトリミングすることができます。</span><span class="sxs-lookup"><span data-stu-id="852f8-p155">After you create the import job in Step 5, Office 365 analyzes the data in the PST files (in a safe and secure manner) by identifying the age of the items and the different message types included in the PST files. When the analysis is completed and the data is ready to import, you have the option to import all the data contained in the PST files or you can trim the data that's imported by setting filters that control what data gets imported.</span></span>
  
1. <span data-ttu-id="852f8-367">セキュリティ&amp; /コンプライアンスセンターの [**インポート**] ページで、手順5で作成したインポートジョブについて、[ **Office 365 にインポートする準備ができ**ました] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="852f8-367">On the **Import** page in the Security &amp; Compliance Center, click **Ready to import to Office 365** for the import job that you created in Step 5.</span></span> 
    
    ![作成したインポートジョブの横にある [Office 365 にインポートする準備完了] をクリックします。](media/5760aac3-300b-4e31-b894-253c42a4b82b.png)
  
    <span data-ttu-id="852f8-369">フライアウトページには、PST ファイルおよびインポートジョブに関するその他の情報が表示されます。</span><span class="sxs-lookup"><span data-stu-id="852f8-369">A fly out page is displayed with information about the PST files and other information about the import job.</span></span>
    
2. <span data-ttu-id="852f8-370">[フライアウト] ページで、[ **Office 365 へのインポート**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="852f8-370">On the flyout page, click **Import to Office 365**.</span></span>
    
    <span data-ttu-id="852f8-p156">[**データをフィルター**する] ページが表示されます。このファイルには、データの保存期間に関する情報を含む、Office 365 によって PST ファイルに対して実行された分析の結果として得られるデータ insights が含まれています。この時点で、インポートされるデータをフィルター処理するか、すべてのデータをそのものとしてインポートするかを選択できます。</span><span class="sxs-lookup"><span data-stu-id="852f8-p156">The **Filter your data** page is displayed. It contains the data insights resulting from the analysis performed on the PST files by Office 365, including information about the age of the data. At this point, you have the option to filter the data that will be imported or import all the data as is.</span></span> 
    
    ![PST ファイルのデータをトリミングしたり、すべてのデータをインポートしたりできます。](media/287fc030-99e9-417b-ace7-f64617ea5d4e.png)
  
3. <span data-ttu-id="852f8-375">次のいずれかを実行します。</span><span class="sxs-lookup"><span data-stu-id="852f8-375">Do one of the following:</span></span>
    
    <span data-ttu-id="852f8-p157">。インポートするデータをトリミングするには、[**はい、インポートする前にフィルターを適用**します] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="852f8-p157">a. To trim the data that you import, click **Yes, I want to filter it before importing**.</span></span>
    
    <span data-ttu-id="852f8-378">pst ファイルのデータをフィルター処理してからインポートジョブを開始する方法の詳細な手順については、「 [pst ファイルを Office 365 にインポートするときにデータをフィルターする](filter-data-when-importing-pst-files.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="852f8-378">For detailed step-by-step instructions about filtering the data in the PST files and then starting the import job, see [Filter data when importing PST files to Office 365](filter-data-when-importing-pst-files.md).</span></span>
    
    <span data-ttu-id="852f8-379">または</span><span class="sxs-lookup"><span data-stu-id="852f8-379">Or</span></span>
    
    <span data-ttu-id="852f8-p158">b. PST ファイルのすべてのデータをインポートするには、[**いいえ、** すべてをインポートします] をクリックし、[**次へ**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="852f8-p158">b. To import all data in the PST files, click **No, I want to import everything,** and click **Next**.</span></span>
    
4. <span data-ttu-id="852f8-382">すべてのデータをインポートすることを選択した場合は、[**データのインポート**] をクリックしてインポートジョブを開始します。</span><span class="sxs-lookup"><span data-stu-id="852f8-382">If you chose to import all the data, click **Import data** to start the import job.</span></span> 
    
    <span data-ttu-id="852f8-p159">インポートジョブの状態が [**インポート**] ページに表示されます。[ ![更新アイコン](media/O365-MDM-Policy-RefreshIcon.gif) \*\*\*\* の更新] をクリックして、[**状態**] 列に表示される状態情報を更新します。インポートジョブをクリックして状態ポップアップページを表示すると、インポートされている各 PST ファイルに関する状態情報が表示されます。</span><span class="sxs-lookup"><span data-stu-id="852f8-p159">The status of the import job is display on the **Import** page. Click ![Refresh icon](media/O365-MDM-Policy-RefreshIcon.gif) **Refresh** to update the status information that's displayed in the **Status** column. Click the import job to display the status flyout page, which displays status information about each PST file being imported.</span></span> 

## <a name="how-the-import-process-works"></a><span data-ttu-id="852f8-386">インポートプロセスのしくみ</span><span class="sxs-lookup"><span data-stu-id="852f8-386">How the import process works</span></span>
  
<span data-ttu-id="852f8-p160">ネットワークアップロードオプションと Office 365 インポートサービスを使用して、PST ファイルをユーザーのメールボックスに一括インポートすることができます。ネットワークのアップロードとは、PST ファイルを Microsoft クラウドの一時的なストレージ領域としてアップロードすることを意味します。その後、Office 365 インポートサービスは、PST ファイルをストレージ領域からターゲットユーザーのメールボックスにコピーします。</span><span class="sxs-lookup"><span data-stu-id="852f8-p160">You can use the network upload option and the Office 365 Import service to bulk-import PST files to user mailboxes. Network upload means that you upload the PST files a temporary storage area in the Microsoft cloud. Then the Office 365 Import service copies the PST files from the storage area to the target user mailboxes.</span></span>
  
<span data-ttu-id="852f8-390">Office 365 のメールボックスに PST ファイルをインポートするためのネットワークアップロードプロセスの図と説明を以下に示します。</span><span class="sxs-lookup"><span data-stu-id="852f8-390">Here's an illustration and description of the network upload process to import PST files to mailboxes in Office 365.</span></span>
  
![PST ファイルを Office 365 にインポートするためのネットワークアップロードプロセスのワークフロー](media/9e05a19e-1e7a-4f1f-82df-9118f51588c4.png)
  
1. <span data-ttu-id="852f8-p161">**pst インポートツールとキーをプライベート Azure ストレージの場所にダウンロード**する-最初の手順として、azure azcopy コマンドラインツールと、PST ファイルを Microsoft クラウド内の azure ストレージの場所にアップロードするために使用するアクセスキーをダウンロードします。これらは、Office 365 \*\*\*\* セキュリティ&amp;コンプライアンスセンターの [インポート] ページから取得します。キー (secure access signature (SAS) キーと呼ばれる) によって、PST ファイルをプライベートおよび安全な Azure ストレージの場所にアップロードするために必要なアクセス許可が提供されます。このアクセスキーは組織に固有のものであり、Microsoft クラウドにアップロードされた後に PST ファイルへの権限のないアクセスを防止するのに役立てることができます。Office 365 に PST ファイルをインポートする場合は、組織で別の Azure サブスクリプションを使用する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="852f8-p161">**Download the PST import tool and key to private Azure storage location** - The first step is to download the Azure AzCopy command-line tool and an access key used to upload the PST files to an Azure storage location in the Microsoft cloud . You obtain these from the **Import** page in the Office 365 Security &amp; Compliance Center. The key (called a secure access signature (SAS) key, provides you with the necessary permissions to upload PST files to a private and secure Azure storage location. This access key is unique to your organization and helps prevent unauthorized access to your PST files after they're uploaded to the Microsoft cloud. Note that importing PST files to Office 365 doesn't require your organization to have a separate Azure subscription.</span></span> 
    
2. <span data-ttu-id="852f8-p162">**pst ファイルを azure ストレージの場所にアップロード**します。次の手順では、azcopy ツール (手順1でダウンロードしたもの) を使用して、Office 365 の同じ地域の Microsoft データセンターに存在する Azure ストレージの場所に pst ファイルをアップロードして保存します。組織があります。これらをアップロードするには、Office 365 にインポートする PST ファイルが、組織内のファイル共有またはファイルサーバーに配置されている必要があります。</span><span class="sxs-lookup"><span data-stu-id="852f8-p162">**Upload the PST files to the Azure storage location** - The next step is to use the AzCopy.exe tool (downloaded in step 1) to upload and store your PST files in an Azure storage location that resides in the same regional Microsoft datacenter where your Office 365 organization is located. To upload them, the PST files that you want to import to Office 365 have to be located in a file share or file server in your organization.</span></span>
    
    <span data-ttu-id="852f8-399">PST ファイルの一覧を表示するために実行できるオプションの手順は、Azure ストレージの場所にアップロードされています。</span><span class="sxs-lookup"><span data-stu-id="852f8-399">Note that there's an optional step that you can perform to view the list of PST files after they're uploaded to the Azure storage location.</span></span>
    
3. <span data-ttu-id="852f8-p163">**pst インポートのマッピングファイルを作成**する-pst ファイルが Azure ストレージの場所にアップロードされた後、次の手順では、pst ファイルがインポートされるユーザーメールボックスを指定するコンマ区切り値 (CSV) ファイルを作成します。 ユーザーのプライマリメールボックスまたはアーカイブメールボックスにインポートされます。Office 365 インポートサービスは、CSV ファイルの情報を使用して PST ファイルをインポートします。</span><span class="sxs-lookup"><span data-stu-id="852f8-p163">**Create a PST import mapping file** - After the PST files have been uploaded to the Azure storage location, the next step is to create a comma separated value (CSV) file that specifies which user mailboxes the PST files will be imported to, note that a PST file can be imported to a user's primary mailbox or their archive mailbox. The Office 365 Import service will use the information in the CSV file to import the PST files.</span></span>
    
4. <span data-ttu-id="852f8-p164">**pst インポートジョブを作成**する-次の手順では、セキュリティ&amp;コンプライアンスセンターの [**インポート**] ページで pst インポートジョブを作成し、前の手順で作成した pst インポートマッピングファイルを送信します。インポートジョブを作成した後、Office 365 は pst ファイルのデータを分析し、pst インポートマッピングファイルで指定されたメールボックスに実際にインポートするデータを制御するフィルターを設定する機会を提供します。</span><span class="sxs-lookup"><span data-stu-id="852f8-p164">**Create a PST import job** - The next step is to create a PST import job on the **Import** page in the Security &amp; Compliance Center and submit the PST import mapping file created in the previous step. After you create the import job, Office 365 analyzes the data in the PST files and then gives you an opportunity to set filters that control what data actually gets imported to the mailboxes specified in the PST import mapping file.</span></span> 
    
5. <span data-ttu-id="852f8-p165">**メールボックスにインポートする pst データをフィルター処理する**-インポートジョブが作成されて開始されると、Office 365 は pst ファイル内のデータ (安全かつ安全) を分析して、アイテムの保存期間と pst ファイルに含まれるさまざまなメッセージの種類を特定します。.分析が完了し、データをインポートする準備ができたら、PST ファイルに含まれるすべてのデータをインポートするか、インポートするデータを制御するフィルターを設定してインポートしたデータをトリミングすることができます。</span><span class="sxs-lookup"><span data-stu-id="852f8-p165">**Filter the PST data that will be imported to mailboxes** - After the import job is created and started, Office 365 analyzes the data in the PST files (safely and securely) by identifying the age of the items and the different message types included in the PST files. When the analysis is completed and the data is ready to import, you have the option to import all the data contained in the PST files or you can trim the data that's imported by setting filters that control what data gets imported.</span></span>
    
6. <span data-ttu-id="852f8-p166">**pst インポートジョブを開始**する-インポートジョブが開始されると、Office 365 は pst インポートマッピングファイル内の情報を使用して、pst ファイルをユーザーのメールボックスにインポートします。インポートジョブに関する状態情報 (インポートされている各 PST ファイルに関する情報を含む\*\*\*\* ) は、セキュリティ&amp;コンプライアンスセンターの [インポート] ページに表示されます。インポートジョブが完了すると、ジョブの状態が [**完了**] に設定されます。</span><span class="sxs-lookup"><span data-stu-id="852f8-p166">**Start the PST import job** - After the import job is started, Office 365 uses the information in the PST import mapping file to import the PSTs files from the he Azure storage location to user mailboxes. Status information about the import job (including information about each PST file being imported) is displayed on the **Import** page in the Security &amp; Compliance Center. When the import job is finished, the status for the job is set to **Complete**.</span></span>
  
## <a name="more-information"></a><span data-ttu-id="852f8-409">詳細情報</span><span class="sxs-lookup"><span data-stu-id="852f8-409">More information</span></span>

- <span data-ttu-id="852f8-410">PST ファイルを Office 365 にインポートする理由</span><span class="sxs-lookup"><span data-stu-id="852f8-410">Why import PST files to Office 365?</span></span>
    
  - <span data-ttu-id="852f8-411">組織のアーカイブメッセージングデータを Office 365 にインポートすることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="852f8-411">It's a good way to import your organization's archival messaging data to Office 365.</span></span>
    
  - <span data-ttu-id="852f8-412">データがクラウドに格納されるので、ユーザーはあらゆるデバイスからデータを利用できます。</span><span class="sxs-lookup"><span data-stu-id="852f8-412">The data is available to the user from all devices because it's stored in the cloud.</span></span>
    
  - <span data-ttu-id="852f8-p167">Office 365 のコンプライアンス機能を、インポートした PST ファイルのデータに適用することにより、組織のコンプライアンスニーズに対応できます。これには次のものが含まれます。</span><span class="sxs-lookup"><span data-stu-id="852f8-p167">It helps address compliance needs of your organization by letting you apply Office 365 compliance features to the data from the PST files that you imported. This includes:</span></span>
    
  - <span data-ttu-id="852f8-415">[アーカイブメールボックス](enable-archive-mailboxes.md)および[自動拡張アーカイブ](enable-unlimited-archiving.md)を有効にすることで、ユーザーはインポートしたデータを格納するための追加のメールボックスストレージスペースを提供できます。</span><span class="sxs-lookup"><span data-stu-id="852f8-415">Enabling [archive mailboxes](enable-archive-mailboxes.md) and [auto-expanding archiving](enable-unlimited-archiving.md) to give users additional mailbox storage space to store the data that you imported.</span></span> 
    
  - <span data-ttu-id="852f8-416">メールボックスを[訴訟ホールド](https://go.microsoft.com/fwlink/?linkid=856286)の対象にして、インポートしたデータを保持します。</span><span class="sxs-lookup"><span data-stu-id="852f8-416">Placing mailboxes on [Litigation Hold](https://go.microsoft.com/fwlink/?linkid=856286) to retain the data that you imported.</span></span> 
    
  - <span data-ttu-id="852f8-417">Microsoft [eDiscovery ツール](search-for-content.md)を使用して、インポートしたデータを検索します。</span><span class="sxs-lookup"><span data-stu-id="852f8-417">Using Microsoft [eDiscovery tools](search-for-content.md) to search the data that you imported.</span></span> 
    
  - <span data-ttu-id="852f8-418">[Office 365 のアイテム保持ポリシー](retention-policies.md)を使用して、インポートしたデータが保持される期間、および保持期間が経過した後に実行するアクションを制御します。</span><span class="sxs-lookup"><span data-stu-id="852f8-418">Using [Office 365 retention policies](retention-policies.md) to control how long the data that you imported will be retained, and what action to take after the retention period expires.</span></span> 
    
  - <span data-ttu-id="852f8-419">[Office 365 監査ログ](search-the-audit-log-in-security-and-compliance.md)で、インポートしたデータに影響するメールボックス関連イベントを検索します。</span><span class="sxs-lookup"><span data-stu-id="852f8-419">Searching the [Office 365 audit log](search-the-audit-log-in-security-and-compliance.md) for mailbox-related events that affect the data that you imported.</span></span> 
    
  - <span data-ttu-id="852f8-420">コンプライアンスの目的でデータをアーカイブするために、[非アクティブなメールボックス](create-and-manage-inactive-mailboxes.md)にデータをインポートします。</span><span class="sxs-lookup"><span data-stu-id="852f8-420">Importing data to [inactive mailboxes](create-and-manage-inactive-mailboxes.md) to archive data for compliance purposes.</span></span> 
    
  - <span data-ttu-id="852f8-421">[データ損失防止ポリシー](data-loss-prevention-policies.md)を使用して、機密データが組織外に漏洩しないようにします。</span><span class="sxs-lookup"><span data-stu-id="852f8-421">Using [data loss prevention policies](data-loss-prevention-policies.md) to prevent sensitive data from leaking outside your organization.</span></span> 
  
- <span data-ttu-id="852f8-p168">手順1で取得した Shared Access Signature (SAS) URL の例を次に示します。この例には、azcopy で実行して PST ファイルを Office 365 にアップロードするコマンドの構文も含まれています。パスワードやその他のセキュリティ関連の情報を保護するのと同じように、SAS URL を保護するための予防措置を講じるようにしてください。</span><span class="sxs-lookup"><span data-stu-id="852f8-p168">Here's an example of the Shared Access Signature (SAS) URL that's obtained in Step 1. This example also contains the syntax for the command that you run in the AzCopy.exe tool to upload PST files to Office 365. Be sure to take precautions to protect the SAS URL just like you would protect passwords or other security-related information.</span></span>

    ```
    SAS URL: https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D

    AzCopy.exe /Source:<Location of PST files> /Dest:<SAS URL> /V:<Log file location> /Y

    EXAMPLES

    This example uploads PST files to the root of the Azure storage location:

    AzCopy.exe /Source:"\\FILESERVER1\PSTs" /Dest:"https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D" /V:"c:\Users\Admin\Desktop\AzCopy1.log" /Y
    
    This example uploads PST files to a subfolder named PSTFiles  in the Azure storage location:

    AzCopy.exe /Source:"\\FILESERVER1\PSTs" /Dest:"https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata/PSTFiles?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D" /V:"c:\Users\Admin\Desktop\AzCopy1.log" /Y
``

- As previously explained, the Office 365 Import service turns on the retention hold setting (for an indefinite duration) after PST files are imported to a mailbox. This means the  *RetentionHoldEnabled*  property is set to  **True** so that the retention policy assigned to the mailbox won't be processed. This gives the mailbox owner time to manage the newly-imported messages by preventing a deletion or archive policy from deleting or archiving older messages. Here are some steps you can take to manage this retention hold: 
    
    - After a certain period of time, you can turn off the retention hold by running the **Set-Mailbox -RetentionHoldEnabled $false** command. For instructions, see [Place a mailbox on retention hold](https://go.microsoft.com/fwlink/p/?LinkId=544749).
    
   - You can configure the retention hold so that it's turned off on some date in the future. You do this by running the **Set-Mailbox -EndDateForRetentionHold *date*** command. For example, assuming that today's date is July 1, 2016 and you want the retention hold turned off in 30 days, you would run the following command:  **Set-Mailbox -EndDateForRetentionHold 8/1/2016**. In this scenario, you would leave the  **RetentionHoldEnabled**  property set to  *True*. For more information, see [Set-Mailbox](https://go.microsoft.com/fwlink/p/?LinkId=150317).
    
   - You can change the settings for the retention policy that's assigned to the mailbox so that older items that were imported won't be immediately deleted or moved to the user's archive mailbox. For example, you could lengthen the retention age for a deletion or archive policy that's assigned to the mailbox. In this scenario, you would turn off the retention hold on the mailbox after you changed the settings of the retention policy. For more information, see [Set up an archive and deletion policy for mailboxes in your Office 365 organization](set-up-an-archive-and-deletion-policy-for-mailboxes.md).
    
