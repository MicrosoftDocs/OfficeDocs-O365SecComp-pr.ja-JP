---
title: Office 365 Exchange Online データの削除
ms.author: robmazz
author: robmazz
manager: laurawi
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
description: Exchange Online でのソフトおよびハードデータの削除の処理方法。
ms.openlocfilehash: 5886d4ab2ffee69f3db8659b7bc642ccad2afa90
ms.sourcegitcommit: f0d23e57b00f07cef5b1b2d366eaeeeacda37e3e
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/18/2019
ms.locfileid: "35786662"
---
# <a name="exchange-online-data-deletion-in-office-365"></a><span data-ttu-id="da91d-103">Office 365 での Exchange Online データの削除</span><span class="sxs-lookup"><span data-stu-id="da91d-103">Exchange Online Data Deletion in Office 365</span></span>
<span data-ttu-id="da91d-104">Exchange Online では、次の2種類の削除があります。ソフト削除とハード削除です。</span><span class="sxs-lookup"><span data-stu-id="da91d-104">Within Exchange Online, there are two kinds of deletions: soft deletions and hard deletions.</span></span> <span data-ttu-id="da91d-105">これは、メールボックス内のメールボックスとアイテムの両方に適用されます。</span><span class="sxs-lookup"><span data-stu-id="da91d-105">This applies to both mailboxes and items within a mailbox.</span></span>

## <a name="soft-deleted-and-hard-deleted-mailboxes"></a><span data-ttu-id="da91d-106">回復可能な削除と削除によって削除されたメールボックス</span><span class="sxs-lookup"><span data-stu-id="da91d-106">Soft-Deleted and Hard-Deleted Mailboxes</span></span>
<span data-ttu-id="da91d-107">回復可能な削除によって削除されたユーザーメールボックスは、Microsoft 365 管理センターまたはメールボックス削除コマンドレットを使用して削除されたメールボックスであり、まだ Azure Active Directory のごみ箱に含まれていた場合、30日未満です。</span><span class="sxs-lookup"><span data-stu-id="da91d-107">A soft-deleted user mailbox is a mailbox that has been deleted using the Microsoft 365 admin center or the Remove-Mailbox cmdlet and has still been in the Azure Active Directory recycle bin for less than 30 days.</span></span> <span data-ttu-id="da91d-108">メールボックスは、次のいずれかの方法で回復可能な削除になることがあります。</span><span class="sxs-lookup"><span data-stu-id="da91d-108">A mailbox can become soft-deleted in any of the following ways:</span></span>
- <span data-ttu-id="da91d-109">ユーザーメールボックスの関連付けられた Azure Active Directory ユーザーアカウントが、回復可能な削除によって削除されている (ユーザーオブジェクトがスコープ外またはごみ箱のコンテナー内にある)。</span><span class="sxs-lookup"><span data-stu-id="da91d-109">The user mailbox's associated Azure Active Directory user account is soft-deleted (the user object is out of scope or in the recycle bin container).</span></span>
- <span data-ttu-id="da91d-110">ユーザーメールボックスの関連付けられた Azure Active Directory ユーザーアカウントは物理的に削除されていますが、Exchange Online メールボックスは訴訟ホールドまたは電子情報開示ホールドの対象になっています。</span><span class="sxs-lookup"><span data-stu-id="da91d-110">The user mailbox's associated Azure Active Directory user account has been hard-deleted but the Exchange Online mailbox is under a litigation hold or eDiscovery hold.</span></span>
- <span data-ttu-id="da91d-111">ユーザーメールボックスに関連付けられている Azure Active Directory ユーザーアカウントが過去30日以内に削除されています。Exchange Online では、保持期間の最大値は、完全に削除されて回復不能になる前に、メールボックスが回復可能な状態で保持されるようになります。</span><span class="sxs-lookup"><span data-stu-id="da91d-111">The user mailbox's associated Azure Active Directory user account has been purged within the last 30 days; which is the maximum retention length Exchange Online will keep the mailbox in a soft-deleted state before it is permanently purged and unrecoverable.</span></span>

<span data-ttu-id="da91d-112">ハード削除されたユーザーメールボックスは、次のいずれかの方法で削除されたメールボックスです。</span><span class="sxs-lookup"><span data-stu-id="da91d-112">A hard-deleted user mailbox is a mailbox that has been deleted in one of the following ways:</span></span>
- <span data-ttu-id="da91d-113">ユーザーメールボックスが30日以上回復可能な削除によって削除されており、関連付けられた Azure Active Directory ユーザーが物理的に削除されている。</span><span class="sxs-lookup"><span data-stu-id="da91d-113">The user mailbox has been soft-deleted for more than 30 days, and the associated Azure Active Directory user has been hard-deleted.</span></span> <span data-ttu-id="da91d-114">メール、連絡先、ファイルなど、すべてのメールボックスの内容は完全に削除されます。</span><span class="sxs-lookup"><span data-stu-id="da91d-114">All mailbox content such as emails, contacts and files are permanently deleted.</span></span>
- <span data-ttu-id="da91d-115">ユーザーメールボックスに関連付けられているユーザーアカウントが、Azure Active Directory から物理的に削除されています。</span><span class="sxs-lookup"><span data-stu-id="da91d-115">The user account associated with the user mailbox has been hard-deleted from the Azure Active Directory.</span></span> <span data-ttu-id="da91d-116">これで、ユーザーメールボックスは Exchange Online でソフト削除され、回復可能な削除の状態は30日間保持されます。</span><span class="sxs-lookup"><span data-stu-id="da91d-116">The user mailbox is now soft-deleted in Exchange Online and stays in a soft-deleted state for 30 days.</span></span> <span data-ttu-id="da91d-117">30日の期間内に、新しい Azure Active Directory ユーザーが同じ**exchangeguid**または**アーカイブ guid**を持つ元の受信者アカウントから同期されている場合、その新しいアカウントに Exchange Online のライセンスが付与されます。これにより、元のユーザーのメールボックス。</span><span class="sxs-lookup"><span data-stu-id="da91d-117">If in the 30-day period a new Azure Active Directory user is synchronized from the original recipient account with the same **ExchangeGuid** or **ArchiveGuid**, and that new account is licensed for Exchange Online, this will result in a hard deletion of the original user mailbox.</span></span> <span data-ttu-id="da91d-118">メール、連絡先、ファイルなど、すべてのメールボックスの内容は完全に削除されます。</span><span class="sxs-lookup"><span data-stu-id="da91d-118">All mailbox content such as emails, contacts and files are permanently deleted.</span></span>
- <span data-ttu-id="da91d-119">回復可能な削除によって削除されたメールボックスは、 **PermanentlyDelete**を使用して削除されます。</span><span class="sxs-lookup"><span data-stu-id="da91d-119">A soft-deleted mailbox is deleted using **Remove-Mailbox -PermanentlyDelete**.</span></span>

<span data-ttu-id="da91d-120">上記の削除シナリオでは、訴訟ホールドや電子情報開示の保留など、ユーザーのメールボックスが保留状態になっていないことを前提としています。</span><span class="sxs-lookup"><span data-stu-id="da91d-120">The above deletion scenarios assume that the user mailbox isn't in any of the hold states, like Litigation hold or eDiscovery hold.</span></span> <span data-ttu-id="da91d-121">メールボックスに何らかの種類の保留がある場合は、そのメールボックスを削除することはできません。</span><span class="sxs-lookup"><span data-stu-id="da91d-121">If there is any type of hold on the mailbox, then the mailbox can't be deleted.</span></span> <span data-ttu-id="da91d-122">すべてのメールユーザーの受信者の種類について、[保留](https://support.office.com/article/manage-legal-investigations-in-office-365-2e5fbe9f-ee4d-4178-8ff8-4356bc1b168e?ui=en-US&rs=en-US&ad=US)設定は無視され、ハード削除または回復的な削除には影響しません。</span><span class="sxs-lookup"><span data-stu-id="da91d-122">For all mail-user recipient types, any [Hold](https://support.office.com/article/manage-legal-investigations-in-office-365-2e5fbe9f-ee4d-4178-8ff8-4356bc1b168e?ui=en-US&rs=en-US&ad=US) settings are ignored and have no effect on hard-deletions or soft-deletions.</span></span>

## <a name="soft-deleted-and-hard-deleted-items"></a><span data-ttu-id="da91d-123">回復可能な削除と削除によって削除されたアイテム</span><span class="sxs-lookup"><span data-stu-id="da91d-123">Soft-Deleted and Hard-Deleted Items</span></span>
<span data-ttu-id="da91d-124">ユーザーがメールボックスアイテム (電子メールメッセージ、連絡先、予定表、タスクなど) を削除すると、アイテムは [回復可能なアイテム] フォルダーに移動され、"削除" という名前のサブフォルダーに移動されます。</span><span class="sxs-lookup"><span data-stu-id="da91d-124">When a user deletes a mailbox item (such as an email message, a contact, a calendar appointment, or a task), the item is moved to the Recoverable Items folder, and into a subfolder named "Deletions".</span></span> <span data-ttu-id="da91d-125">これは、ソフト削除と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="da91d-125">This is referred to as a soft deletion.</span></span> <span data-ttu-id="da91d-126">削除したアイテムが [削除] フォルダーに保持される期間は、メールボックスに設定された 削除済アイテムの保持期間によって決まります。</span><span class="sxs-lookup"><span data-stu-id="da91d-126">How long deleted items are kept in the Deletions folder depends on the deleted item retention period that is set for the mailbox.</span></span> <span data-ttu-id="da91d-127">Exchange Online メールボックスは、既定では、削除済みアイテムを14日間保持しますが、Exchange Online 管理者はこの設定を変更して、期間を最大で30日まで延長することができます。</span><span class="sxs-lookup"><span data-stu-id="da91d-127">An Exchange Online mailbox keeps deleted items for 14 days by default, but Exchange Online administrators can change this setting to increase the period up to a maximum of 30 days.</span></span> <span data-ttu-id="da91d-128">(Exchange Online メールボックスの削除済みアイテムの保存期間を延長する詳細な手順については、「 [Exchange online メールボックスの完全に削除されたアイテムを保持](https://docs.microsoft.com/exchange/recipients-in-exchange-online/manage-user-mailboxes/change-deleted-item-retention)する期間を変更する」を参照してください)。削除されたアイテムの保存期間が切れる前に、削除されたアイテムを回復、または削除することができます。</span><span class="sxs-lookup"><span data-stu-id="da91d-128">(For detailed steps to increase the deleted item retention period for an Exchange Online mailbox, see [Change how long permanently deleted items are kept for an Exchange Online mailbox](https://docs.microsoft.com/exchange/recipients-in-exchange-online/manage-user-mailboxes/change-deleted-item-retention).) Users can recover, or purge, deleted items before the retention time for a deleted item expires.</span></span> <span data-ttu-id="da91d-129">そのためには、Microsoft Outlook または web 上の Outlook の削除済みアイテムの回復機能を使用します。</span><span class="sxs-lookup"><span data-stu-id="da91d-129">To do so, they use the Recover Deleted Items feature in Microsoft Outlook or Outlook on the web.</span></span>

<span data-ttu-id="da91d-130">ユーザーが Outlook または web 上の Outlook の削除済みアイテムの回復機能を使用して削除済みアイテムを削除した場合、そのアイテムはハード削除と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="da91d-130">If a user purges a deleted item by using the Recover Deleted Items feature in Outlook or Outlook on the web, this is known as a hard deletion.</span></span> <span data-ttu-id="da91d-131">Exchange Online では、新しいメールボックスが作成されると、既定では単一アイテムの回復が有効になっているため、管理者は削除済みアイテムの保存期間の期限が切れる前に、削除済みのアイテムを[回復](https://docs.microsoft.com/Exchange/recipients/user-mailboxes/recover-deleted-messages)することができます。</span><span class="sxs-lookup"><span data-stu-id="da91d-131">In Exchange Online, single item recovery is enabled by default when a new mailbox is created, so an administrator can still [recover](https://docs.microsoft.com/Exchange/recipients/user-mailboxes/recover-deleted-messages) hard-deleted items before the deleted item retention period expires.</span></span> <span data-ttu-id="da91d-132">また、単一アイテムの回復が有効になっていれば、ユーザーまたはプロセスによってメッセージが変更されたときに、元のアイテムのコピーの保存も行われます。</span><span class="sxs-lookup"><span data-stu-id="da91d-132">Also, if a message is changed by a user or a process, copies of the original item are also retained when single item recovery is enabled.</span></span>

## <a name="page-zeroing"></a><span data-ttu-id="da91d-133">ページ完全消去</span><span class="sxs-lookup"><span data-stu-id="da91d-133">Page Zeroing</span></span>
<span data-ttu-id="da91d-134">\*\* ゼロ化は、削除されたデータが回復しにくくなるように、ゼロまたはバイナリパターンを削除されたデータに書き込むセキュリティメカニズムです。</span><span class="sxs-lookup"><span data-stu-id="da91d-134">*Zeroing* is a security mechanism that writes either zeros or a binary pattern over deleted data so that the deleted data is more difficult to recover.</span></span> <span data-ttu-id="da91d-135">Exchange Online では、メールボックスデータベースはストレージの単位として*ページ*を使用し、*ページ解放*と呼ばれる上書きプロセスを実装します。</span><span class="sxs-lookup"><span data-stu-id="da91d-135">In Exchange Online, mailbox databases use *pages* as their unit of storage, and implement an overwriting process called *page zeroing*.</span></span> <span data-ttu-id="da91d-136">ページの解放は既定で有効になっており、ユーザーまたは Microsoft によって無効にすることはできません。</span><span class="sxs-lookup"><span data-stu-id="da91d-136">Page zeroing is enabled by default, and it cannot be disabled by customers or by Microsoft.</span></span> <span data-ttu-id="da91d-137">ページ解放操作は、指定したデータベースのすべてのコピーが同様の方法でページ指定されるように、トランザクションログファイルに記録されます。</span><span class="sxs-lookup"><span data-stu-id="da91d-137">Page zeroing operations are recorded in the transaction log files so that all copies of a given database are page-zeroed in a similar manner.</span></span> <span data-ttu-id="da91d-138">アクティブなデータベースコピーでページを解放すると、ページはデータベースのパッシブコピーでゼロになります。</span><span class="sxs-lookup"><span data-stu-id="da91d-138">Zeroing a page on an active database copy causes the page to get zeroed on passive copies of the database.</span></span>

<span data-ttu-id="da91d-139">ページの解放は、ハード削除されたレコードよりもバイナリパターンを書き込みます。</span><span class="sxs-lookup"><span data-stu-id="da91d-139">Page zeroing writes a binary pattern over hard-deleted records.</span></span> <span data-ttu-id="da91d-140">ページ解放パターンは、拡張記憶域エンジン (ESE) 操作 (Exchange Online のサーバーで使用される内部データベースエンジンの名前) に固有であり、実行時操作とバックグラウンドデータベース保守操作では異なります。</span><span class="sxs-lookup"><span data-stu-id="da91d-140">The page-zeroing pattern is specific to Extensible Storage Engine (ESE) operations (the name of the internal database engine used by servers in Exchange Online), and it is different for run-time operations versus background database maintenance operations.</span></span> <span data-ttu-id="da91d-141">(バックグラウンドデータベース保守は、各データベースを継続的にチェックし、スキャンするプロセスです。</span><span class="sxs-lookup"><span data-stu-id="da91d-141">(Background database maintenance is a process that continuously checksums and scans each database.</span></span> <span data-ttu-id="da91d-142">その主な機能はデータベースページのチェックサムになりますが、ストアのクラッシュが原因で、消去されていないレコードやページはクリアされます。</span><span class="sxs-lookup"><span data-stu-id="da91d-142">Its primary function is to checksum database pages, but it also handles cleaning up space and zeroing out records and pages that were not zeroed out because of a Store crash.)</span></span>

<span data-ttu-id="da91d-143">次の表に、特定の実行時操作に対応したパターンを一覧表示します。</span><span class="sxs-lookup"><span data-stu-id="da91d-143">The following table lists the fill patterns that correspond to specific run-time operations.</span></span>

| <span data-ttu-id="da91d-144">ESE 実行時操作</span><span class="sxs-lookup"><span data-stu-id="da91d-144">ESE run-time operation</span></span>   | <span data-ttu-id="da91d-145">パターン</span><span class="sxs-lookup"><span data-stu-id="da91d-145">Fill pattern</span></span> |
|--------------------------|--------------|
| <span data-ttu-id="da91d-146">置換</span><span class="sxs-lookup"><span data-stu-id="da91d-146">Replace</span></span>                  | <span data-ttu-id="da91d-147">R</span><span class="sxs-lookup"><span data-stu-id="da91d-147">R</span></span>            |
| <span data-ttu-id="da91d-148">レコード/長い値の削除</span><span class="sxs-lookup"><span data-stu-id="da91d-148">Record/long value delete</span></span> | <span data-ttu-id="da91d-149">D</span><span class="sxs-lookup"><span data-stu-id="da91d-149">D</span></span>            |
| <span data-ttu-id="da91d-150">解放されたページ領域</span><span class="sxs-lookup"><span data-stu-id="da91d-150">Freed page space</span></span>         | <span data-ttu-id="da91d-151">H</span><span class="sxs-lookup"><span data-stu-id="da91d-151">H</span></span>            |


<span data-ttu-id="da91d-152">次の表は、ESE バックグラウンド データベース保守で実行される特定の操作に対応したパターンの一覧です。</span><span class="sxs-lookup"><span data-stu-id="da91d-152">The following table lists the fill patterns that correspond to specific operations that occur during ESE background database maintenance.</span></span>

| <span data-ttu-id="da91d-153">ESE バックグラウンド データベース保守操作</span><span class="sxs-lookup"><span data-stu-id="da91d-153">ESE background database maintenance operation</span></span> | <span data-ttu-id="da91d-154">パターン</span><span class="sxs-lookup"><span data-stu-id="da91d-154">Fill pattern</span></span> |
|-----------------------------------------------|--------------|
| <span data-ttu-id="da91d-155">レコードの削除</span><span class="sxs-lookup"><span data-stu-id="da91d-155">Record delete</span></span>                                 | <span data-ttu-id="da91d-156">D</span><span class="sxs-lookup"><span data-stu-id="da91d-156">D</span></span>            |
| <span data-ttu-id="da91d-157">長い値の削除</span><span class="sxs-lookup"><span data-stu-id="da91d-157">Long value delete</span></span>                             | <span data-ttu-id="da91d-158">L</span><span class="sxs-lookup"><span data-stu-id="da91d-158">L</span></span>            |
| <span data-ttu-id="da91d-159">部分的に使用されたページの解放されたページ領域</span><span class="sxs-lookup"><span data-stu-id="da91d-159">Freed page space of partially used page</span></span>       | <span data-ttu-id="da91d-160">Z</span><span class="sxs-lookup"><span data-stu-id="da91d-160">Z</span></span>            |
| <span data-ttu-id="da91d-161">未使用ページの解放されたページ領域</span><span class="sxs-lookup"><span data-stu-id="da91d-161">Freed page space of unused page</span></span>               | <span data-ttu-id="da91d-162">U</span><span class="sxs-lookup"><span data-stu-id="da91d-162">U</span></span>            |


### <a name="page-zeroing-process"></a><span data-ttu-id="da91d-163">ページ解放プロセス</span><span class="sxs-lookup"><span data-stu-id="da91d-163">Page Zeroing Process</span></span>
<span data-ttu-id="da91d-164">ページの解放のプロセスは、削除のシナリオによって異なります。</span><span class="sxs-lookup"><span data-stu-id="da91d-164">The process for page zeroing depends on the deletion scenario.</span></span> <span data-ttu-id="da91d-165">次の表に、データベースの削除のシナリオ、およびページ解放機能が実行される時点について説明します。</span><span class="sxs-lookup"><span data-stu-id="da91d-165">The following table discusses database delete scenarios, and when page zeroing functions occur.</span></span>

| <span data-ttu-id="da91d-166">データベースの削除のシナリオ</span><span class="sxs-lookup"><span data-stu-id="da91d-166">Database delete scenario</span></span> | <span data-ttu-id="da91d-167">データベース データを解放するための ESE プロセスと期間</span><span class="sxs-lookup"><span data-stu-id="da91d-167">ESE process and timeframe to zero database data</span></span> |
|-----------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="da91d-168">アイテムの有効期限は、削除済みアイテムの保存期間に基づいています。</span><span class="sxs-lookup"><span data-stu-id="da91d-168">Item expires based on the deleted item retention period.</span></span> | <span data-ttu-id="da91d-169">非同期のスレッドは、バイナリ パターンを削除されたデータに上書きします。</span><span class="sxs-lookup"><span data-stu-id="da91d-169">An asynchronous thread writes a binary pattern over the deleted data.</span></span> <span data-ttu-id="da91d-170">この操作はレコード削除の数ミリ秒以内に実行されます。</span><span class="sxs-lookup"><span data-stu-id="da91d-170">This action occurs within milliseconds of the record deletion.</span></span> <span data-ttu-id="da91d-171">非同期の解放作業がまだ完了している間にストアプロセスがクラッシュした場合 (またはバージョンストアの拡張によってバージョンストアのクリーンアップが取り消された場合)、バックグラウンドデータベース保守がデータベースのそのセクションを処理するときに、解放が完了します。</span><span class="sxs-lookup"><span data-stu-id="da91d-171">If the Store process crashes while the asynchronous zeroing work is still outstanding (or version store cleanup is canceled due to version store growth), the zeroing is completed when background database maintenance processes that section of the database.</span></span> |
| <span data-ttu-id="da91d-172">シナリオを表示する: Outlook/Outlook on the web フォルダービューでのアイテムの有効期限 (会話ビューなど)</span><span class="sxs-lookup"><span data-stu-id="da91d-172">View Scenario: Expiration of items from Outlook/Outlook on the web folder view (for example, Conversation view)</span></span> | <span data-ttu-id="da91d-173">バックグラウンド データベース保守でデータベースのこのセクションが処理されたときに、データ解放が実行されます。</span><span class="sxs-lookup"><span data-stu-id="da91d-173">Data zeroing occurs when background database maintenance processes that section of the database.</span></span> |
| <span data-ttu-id="da91d-174">メールボックスの移動/メールボックスの削除のシナリオ: ソースメールボックスの削除 (削除されたメールボックスの有効期限)</span><span class="sxs-lookup"><span data-stu-id="da91d-174">Move Mailbox/Delete Mailbox Scenario: Source mailbox deleted (expiry of deleted mailbox)</span></span> | <span data-ttu-id="da91d-175">バックグラウンド データベース保守でデータベースのこのセクションが処理されたときに、データ解放が実行されます。</span><span class="sxs-lookup"><span data-stu-id="da91d-175">Data zeroing occurs when background database maintenance processes that section of the database.</span></span> |

### <a name="mailbox-data-types-without-page-zeroing"></a><span data-ttu-id="da91d-176">ページ解放を使用しないメールボックス データの種類</span><span class="sxs-lookup"><span data-stu-id="da91d-176">Mailbox Data Types without Page Zeroing</span></span>
<span data-ttu-id="da91d-177">次のメールボックスのデータ型には、ページの解放に関する規定はありません。</span><span class="sxs-lookup"><span data-stu-id="da91d-177">The following mailbox data types have no provisions for page zeroing:</span></span>
- <span data-ttu-id="da91d-178">**メールボックスデータベーストランザクションログ**-通常の操作の一部としてトランザクションログが削除された場合、削除されたログファイルを保存したファイルシステムのブロックをゼロにするプロセスはありません。</span><span class="sxs-lookup"><span data-stu-id="da91d-178">**Mailbox database transaction logs** - When transaction logs are deleted as part of normal operations, there is no process to zero the blocks in the file system that stored the deleted log file(s).</span></span> <span data-ttu-id="da91d-179">ファイルシステムによって、新しく作成されたログ用にその空き領域がすぐに再利用される可能性がありますが、これが行われる保証はありません。</span><span class="sxs-lookup"><span data-stu-id="da91d-179">It's likely that the file system will quickly re-utilize that free space for newly created logs, but there is no guarantee that this will happen.</span></span>
- <span data-ttu-id="da91d-180">**コンテンツインデックスカタログファイル**-Exchange Online は検索インデックス機能に search Foundation (または高速) を使用します。</span><span class="sxs-lookup"><span data-stu-id="da91d-180">**Content index catalog files** - Exchange Online uses Search Foundation (also known as FAST) for search indexing functionality.</span></span> <span data-ttu-id="da91d-181">検索インデックスカタログは、メールボックスデータベースファイルと同じボリュームに格納されている数十のファイルで構成されています。</span><span class="sxs-lookup"><span data-stu-id="da91d-181">The search index catalog is composed of several dozen files stored on the same volume as the mailbox database file.</span></span> <span data-ttu-id="da91d-182">メッセージがメールボックス データベースから物理的に削除されても、検索カタログ内の関連付けられているコンテンツはすぐには削除されません。</span><span class="sxs-lookup"><span data-stu-id="da91d-182">When a message is hard-deleted from the mailbox database, the associated content in the search catalog isn't immediately deleted.</span></span> <span data-ttu-id="da91d-183">コンテンツ削除が行われるのは、Search Foundation が多数の小さなカタログファイルを単一の大きなファイルにシャドウ (またはマスタマージ) した場合です。</span><span class="sxs-lookup"><span data-stu-id="da91d-183">Content deletion occurs when Search Foundation does a shadow (or master merge) of many small catalog files in to a single larger file.</span></span> <span data-ttu-id="da91d-184">マスター結合が完了すると、小さいカタログ ファイルが削除されます。</span><span class="sxs-lookup"><span data-stu-id="da91d-184">After the master merge completes, the smaller catalog files are deleted.</span></span> <span data-ttu-id="da91d-185">削除されたカタログ ファイルを保存しているブロックを解放するプロセスはありません。</span><span class="sxs-lookup"><span data-stu-id="da91d-185">There is no process to zero the blocks which stored the deleted catalog files.</span></span>

## <a name="continuous-replication"></a><span data-ttu-id="da91d-186">連続レプリケーション</span><span class="sxs-lookup"><span data-stu-id="da91d-186">Continuous Replication</span></span>
<span data-ttu-id="da91d-187">連続レプリケーション (ログ配布と再生とも呼ばれます) は、Exchange Online のテクノロジで、高可用性、サイトの復元、および障害復旧を提供するために、すべてのメールボックスデータベースのコピーを作成および保持します。</span><span class="sxs-lookup"><span data-stu-id="da91d-187">Continuous replication (also known as log shipping and replay) is technology in Exchange Online that creates and maintains copies of every mailbox database to provide high availability, site resilience, and disaster recovery.</span></span> <span data-ttu-id="da91d-188">連続レプリケーションは、Exchange Server データベースのクラッシュ回復サポートを活用して、メールボックスデータベースの1つ以上のコピーの非同期更新を実行するテクノロジを提供します。</span><span class="sxs-lookup"><span data-stu-id="da91d-188">Continuous replication leverages the Exchange Server database crash recovery support to provide technology that performs asynchronous updating of one or more copies of a mailbox database.</span></span> <span data-ttu-id="da91d-189">各メールボックスサーバーは、アクティブデータベース (たとえば、ユーザーの電子メールアクティビティ) に対して行われたデータベースの更新を、1 MB のトランザクションログファイルのシーケンシャルセットのログレコードとして記録します。</span><span class="sxs-lookup"><span data-stu-id="da91d-189">Each mailbox server records database updates made on an active database (for example, user email activity) as log records in a sequential set of 1 MB transaction log files.</span></span> <span data-ttu-id="da91d-190">この一連のファイルは、ログストリームと呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="da91d-190">This set of files is referred to as the log stream.</span></span> <span data-ttu-id="da91d-191">連続レプリケーションでは、ログストリームを使用して、データベースの1つ以上のコピーを非同期的に更新することもできます。</span><span class="sxs-lookup"><span data-stu-id="da91d-191">In continuous replication, the log stream is also used to asynchronously update one or more copies of a database.</span></span> <span data-ttu-id="da91d-192">これは、アクティブデータベースのパッシブコピーを含む場所にログを転送し、パッシブデータベースコピーにログを再生することによって実現されます。</span><span class="sxs-lookup"><span data-stu-id="da91d-192">This is accomplished by transmitting the logs to a location containing a passive copy of the active database and then replaying them into the passive database copy.</span></span> <span data-ttu-id="da91d-193">アクティブデータベースのすべてのログがデータベースのパッシブコピーに対して再生されている場合は、2つのデータベースが同等であるため、このプロセスを通じて、アクティブデータベースに加えられた物理的な変更が、そのデータベースのすべてのパッシブコピーにレプリケートされます。</span><span class="sxs-lookup"><span data-stu-id="da91d-193">If all logs from the active database are replayed against a passive copy of the database, then the two databases are equivalent, and it is through this process that any physical change made to an active database is replicated to all passive copies of that database.</span></span>

<span data-ttu-id="da91d-194">メールボックスのアイテムまたはメールボックス全体であるかどうかにかかわらず、メールボックスデータベースから削除されているかどうか、および削除またはハード削除のどちらであるかは、アクティブデータベースに対する物理的な変更を表します。</span><span class="sxs-lookup"><span data-stu-id="da91d-194">Any deletion from a mailbox database, whether a mailbox item or an entire mailbox, and whether a soft-delete or a hard-delete, represents a physical change to the active database.</span></span> <span data-ttu-id="da91d-195">ページの解放により、アクティブなデータベースが物理的に変更されることもあります。</span><span class="sxs-lookup"><span data-stu-id="da91d-195">Page zeroing also entails making physical changes to the active database.</span></span> <span data-ttu-id="da91d-196">これらの変更は連続レプリケーションと呼ばれるプロセスによってログファイルに書き込まれ、それらのログファイルがデータベースのパッシブコピーに対して再生されると、それらのパッシブデータベースに対して同じ物理的な変更が行われます。</span><span class="sxs-lookup"><span data-stu-id="da91d-196">These changes are written to the log files through a process called continuous replication, and when those log files are replayed against passive copies of the database, the same physical changes are made to those passive databases.</span></span>