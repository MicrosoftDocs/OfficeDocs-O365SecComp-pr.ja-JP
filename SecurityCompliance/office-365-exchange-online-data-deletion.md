---
title: Office 365 の Exchange のオンライン ・ データの削除
ms.author: robmazz
author: robmazz
manager: laurawi
ms.date: 8/21/2018
audience: ITPro
ms.topic: article
ms.service: Office 365 Administration
localization_priority: None
search.appverid:
- MET150
ms.collection: Strat_O365_Enterprise
description: どのソフトとハード データの削除は、Exchange Online 内で処理されます。
ms.openlocfilehash: 3a17b09e9c21ae309e00bcb0ddc0b51b93478bc1
ms.sourcegitcommit: 36c5466056cdef6ad2a8d9372f2bc009a30892bb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/27/2018
ms.locfileid: "22532000"
---
# <a name="exchange-online-data-deletion-in-office-365"></a>Office 365 で Exchange のオンライン ・ データの削除
Exchange Online では、内では、削除の 2 つの種類: ソフト削除し、ハード削除します。これは、メールボックスとメールボックス内の項目の両方に適用されます。

## <a name="soft-deleted-and-hard-deleted-mailboxes"></a>ソフト削除し、ハード削除されたメールボックス
ソフト削除されたユーザーのメールボックスは、メールボックスを Office 365 の管理者センターまたは削除、メールボックスのコマンドレットを使用して削除されており、まだされて Azure Active Directory のごみ箱で 30 日以内です。メールボックスになれるソフト削除された次の方法のいずれかで。
- Azure Active Directory のユーザー アカウントは、ソフト削除されたユーザーのメールボックスに関連付けられている (ユーザー オブジェクトが、スコープの外にごみ箱のコンテナー) です。
- ユーザーのメールボックスの関連付けられた Azure Active Directory ユーザー アカウントは、ハード削除されましたが、Exchange Online のメールボックスがあるが、証拠保全するか電子的証拠開示ください。
- Azure の Active Directory は 30 日以内のユーザー アカウントが削除されたがユーザーのメールボックスに関連付けられています。Exchange Online の最大保存期間の長さは、メールボックスを置くことソフト削除された状態で完全に駆除され回復不能なことが前に。

ハード削除されたユーザーのメールボックスは、次の方法のいずれかで削除されているメールボックスです。
- ユーザーのメールボックス ソフト削除は 30 日間、関連付けられた Azure Active Directory ユーザーは、ハード削除されました。電子メール、連絡先、およびファイルなどすべてのメールボックスの内容は完全に削除します。
- ユーザーのメールボックスに関連付けられているユーザー アカウントは、ハードに、Azure Active Directory から削除されました。ユーザーのメールボックスは、Exchange Online のソフト削除されたし、30 日間のソフト削除された状態のままです。ハード削除と、これが 30 日間で新しい Azure Active Directory のユーザーは同じ**ExchangeGuid**または**ArchiveGuid**、元の受信者のアカウントから同期され、新しいアカウントは、Exchange Online のライセンスがある場合元のユーザーのメールボックス。電子メール、連絡先、およびファイルなどすべてのメールボックスの内容は完全に削除します。
- ソフト削除されたメールボックスを削除するには、**メールボックスの削除 PermanentlyDelete**を使用します。

上記の削除のシナリオでは、証拠保全や電子的証拠開示の保留中のように、保留状態のいずれかでユーザーのメールボックスではないことを前提としています。メールボックスの保留中の任意の型は、メールボックスを削除できません。メール ユーザーのすべての受信者タイプの[保持](https://support.office.com/article/manage-legal-investigations-in-office-365-2e5fbe9f-ee4d-4178-8ff8-4356bc1b168e?ui=en-US&rs=en-US&ad=US)設定は無視され、削除ではハードまたはソフト削除の効果があるありません。

## <a name="soft-deleted-and-hard-deleted-items"></a>ソフト削除し、ハード削除項目
ユーザーは、電子メール メッセージ、連絡先、予定表の予定、またはタスク) などのメールボックス アイテムを削除、アイテムは回復可能なアイテム フォルダー、および削除をという名前のサブフォルダーに移動します。これは、ソフトの削除と呼ばれます。どのくらいの期間削除されたフォルダーは、メールボックスに設定されている削除済みアイテムの保存期間によって異なります。 削除の項目が保持されます。Exchange Online のメールボックスは、既定では、14 日の削除済みアイテムを保持しますが、Exchange Online 管理者は、最大で 30 日間の期間を延長するには、この設定を変更できます。(Exchange Online のメールボックスの削除済みアイテム保存期間を変更する詳細な手順については、参照[、オンラインの Exchange メールボックスのアイテムをどのくらいの時間は完全に削除の変更が保持されます](https://docs.microsoft.com/exchange/recipients-in-exchange-online/manage-user-mailboxes/change-deleted-item-retention))。ユーザーでは、回復したり、パージ、削除済みアイテムの削除済みアイテムの保存期間の期限が切れる前にすることができます。これを行うには、Microsoft Outlook または Outlook web 上で削除済みアイテムの回復機能を使用します。

ユーザーは、Outlook または Outlook web 上で削除済みアイテムの回復機能を使用して削除済みアイテムを削除、これによっては、ハード削除と呼ばれます。Exchange online では、単一アイテムの回復は既定で有効に新しいメールボックスが作成されると、管理者ことができますがハード削除済みアイテムの[回復](https://docs.microsoft.com/Exchange/recipients/user-mailboxes/recover-deleted-messages)削除済みアイテムの保持期間の有効期限が切れる前にします。メッセージがユーザーまたはプロセスによって変更された場合は、コピー元のアイテムのもを保持する単一アイテムの回復を有効にするとします。

## <a name="page-zeroing"></a>ページ完全消去
*Zeroing*は、削除されたデータを回復することが困難になるように、削除済みデータにゼロまたはバイナリ パターンのいずれかを書き込みするセキュリティ機構です。Exchange Online では、メールボックス データベース*のページ*を使用して、ストレージの単位としてで上書きする*ページ ゼロ化*と呼ばれるプロセスを実装します。ページ ゼロ化が既定で有効にし、顧客、または Microsoft によって、無効にできません。ページ領域の解放操作は、特定のデータベースのすべてのコピーは、ページのゼロと同様の方法でできるように、トランザクション ログ ファイルに記録されます。データベースのパッシブ コピーに対して 0 に設定を取得するページは、アクティブなデータベースのコピーを上のページをゼロ化します。

ページ ゼロ化は、ハード削除レコードをバイナリ パターンを書き込みます。Extensible Storage Engine (ESE) 使用する操作 (内部データベース エンジンの名前のサーバーで Exchange オンライン) に固有のページをゼロ化パターンとバック グラウンド データベース保守操作ではなく操作を実行時に異なります。(バック グラウンド データベース保守は、継続的にチェックサムのスキャンの各データベースとするプロセスです。その主な機能は、データベース ページのチェックサムが、領域をクリーンアップして、レコードと、ストアのクラッシュが発生したためが消去されないページの領域の解放も行います)。

次の表に、特定の実行時操作に対応したパターンを一覧表示します。

| ESE 実行時操作   | パターン |
|--------------------------|--------------|
| 置換                  | R            |
| レコード/長い値の削除 | D            |
| 解放されたページ領域         | H            |


次の表は、ESE バックグラウンド データベース保守で実行される特定の操作に対応したパターンの一覧です。

| ESE バックグラウンド データベース保守操作 | パターン |
|-----------------------------------------------|--------------|
| レコードの削除                                 | D            |
| 長い値の削除                             | L            |
| 部分的に使用されたページの解放されたページ領域       | Z            |
| 未使用ページの解放されたページ領域               | U            |


### <a name="page-zeroing-process"></a>ページ ゼロ化する処理
ページ ゼロ化のプロセスは、削除のシナリオによって異なります。次の表は、データベースの削除のシナリオをについて説明します、ページの領域の解放の関数が発生します。

| データベースの削除のシナリオ | データベース データを解放するための ESE プロセスと期間 |
|-----------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| アイテムの有効期限に基づいて削除済みアイテムの保持期間です。 | 非同期のスレッドは、バイナリ パターンを削除されたデータに上書きします。この操作はレコード削除の数ミリ秒以内に実行されます。非同期の解放作業がまだ終っていないうちに、ストア プロセスがクラッシュした場合 (またはバージョン ストアが増大したため、バージョン ストアのクリーンアップがキャンセルされた場合) は、バックグラウンド データベース保守でデータベースの該当するセクションが処理されたときに解放が完了します。 |
| Web フォルダー ビュー (たとえば、テーマ別のビュー) に Outlook または Outlook のアイテムの有効期限を表示のシナリオ: | バックグラウンド データベース保守でデータベースのこのセクションが処理されたときに、データ解放が実行されます。 |
| 移動メールボックスおよび削除のメールボックスのシナリオ: 移動元のメールボックスを削除 (削除済みメールボックスの有効期限) | バックグラウンド データベース保守でデータベースのこのセクションが処理されたときに、データ解放が実行されます。 |

### <a name="mailbox-data-types-without-page-zeroing"></a>ページ解放を使用しないメールボックス データの種類
次の種類のメールボックス データがあるページをゼロ化するための準備なし。
- **メールボックス データベースのトランザクション ログ**を通常の操作の一部としてトランザクション ・ ログが削除されると、プロセスが削除されたログ ファイルを格納するファイル システム内のブロックをゼロにはありません。ファイル ・ システムは簡単に再利用してその空き領域を新たに作成されたログは、ですが、これが発生しないことは保証されていません。
- **コンテンツ インデックスのカタログ ファイル**を Exchange Online では、検索のインデックス処理の機能の検索の基礎 (高速とも呼ばれます) を使用します。検索インデックス カタログは、メールボックス データベース ファイルと同じボリュームに格納されているいくつかの数十のファイルで構成されます。メッセージはハード ・ メールボックス ・ データベースから削除すると検索カタログに関連付けられたコンテンツがすぐに削除されていません。コンテンツ削除の場合は検索の基盤は 1 つの大きいファイルに多くの小さなカタログ ファイルのシャドウ (またはマスター結合)。マスター結合が完了すると、サイズの小さいカタログ ファイルが削除されます。プロセスを削除したカタログ ファイルを格納するブロックを 0 にすることはありません。

## <a name="continuous-replication"></a>連続レプリケーション
(ログ配布および再生とも呼ばれます) の連続レプリケーションは、Exchange Online で作成し、高可用性、サイトの回復性、および災害復旧を提供するすべてのメールボックス データベースのコピーを保持する技術です。連続レプリケーションは、メールボックス データベースのコピーを 1 つまたは複数の非同期更新を実行するテクノロジを提供する Exchange Server データベースのクラッシュ復旧のサポートを活用します。各メールボックス サーバーは、一連の 1 MB のトランザクション ログ ファイル内のログ レコードとして、アクティブなデータベース (たとえば、ユーザー電子メールの利用状況) で行われたデータベースの更新を記録します。この一連のファイルは、ログ ストリームと呼ばれます。継続的なレプリケーションでは、ログ ストリームが非同期的に、データベースの 1 つまたは複数のコピーを更新するのにも使用されます。ログが送信されるこれは、アクティブなデータベースのパッシブ コピーが含まれていると、データベースのパッシブ コピーに再生することの場所にします。アクティブなデータベースからすべてのログは、データベースのパッシブ コピーに対して再生される、し、2 つのデータベースは、同等ですが、され、このプロセスをアクティブなデータベースへの物理的な変更がそのデータベースのすべてのパッシブ コピーにレプリケートされることです。

メールボックス データベースから削除するメールボックスのアイテムまたはメールボックス全体をかどうかおよび削除のソフトやハードの削除、するかどうかは、アクティブなデータベースに物理的な変更を表します。ゼロ設定] ページでは、アクティブなデータベースに物理的な変更を加える必要があります。これらの変更、継続的なレプリケーションと呼ばれるプロセスによってログ ファイルに書き込まれ、これらのログ ファイルは、データベースのパッシブ コピーに対して再生される、ときに、同じ物理が変更された、パッシブなデータベースです。