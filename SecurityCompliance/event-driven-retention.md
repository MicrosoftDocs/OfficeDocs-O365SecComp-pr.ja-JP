---
title: イベント ベースの保持の概要
ms.author: stephow
author: stephow-MSFT
manager: laurawi
ms.date: ''
ms.audience: Admin
ms.topic: article
ms.service: O365-seccomp
localization_priority: Priority
ms.collection:
- M365-security-compliance
search.appverid:
- MOE150
- MET150
description: Office 365 のラベルを使用すると、特定のイベントが発生したときの保存期間の基準を設定することができます。発生したイベントによって保存期間の開始がトリガーされ、そのイベントの種類のラベルが適用されたすべてのコンテンツによって、コンテンツに適用済みのラベルの保持操作が行われます。イベント ベースの保持は通常、レコード管理プロセスの一環として使用します。
ms.openlocfilehash: ceb4b2fde10e43235d8d310243fe56cce1a2b240
ms.sourcegitcommit: a79eb9907759d4cd849c3f948695a9ff890b19bf
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/26/2019
ms.locfileid: "30866363"
---
# <a name="overview-of-event-driven-retention"></a>イベント ベースの保持の概要

コンテンツを保持する場合、たとえば、ドキュメントを作成してから 7 年間保存し、その後削除するように、保存期間がコンテンツの有効期限に基づいていることがよくあります。Office 365 のラベルを使用すれば、特定の種類のイベントが発生したときの保存期間の基準を設定することができます。発生したイベントによって保存期間の開始がトリガーされ、そのイベントの種類のラベルが適用されたすべてのコンテンツによって、コンテンツに適用済みのラベルの保持操作が行われます。
  
たとえば、以下のような場合に、イベント ベースの保持のラベルを使用することができます:
  
- **従業員が組織のメンバーでなくなる**: たとえば、ある従業員が組織のメンバーでなくなった場合、その時点から該当従業員のレコードを 10 年間保持しなければならないとします。10 年経過すると、その従業員の雇用、業績、契約終了などに関するすべてのドキュメントを処分する必要があります。この場合は、従業員が組織から離れることが、10 年の保存期間をトリガーするイベントとなります。 
    
- **契約の期限切れ**: たとえば、契約に関連するすべてのレコードを、契約の期限が切れてから 5 年間保持する必要があるとします。この場合、契約の期限切れが、5 年の保存期間をトリガーするイベントとなります。 
    
- **製品の有効期間**: たとえば、組織に、技術仕様などのコンテンツに関して、最終製品製造日に関する保持要件があるとします。この場合、最後に製造された日が、保存期間をトリガーするイベントとなります。 
    
イベント ベースの保持は通常、レコード管理プロセスの一環として使用します。これは以下のことを意味します:
  
- イベント ベースのラベルも通常、コンテンツをレコードとして分類します。詳細については、「[コンテンツ検索を使用した特定の保持ラベルが適用されたすべてのコンテンツの検索](labels.md#using-content-search-to-find-all-content-with-a-specific-retention-label-applied-to-it)」を参照してください。
    
- レコードとして宣言されているもののイベント トリガーがまだ発生していない文書は、イベントがそのドキュメントの保存期間をトリガーするまで無期限に保持されます (レコードを完全に削除することはできません)。
    
- イベント ベースのラベルは通常、保存期間の終了時に廃棄レビューをトリガーするので、レコード管理者は手動でコンテンツを確認して廃棄できます。詳細については、「[廃棄レビューの概要](disposition-reviews.md)」を参照してください。
    
イベント ベースのラベルには、Office 365 のラベルと同じ機能があります。詳細については、「[ラベルの概要](labels.md)」を参照してください。
    
## <a name="understanding-the-relationship-between-event-types-labels-events-and-asset-ids"></a>イベントの種類、ラベル、イベント、アセット ID の関係を理解する

イベント ベースの保持を活用するには、下の図に示すように、イベントの種類、ラベル、イベント、アセット ID の関係を理解することが重要です。図の下には説明文も記載しています。
  
![イベントの種類、ラベル、イベント、アセット ID の図](media/a5141a6b-61ca-4a60-9ab0-24e6bb45bbdb.png)
  
![イベントの種類、ラベル、イベント、アセット ID の図](media/ce89a91f-49aa-4b5a-933c-ac3a13dccd5d.png)
  
1. さまざまな種類のコンテンツのラベルを作成し、ラベルをイベントの種類に関連付けることができます。たとえば、さまざまな種類の製品ファイルとレコードのラベルは、製品を使用しなくなった時点からレコードを 10 年間保持する必要があるため、Product Lifetime という名前のイベントの種類に関連付けられます。
    
2. ユーザー (通常はレコード管理者) はこれらのラベルをコンテンツに適用し、(SharePoint および OneDrive ドキュメントの場合は) 各アイテムのアセット ID を入力します。この例では、アセット ID は組織が使用する製品名あるいはコードになります。つまり、各製品のレコードにはラベルが割り当てられ、各レコードのプロパティにはアセット ID が含まれます。上の図で示されてるのは、組織内のすべての製品レコードの**すべてのコンテンツ**であり、各アイテムには、その製品のレコードのアセット ID が存在します。 
    
3. Product Lifetime がイベントの種類で、使用しなくなった特定の製品がイベントになります。その種類のイベントが発生したら (上の図の例では、製品を使用しなくなる場合)、以下を指定するイベントを作成します:
    
  - (SharePoint および OneDrive のドキュメントの) アセット ID。
    
  - (Exchange アイテムの) キーワード。上の例において組織は、製品レコードを含むメッセージで製品コードを使用するため、Exchange アイテムのキーワードは  SharePoint および OneDrive ドキュメントのアセット  ID と同じになります。
    
  - イベントが発生した日付。この日付は、保存期間の開始として使用します。この日付は、現在の日付または将来の日付にする必要があります。過去の日付にすることはできません。
    
4. イベントを作成すると、そのイベントの日付は次のようなすべてのコンテンツに同期されます。すなわち、そのイベントの種類のラベルが割り当てられ、指定されたアセット ID またはキーワードを含むすべてのコンテンツです。他のラベルと同様、この同期には最大 7 日間かかります。上の図で赤く囲まれたすべてのアイテムに関しては、このイベントによって保存期間がトリガーされます。つまり、この製品を使用しなくなると、そのイベントによって製品のレコードの保存期間がトリガーされます。
    
銘記すべき点として、イベントのアセット ID またはキーワードを指定しない場合は、そのイベントの種類のラベルが割り当てられている**すべてのコンテンツ**の保存期間がイベントによってトリガーされます。つまり、上記の図では、すべてのコンテンツの保持が開始されますので、ご注意ください。 
  
また、各ラベルには独自の保持の設定があります。上の例では、すべて 10 年を指定していますが、保存期間が異なるそれぞれのラベルをイベントがトリガーすることもできます。
  
## <a name="how-to-set-up-event-driven-retention"></a>イベント ベースの保持のセットアップ方法

イベント ベースの保持の概要をまず説明し、その後に詳細な手順を示します。
  
![イベント ベースの保持をセットアップするワークフローの図](media/161146d9-e0fc-4248-abc1-a18045eaad5c.png)
  
### <a name="step-1-create-a-label-whose-retention-period-is-based-on-an-event"></a>手順 1: 保存期間がイベント ベースのラベルを作成する

セキュリティ&amp;コンプライアンス センターの左側のナビゲーションの **[分類]** の下で、**[ラベル]** \> **[ラベルを作成]** の順に選択します。
  
ラベルを作成するときは、保持をオンにしてから、その下に表示されているオプションを選択して、イベント ベースのコンテンツの保持または削除を行います。保持の設定は、**[イベント]** ページでイベントを作成する手順 5 までは、有効になりません。 
  
イベント ベースの保持は通常、レコードとして分類されるコンテンツに使用します。このため、イベント ベースでラベルを作成する場合は、**[ラベルを使用して "レコード" としてコンテンツを分類する]** オプションを選択します。
  
また、イベント ベースの保持には、以下のような保持の設定が必要になります:
  
- コンテンツを保持する。
    
- 保存期間の終わりに、コンテンツの自動削除または廃棄レビューのトリガーを行う。
    
![ベースにするイベントのラベルのオプション](media/a4902281-5196-4194-9737-f30231d95861.png)
  
### <a name="step-2-choose-an-event-type-for-that-label"></a>手順 2: そのラベルのイベントの種類を選択する

ラベル設定で、ベースにする**イベント**のラベルのオプションを選択すると、**[イベントの種類を選択する]** オプションが表示されます。イベントの種類は、ラベルを関連付けるイベントに関する、簡単で一般的な説明内容になります。
  
たとえば、Product Lifetime という名前のイベントの種類を作成する場合は、"製品開発ファイル" や "製品の経営的意思決定" など、ラベルを適用するコンテンツの種類が分かるような名前でイベント ベースのラベルを作成する必要があります。
  
一度イベントの種類を選択してラベルを作成すると、イベントの種類の変更はできませんので、ご注意ください。
  
![イベントの種類を作成または選択するオプション](media/8b7afe79-72cb-462e-81d4-b5ddbe899dbc.png)
  
### <a name="step-3-publish-or-auto-apply-the-label"></a>手順 3: ラベルの発行または自動適用

他のラベルと同様、イベント ベースのラベルも発行または自動適用を行う必要があります。そのため、イベント ベースのラベルはコンテンツに手動または自動で適用されます。この操作は **[ラベル]** ページで行います。ただし、コンテンツをレコードとして分類するラベルに関しては、発行はできますが、コンテンツへの適用は手動のみとなります。コンテンツへの自動適用を行うことはできません。 
  
![ラベルの発行または自動適用のオプション](media/c9232c54-bbc0-40d2-abc2-122d5d1e70af.png)
  
### <a name="step-4-enter-an-asset-id"></a>手順 4: アセット ID を入力する

イベント ベースのラベルがコンテンツに適用されると、アイテムごとにアセット ID を入力できます。たとえば、組織が使用するのは以下のようなものになります:
  
- 特定の製品のみのコンテンツ保持に使用する製品コード。
    
- 特定の製品のみのコンテンツ保持に使用するプロジェクト コード。
    
- 特定の製品のみのコンテンツ保持に使用する従業員 ID。
    
アセット ID は、SharePoint および OneDrive for Business では、別のドキュメント プロパティになります。組織ですでに、他のドキュメント プロパティと ID を使用してコンテンツを分類している可能性がありますが、その場合は、イベントを作成するときにこれらのプロパティと値を使用することができます。詳細は、次の手順 6 を参照してください。組織がプロパティを使用する際には、ドキュメント プロパティで property:value の組み合わせを使って、そのアイテムをイベントの種類に関連付けることが重要です。
  
![アセット ID を入力するテキスト ボックス](media/6d31628e-7162-4370-a8d7-de704aafa350.png)
  
### <a name="step-5-create-an-event"></a>手順 5: イベントを作成する

製品の使用を終えるなど、イベントの種類の特定のインスタンスが発生するときは、セキュリティ&amp;コンプライアンス センターの [イベント] ページに移動し、イベントを作成します。イベントを作成して手動でトリガーする必要があります。
  
![セキュリティ/コンプライアンス センターの [イベント] ページ](media/811bddfb-a7e9-4990-bf5e-abe0dfb91809.png)
  
### <a name="step-6-choose-the-same-event-type-used-by-the-label-in-step-2"></a>手順 6: 手順 2 でのラベルを使用したイベントの種類と同じものを選択する

イベントを作成するときは、手順 2 でのラベルを使用したイベントの種類と同じもの (例: Product Lifetime)  を選択します。そのイベントの種類のラベルが適用されたコンテンツに関してのみ、保存期間がトリガーされます。
  
![イベントの種類を選択するイベント設定のオプション](media/11663591-5628-419e-9537-61eb8f5c741f.png)
  
### <a name="step-7-enter-keywords-or-an-asset-id"></a>手順 7: キーワードまたはアセット ID を入力する

ここで、SharePoint および OneDrive コンテンツのアセット ID または Exchange コンテンツのキーワードを指定して、コンテンツの範囲を絞り込みます。アセット ID の保持は、指定された property:value のペアを持つコンテンツにのみ適用されます。アセット ID が入力されていない場合は、そのイベントの種類のラベルが割り当てられている**すべてのコンテンツ**に、ラベルに適用されているのと同じ保持期限が適用されます。 
  
なお、アセット ID は、SharePoint と OneDrive for Business では、別のドキュメント プロパティにあります。アセット ID プロパティを使用している場合は、以下に示すアセット ID のボックスに ComplianceAssetID:\<値\> を入力します。
  
組織がこのイベントの種類に関連するドキュメントに、他のプロパティと ID を適用している可能性があります。たとえば、特定の製品のレコードを検出する必要がある場合、ID はカスタム プロパティ ProductID と値 "XYZ" の組み合わせになります。この場合、以下に示すアセット ID のボックスには、ProductID:XYZ と入力します。
  
Exchange アイテムの場合は、キーワードを使用できます。AND、OR、NOT などの検索演算子を使って、クエリを絞り込むことができます。演算子の詳細については、「[コンテンツ検索のキーワード クエリと検索条件](keyword-queries-and-search-conditions.md)」を参照してください。
  
最後に、イベントが発生した日付を選択します。この日付は保存期間の開始として使用されます。イベントを作成した後、そのイベントの日付は、そのイベントの種類、アセット ID、キーワードのラベルが割り当てられたすべてのコンテンツに同期されます。他のラベルと同様、この同期には最大 7 日間かかります。
  
![[イベントの設定] ページ](media/40d3c9db-f624-49a5-b38a-d16bcce20231.png)
  
## <a name="use-content-search-to-find-all-content-with-a-specific-label-or-asset-id"></a>コンテンツ検索を使用して、特定のラベルまたはアセット ID が適用されたすべてのコンテンツを検索する

ラベルがコンテンツに割り当てられた後、セキュリティ&amp;コンプライアンス センターでコンテンツ検索を使用して、特定のラベルで分類されているコンテンツまたは特定のアセット ID を含むコンテンツすべてを検索することができます。
  
コンテンツ検索を行うときは、次のようにします:
  
- 特定のラベルを持つすべてのコンテンツを検索するには、**[コンプライアンス タグ]** の条件を選択した後、完全なラベル名を入力するか、またはラベル名の一部を入力してワイルドカードを使用します。 
    
- 特定のアセット ID を持つすべてのコンテンツを検索するには、**ComplianceAssetID** プロパティと値 (例: ComplianceAssetID:\<値\>) を入力します。 
    
詳細については、「[コンテンツ検索のキーワード クエリと検索条件](keyword-queries-and-search-conditions.md)」を参照してください。
  
## <a name="permissions"></a>アクセス許可

**[イベント]** ページにアクセスするには、レビュー担当者は、**廃棄管理**の役割と**監査ログの閲覧限定**の役割を持つ、役割グループのメンバーである必要があります。Disposition Reviewers という新しい役割グループを作成し、これら 2 つの役割をその役割グループに追加して、それからメンバーをその役割グループに追加することをお勧めします。 
  
詳細については、「[ユーザーに Office 365 セキュリティ&amp;コンプライアンス センターへのアクセス権を付与する](grant-access-to-the-security-and-compliance-center.md)」を参照してください。
  
## <a name="automate-events-by-using-powershell"></a>PowerShell を使用してイベントを自動化する

Office 365 セキュリティ&amp;コンプライアンス センターでは、イベントは手動でしか作成できません。イベントが発生したときに自動的にイベントをトリガーすることはできません。ただし、PowerShell スクリプトを使用すれば、ビジネス アプリケーションからのイベント ベースの保持を自動化することができます。
  
現在、ビジネス アプリケーション (人事、CRM、金融アプリケーションなど) をイベント ベースの保持に適用できるよう、API に関する開発を行っています。たとえば、人事システムをイベント ベースの保持に適用できるようになると、従業員が組織を離れたときにそのイベントの種類のイベントが自動的にトリガーされるようになります。
  
その時までは、イベント ベースの保持に使用できるのは以下の PowerShell コマンドレットです:
  
- [Get-ComplianceRetentionEventType](https://go.microsoft.com/fwlink/?linkid=873002)
    
- [New-ComplianceRetentionEventType](https://go.microsoft.com/fwlink/?linkid=873004)
    
- [Remove-ComplianceRetentionEventType](https://go.microsoft.com/fwlink/?linkid=873005)
    
- [Set-ComplianceRetentionEventType](https://go.microsoft.com/fwlink/?linkid=873006)
    
- [Get-ComplianceRetentionEvent](https://go.microsoft.com/fwlink/?linkid=873001)
    
- [New-ComplianceRetentionEvent](https://go.microsoft.com/fwlink/?linkid=873003)
    

