---
title: Office 365 の監視と自己復旧
ms.author: robmazz
author: robmazz
manager: laurawi
ms.date: 8/21/2018
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: None
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
description: Office 365 の監視および自動修復機能に関する情報。
ms.openlocfilehash: 4878ca5889c9b893154e0e7b910cb17c4b36402c
ms.sourcegitcommit: f57b4001ef1327f0ea622e716a4d7d78f1769b49
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/23/2019
ms.locfileid: "30217547"
---
# <a name="office-365-monitoring-and-self-healing"></a><span data-ttu-id="6f924-103">Office 365 の監視と自己復旧</span><span class="sxs-lookup"><span data-stu-id="6f924-103">Office 365 Monitoring and Self-Healing</span></span>
<span data-ttu-id="6f924-p101">Office 365 の規模を考えると、包括的な監視、インテリジェントな警告、および高速で信頼性の高い自己復旧を行うことなく、お客様のデータを復元し、マルウェアから安全に保持することはできません。Office 365 のスケールでサービスのセットを監視することは非常に困難です。接続されたグローバル環境でサービスを運用および管理するために必要な新しい mindsets と方法論を導入する必要がありました。データ収集とフィルター処理の従来の監視アプローチから、データ分析に基づくアプローチに対する通知を作成しました。そのデータの信号を受け取り、信頼性を構築した後、自動化を使用して問題を回復または解決します。この方法を使用すると、復旧式から人間を取得することができます。これにより、操作の費用がかからない高速で、エラーが発生しやすくなります。</span><span class="sxs-lookup"><span data-stu-id="6f924-p101">Given the scale of Office 365, it would be impossible to keep customer data resilient and safe from malware without built-in monitoring that is comprehensive, alerting that is intelligent, and self-healing that is fast and reliable. Monitoring a set of services at the scale of Office 365 is very challenging. New mindsets and methodologies needed to be introduced, and whole new sets of technology needed to be created to operate and manage the service in a connected global environment. We have moved away from the traditional monitoring approach of data collection and filtering to create alerts to an approach that is based on data analysis; taking signals and building confidence in that data and then using automation to recover or resolve the issue. This approach helps take humans out of the recovery equation, which in turn makes operations less expensive, faster, and less error prone.</span></span> 

<span data-ttu-id="6f924-p102">Office 365 の監視の基礎は、Azure、SQL Azure、および[オープンソースのストリーミングデータベーステクノロジ](http://cassandra.apache.org/)に基づいて構築されたデータ Insights エンジンを構成するテクノロジの集合体です。データを収集して集約し、結論に達するように設計されています。現時点では、多くの地域の複数のデータセンターに分散している10万台以上のサーバーから1時間あたり5億を超えるイベントを処理しています。これらの数は増加しています。</span><span class="sxs-lookup"><span data-stu-id="6f924-p102">Fundamental to Office 365 monitoring is a collection of technologies that comprise our Data Insights Engine, which is built on Azure, SQL Azure, and [open-source streaming database technology](http://cassandra.apache.org/). It is designed to collect and aggregate data and reach conclusions. Currently, it processes more than 500 million events per hour from more than 100,000 servers (~15 TB per day) scattered across dozens of datacenters in many regions, and these numbers are growing.</span></span> 

<span data-ttu-id="6f924-p103">Office 365 では、*外部の監視*を使用しています。これには、重要なすべてをテストする代理トランザクションの作成が含まれます。たとえば、Exchange Online では、各シナリオが5分ごとに散在しているすべてのデータベースをテストしており、システムに存在するすべてのものをほぼ継続的にカバーしています。複数の場所から、1日あたり2億5000万のテストトランザクションを実行して、サービスの堅牢なベースラインまたはハートビートを作成します。</span><span class="sxs-lookup"><span data-stu-id="6f924-p103">Office 365 uses *outside-in monitoring*, which involves creating synthetic transactions to test everything that is important. For example, in Exchange Online each scenario is testing every database worldwide every five minutes in a scattered fashion, providing near continuous coverage of everything that lives in the system. From multiple locations, 250 million test transactions per day are performed to create a robust baseline or heartbeat for the service.</span></span> 

<span data-ttu-id="6f924-p104">Office 365 は、*赤の警告*の概念を使用して、データセンター内のすべてのコンピューターからのすべての監視信号を、人手が管理できるものに縮小します。概念は非常に単純です。複数のシグナル間で何らかの問題が発生している場合は、何かが起こっていなければなりません。1つの信号に対して信頼を構築することはできません。つまり、精度を高めるために、各信号に対して適切な忠実さを得ることになります。この監視システムは非常に強力であるため、モニターを監視するスタッフは24時間365日ではありません。問題が検出された場合は、問題が検出された場合は、適切なオンプレベルの担当者がページになる場合もあれば、問題を解決するだけの場合もあります。信号の収集を開始して赤の通知を作成したら、すべてのサービスパーティションで triangulating を開始できます。</span><span class="sxs-lookup"><span data-stu-id="6f924-p104">Office 365 also uses the concept of *Red Alert*, which shrinks down all the monitoring signals from all of the machines in our datacenters to something manageable by a human being. The concept is quite simple: If something is happening across multiple signals, there must be something going on. It is not about building confidence in one signal, it is about having reasonable fidelity for each signal so that you get greater accuracy. This monitoring system is so powerful that we do not have 24x7 staff watching our monitors; all we have is the machinery that wakes up if it detects a problem, in which case it will page the appropriate on-call personnel, or more often as is the case, it will just go ahead and solve the problem. Once we start collecting signals and building red alerts off them, we can start triangulating across all our service partitions.</span></span> 

<span data-ttu-id="6f924-120">この警告は、エラーアラートと赤のアラートの組み合わせに基づいて、問題を発生させる可能性のあるコンポーネントを示します。また、メールボックスサーバーを再起動することによって、システムがその問題を解決しようとしていることを示します。</span><span class="sxs-lookup"><span data-stu-id="6f924-120">Based on the combination of the failure alert and the Red Alerts, this alert indicates exactly which components could be having a problem, and that the system is going to try to correct the problem by itself by restarting a mailbox server.</span></span> 

<span data-ttu-id="6f924-p105">Exchange Online には、単一ページの復元などの自己復旧機能に加えて、エンドユーザーの環境を保持することに重点を置いた監視と自己修復のアプローチを採用したいくつかの機能が含まれています。これらの機能には、組み込みの監視と回復アクションを提供する*可用性管理*と、ディスク障害発生後にデータベースの冗長性を自動的に復元する autoreseed があります。</span><span class="sxs-lookup"><span data-stu-id="6f924-p105">In addition to self-healing capabilities such as single page restore, Exchange Online includes several features that take an approach to monitoring and self-healing which focuses on preserving the end-user experience. These features include *Managed Availability*, which provides built-in monitoring and recovery actions, and AutoReseed, which automatically restores database redundancy after a disk failure.</span></span> 

## <a name="managed-availability"></a><span data-ttu-id="6f924-123">可用性管理</span><span class="sxs-lookup"><span data-stu-id="6f924-123">Managed Availability</span></span> 
<span data-ttu-id="6f924-p106">可用性管理は、回復指向のアクションによってエンドユーザーの操作を監視および保護するネイティブの正常性チェックと復旧のソリューションを提供します。可用性管理とは、組み込みの監視と回復の操作を Exchange の高可用性プラットフォームと統合することです。問題が発生し、システムによって検出されるとすぐに、問題を検出して復元するように設計されています。以前の外部監視ソリューションおよび Exchange の手法とは異なり、可用性管理は、問題の根本的な原因を特定したり、伝えたりすることはありません。その代わりに、エンドユーザーの環境の3つの主要な領域に対応する復旧の側面に重点を置いています。</span><span class="sxs-lookup"><span data-stu-id="6f924-p106">Managed availability provides a native health checking and recovery solution that monitors and protects the end user's experience through recovery-oriented actions. Managed availability is the integration of built-in monitoring and recovery actions with the Exchange high availability platform. It's designed to detect and recover from problems as soon as they occur and are discovered by the system. Unlike previous external monitoring solutions and techniques for Exchange, managed availability doesn't try to identify or communicate the root cause of an issue. Instead, it's focused on recovery aspects that address three key areas of the end-user experience:</span></span> 
- <span data-ttu-id="6f924-129">**可用性**-ユーザーがサービスにアクセスできるかどうか。</span><span class="sxs-lookup"><span data-stu-id="6f924-129">**Availability** - Can users access the service?</span></span> 
- <span data-ttu-id="6f924-130">**待機時間**-ユーザーにとってどのような状況がありますか。</span><span class="sxs-lookup"><span data-stu-id="6f924-130">**Latency** - How is the experience for users?</span></span> 
- <span data-ttu-id="6f924-131">**エラー** -ユーザーは必要な情報を得ることができますか。</span><span class="sxs-lookup"><span data-stu-id="6f924-131">**Errors** - Are users able to accomplish what they want?</span></span> 

<span data-ttu-id="6f924-p107">可用性管理は、Exchange Online を実行しているすべての Office 365 サーバー上で実行される内部機能です。1秒ごとに数百の正常性測定基準をポーリングして分析します。何らかの問題が検出された場合は、そのほとんどが自動的に修正されます。しかし、可用性管理では、それ自体を修正できないという問題が常に発生します。このような場合、可用性管理によって、イベントログを使用して、問題が Office 365 サポートチームにエスカレートされます。</span><span class="sxs-lookup"><span data-stu-id="6f924-p107">Managed availability is an internal feature that runs on every Office 365 server running Exchange Online. It polls and analyzes hundreds of health metrics every second. If something is found to be wrong, most of the time it is fixed automatically. But there will always be issues that managed availability will not be able to fix on its own. In those cases, managed availability will escalate the issue to an Office 365 support team by means of event logging.</span></span> 

## <a name="autoreseed"></a><span data-ttu-id="6f924-137">AutoReseed</span><span class="sxs-lookup"><span data-stu-id="6f924-137">AutoReseed</span></span> 
<span data-ttu-id="6f924-p108">Exchange Online サーバーは、複数のデータベースとそのログストリームを同じ非 RAID ディスクに格納する構成で展開されます。この構成は多くの場合、ディスク上のデータを複製するために使用されている記憶域冗長メカニズム (RAID など) がないため、*多数のディスク*(JBOD) と呼ばれます。ディスクが JBOD 環境で障害が発生すると、そのディスク上のデータは失われます。</span><span class="sxs-lookup"><span data-stu-id="6f924-p108">Exchange Online servers are deployed in a configuration that stores multiple databases and their log streams on the same non-RAID disk. This configuration is often referred to as *just a bunch of disks* (JBOD) because no storage redundancy mechanisms, such as RAID, are being used to duplicate the data on the disk. When a disk fails in a JBOD environment, the data on that disk is lost.</span></span> 

<span data-ttu-id="6f924-p109">exchange online のサイズと、その中に展開された it が数百万のディスクドライブになると、ディスクドライブの障害は exchange online で定期的に発生します。実際には、100を超える時間は毎日失敗します。オンプレミスのエンタープライズ展開でディスク障害が発生した場合、管理者は障害が発生したディスクを手動で交換して、影響を受けるデータを復元する必要があります。クラウド展開では、Office 365 のサイズ、オペレーター (クラウド管理者) による手動によるディスクの交換は現実的でも経済的でもありません。</span><span class="sxs-lookup"><span data-stu-id="6f924-p109">Given the size of Exchange Online and the fact that deployed within it are millions of disk drives, disk drive failures are a regular occurrence in Exchange Online. In fact, more than 100 fail every day. When a disk fails in an on-premises enterprise deployment, an administrator must manually replace the failed disk and restore the affected data. In a cloud deployment the size of Office 365, having operators (cloud administrators) manually replacing disks is neither practical nor economically feasible.</span></span> 

<span data-ttu-id="6f924-p110">自動再シードまたは*autoreseed*は、ディスク障害、データベース破損イベント、またはデータベースコピーの再シードを必要とするその他の問題に対して、通常はオペレーター主導のアクションを置き換える機能です。autoreseed は、システム上でプロビジョニングされた予備ディスクを使用してディスク障害が発生した後に、データベースの冗長性を自動的に復元するように設計されています。ディスクに障害が発生した場合、そのディスクに格納されているデータベースコピーは、サーバー上の事前構成済みのスペアディスクに自動的に再シードされて、冗長性が復元されます。</span><span class="sxs-lookup"><span data-stu-id="6f924-p110">Automatic Reseed, or *AutoReseed*, is a feature that is the replacement for what is normally operator-driven action in response to a disk failure, database corruption event, or other issue that necessitates a reseeding of a database copy. AutoReseed is designed to automatically restore database redundancy after a disk failure by using spare disks that have been provisioned on the system. If a disk fails, the database copies stored on that disk are automatically reseeded to a preconfigured spare disk on the server, thereby restoring redundancy.</span></span> 