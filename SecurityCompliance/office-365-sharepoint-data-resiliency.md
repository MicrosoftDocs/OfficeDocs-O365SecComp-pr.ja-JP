---
title: Office 365 SharePoint データの復元
ms.author: robmazz
author: robmazz
manager: laurawi
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
description: Office 365 の SharePoint Online のデータ復元の概要について説明します。
ms.openlocfilehash: 19eb7c3d0918d022d8adb427282b1faae8c6f4e9
ms.sourcegitcommit: 0017dc6a5f81c165d9dfd88be39a6bb17856582e
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/23/2019
ms.locfileid: "32260785"
---
# <a name="sharepoint-online-data-resiliency"></a><span data-ttu-id="bad05-103">SharePoint Online データの復元</span><span class="sxs-lookup"><span data-stu-id="bad05-103">SharePoint Online Data Resiliency</span></span>
<span data-ttu-id="bad05-104">SharePoint Online の主要な原則は、データの一部を1つのコピーで保持することではありません。</span><span class="sxs-lookup"><span data-stu-id="bad05-104">A key principle for SharePoint Online is to never have a single copy of any piece of data.</span></span> <span data-ttu-id="bad05-105">SharePoint Online では、SQL Server レプリケーションを使用します。これは、データベース間でデータおよびデータベースオブジェクトをコピーして分散させるための一連のテクノロジで、一貫性を維持するためにデータベース間で同期します。</span><span class="sxs-lookup"><span data-stu-id="bad05-105">SharePoint Online uses SQL Server replication, which is a set of technologies for copying and distributing data and database objects from one database to another, and then synchronizing between databases to maintain consistency.</span></span> 

<span data-ttu-id="bad05-106">たとえば、ユーザーが SharePoint Online にファイルを保存すると、ファイルがチャンクされ、暗号化されて、Azure Blob ストレージ内に格納されます。</span><span class="sxs-lookup"><span data-stu-id="bad05-106">For example, when a user saves a file in SharePoint Online, the file is chunked, encrypted, and stored within Azure Blob storage.</span></span> <span data-ttu-id="bad05-107">Azure Blob サービスは、アプリケーション層とトランスポート層の両方でデータの整合性を確保するメカニズムを提供します。</span><span class="sxs-lookup"><span data-stu-id="bad05-107">Azure Blob service provides mechanisms to ensure data integrity both at the application and transport layers.</span></span> <span data-ttu-id="bad05-108">この投稿では、サービスとクライアントの観点からこれらのメカニズムについて詳細に説明します。</span><span class="sxs-lookup"><span data-stu-id="bad05-108">This post will detail these mechanisms from the service and client perspective.</span></span> <span data-ttu-id="bad05-109">MD5 チェックは、PUT と GET の両方の操作ではオプションです。ただし、HTTP を使用する際にネットワーク全体でデータの整合性を確保するための便利な機能が提供されています。</span><span class="sxs-lookup"><span data-stu-id="bad05-109">MD5 checking is optional on both PUT and GET operations; however, it does provide a convenience facility to ensure data integrity across the network when using HTTP.</span></span> <span data-ttu-id="bad05-110">また、https がトランスポート層セキュリティを提供するため、https を使用して接続すると、余分な MD5 チェックは不要になります。</span><span class="sxs-lookup"><span data-stu-id="bad05-110">Additionally, since HTTPS provides transport layer security additional MD5 checking is not needed while connecting over HTTPS as it would be redundant.</span></span> <span data-ttu-id="bad05-111">Azure Blob サービスは永続的なストレージメディアを提供し、保存されたデータに対して独自の整合性チェックを使用します。</span><span class="sxs-lookup"><span data-stu-id="bad05-111">Azure Blob service provides a durable storage medium, and uses its own integrity checking for stored data.</span></span> <span data-ttu-id="bad05-112">アプリケーションと対話するときに使用される MD5's は、アプリケーションとサービス間で HTTP 経由でデータを転送するときに、データの整合性を確認するために提供されています。</span><span class="sxs-lookup"><span data-stu-id="bad05-112">The MD5's that are used when interacting with an application are provided for checking the integrity of the data when transferring that data between the application and service via HTTP.</span></span> 

<span data-ttu-id="bad05-113">データの整合性を確保するために、Azure Blob サービスはさまざまな方法でデータの MD5 ハッシュを使用します。</span><span class="sxs-lookup"><span data-stu-id="bad05-113">To ensure data integrity the Azure Blob service uses MD5 hashes of the data in a couple different manners.</span></span> <span data-ttu-id="bad05-114">これらの値がどのように計算、転送、保存され、最終的に、それらの値を使用してデータの整合性を提供するようにアプリケーションを設計することが重要であることを理解することが重要です。</span><span class="sxs-lookup"><span data-stu-id="bad05-114">It is important to understand how these values are calculated, transmitted, stored, and eventually enforced to appropriately design your application to utilize them to provide data integrity.</span></span> <span data-ttu-id="bad05-115">詳細については、「 [Windows Azure Blob MD5 の概要](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/02/18/windows-azure-blob-md5-overview.aspx)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bad05-115">For more information, see [Windows Azure Blob MD5 Overview](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/02/18/windows-azure-blob-md5-overview.aspx).</span></span> 

<span data-ttu-id="bad05-116">ファイルへのメタデータとポインターは、SQL Server データベース (コンテンツデータベース) に格納されます。</span><span class="sxs-lookup"><span data-stu-id="bad05-116">Metadata and pointers to the file are stored in a SQL Server database (the content database).</span></span> <span data-ttu-id="bad05-117">すべてのチャンク–ファイル、ファイル、および更新のデルタは、複数の azure ストレージアカウント間でランダムに分散される azure ストレージに blob として格納されます。</span><span class="sxs-lookup"><span data-stu-id="bad05-117">All the chunks – files, pieces of files, and update deltas – are stored as blobs in Azure storage that are randomly distributed across multiple Azure storage accounts.</span></span> <span data-ttu-id="bad05-118">SQL データベースは raid 10 ストレージアレイ上でホストされており、同じデータセンター内の別のラックにある別の raid 10 ストレージアレイに同期ミラーリングされます。</span><span class="sxs-lookup"><span data-stu-id="bad05-118">The SQL database is hosted on a RAID 10 storage array which is synchronously mirrored to another RAID 10 storage array in a separate rack within the same datacenter.</span></span> <span data-ttu-id="bad05-119">次に、非同期ログ配布を使用して、第2データセンター内の別の RAID 10 ストレージアレイにデータをレプリケートします。</span><span class="sxs-lookup"><span data-stu-id="bad05-119">Asynchronous log shipping is then used to replicate the data to another RAID 10 storage array in a second datacenter.</span></span> <span data-ttu-id="bad05-120">RAID 10 および同期および非同期レプリケーションを使用してデータを保護することに加えて、2番目のデータセンターに非同期的にレプリケートされるスケジュールされたデータバックアップも行われます。</span><span class="sxs-lookup"><span data-stu-id="bad05-120">In addition to protecting data with RAID 10 and synchronous and asynchronous replication, scheduled data backups are taken which are also asynchronously replicated to the second datacenter.</span></span> 

<span data-ttu-id="bad05-121">SharePoint Online では、データバックアップは12時間ごとに実行され、14日間保持されます。</span><span class="sxs-lookup"><span data-stu-id="bad05-121">In SharePoint Online, data backups are performed every 12 hours and retained for 14 days.</span></span> <span data-ttu-id="bad05-122">SharePoint Online では、同一の顧客データの場所 (米国でのテナントを準備しているお客様のために、シカゴおよび San Antonio など) 内に、地理的に独立した複数のデータセンターを含むホットスタンバイシステムも使用します。アクティブ/アクティブとして構成されます。</span><span class="sxs-lookup"><span data-stu-id="bad05-122">SharePoint Online also uses a hot standby system that includes paired geographically-separate datacenters within the same customer data location region (for example, Chicago and San Antonio for customers who have provisioned their tenant in the United States) configured as active/active.</span></span> <span data-ttu-id="bad05-123">たとえば、プライマリデータセンターとしてシカゴを持つ live ユーザーと、フェールオーバーデータセンターとして、san Antonio がプライマリデータセンターとして存在する live ユーザーと、フェールオーバーデータセンターとしての Antonio があります。</span><span class="sxs-lookup"><span data-stu-id="bad05-123">For example, there are live users that have Chicago as their primary datacenter and San Antonio as a failover datacenter, and live users that have San Antonio as their primary datacenter and Chicago as their failover datacenter.</span></span> 