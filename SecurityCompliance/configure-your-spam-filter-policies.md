---
title: スパム フィルター ポリシーの構成
ms.author: tracyp
author: MSFTTracyP
manager: laurawi
ms.date: 12/05/2018
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
ms.assetid: 316544cb-db1d-4c25-a5b9-c73bbcf53047
ms.collection:
- M365-security-compliance
description: 基本のスパム フィルター設定には、スパムとして識別されたメッセージに対して実行される処理の選択、特定の言語で記述されたメッセージまたは特定の国や地域から送信されたメッセージをフィルターするかどうかの選択が含まれます。
ms.openlocfilehash: c52c82c32c32383e4fb2df173aa98518ac52b115
ms.sourcegitcommit: 6c0fcb82178a4ac26375545f328389a6852a81be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/28/2019
ms.locfileid: "34490523"
---
# <a name="configure-your-spam-filter-policies"></a>スパム フィルター ポリシーの設定
  
基本的なスパムフィルターの設定には、スパムとして識別されたメッセージに対して実行するアクションを選択することが含まれます。 スパム フィルター ポリシー設定は、受信メッセージのみに適用されます。 既定のスパム フィルター ポリシーを編集して会社全体のスパム フィルター設定を構成したり、カスタムのスパム フィルター ポリシーを作成してから、特定のユーザー、グループ、組織内のドメインに適用したりすることができます。 カスタム ポリシーは、常に、既定のポリシーより優先されます。 各カスタムポリシーの優先度を変更することによって、カスタムポリシーを実行する順序を変更することができます。ただし、複数のポリシーが条件セットを満たす場合は、最も優先度の高いポリシーのみが適用されます。
  
> [!IMPORTANT]
> Exchange Online Protection (EOP) スタンドアロンのお客様の場合、既定では、EOP スパム フィルターはスパム検出メッセージを各受信者の迷惑メール フォルダーに送信します。 ただし、[**メッセージを迷惑メールフォルダーに移動する**] アクションがオンプレミスのメールボックスに対して動作することを確認するには、オンプレミスのサーバーで Exchange メールフロールール (トランスポートルールとも呼ばれる) を構成して、によって追加されるスパムヘッダーを検出する必要があります。EOP. 詳細については、「[スパムが各ユーザーの [迷惑メール] フォルダーにルーティングされるようにする](ensure-that-spam-is-routed-to-each-user-s-junk-email-folder.md)」を参照してください。 
  
## <a name="what-you-must-know-before-you-begin"></a>始める前に把握しておくべき情報

予想所要時間 : 30 分
  
この手順を実行する際には、あらかじめアクセス許可を割り当てる必要があります。 必要なアクセス許可については、「 [Exchange Online の機能のアクセス許可](http://technet.microsoft.com/library/15073ce1-0917-403b-8839-02a2ebc96e16.aspx)」の「スパム対策」のエントリを参照してください。 
  
このトピックの手順で使用可能なキーボード ショートカットについては、「**Exchange 管理センターのキーボード ショートカット**」を参照してください。
  
## <a name="use-the-security--compliance-center-scc-to-configure-spam-filter-policies"></a>セキュリティ & コンプライアンスセンター (SCC) を使用してスパムフィルターポリシーを構成する

1. Security & コンプライアンスセンター (SCC) で、[**脅威管理** \> **ポリシー** \>のスパム**対策**] に移動します。
    
2. [**スパム対策設定**] ページで、次のいずれかの手順を実行します。 
    
      - [標準] 設定の下にある既定の会社全体のポリシーを確認します。
    
      - [**カスタム**] タブをクリックし、**カスタム設定**セレクターを **[オン**] に変更し![て、](media/ITPro-EAC-AddIcon.gif)ユーザー、グループ、およびに適用できる新しいカスタムスパムフィルターポリシーを作成するために [**ポリシーの**追加] ボタンをクリックします。組織内のドメイン。 既存のカスタム ポリシーをダブルクリックして編集することもできます。 
    
3. カスタムポリシーの場合のみ、ポリシーの名前を指定します。 必要に応じて、より詳細な説明を指定することもできます。 既定のポリシーの名前を変更することはできません。<br/><br/>注: ポリシーを作成すると、すべての構成設定が1つの画面に表示されます。 一方、ポリシーを編集する場合は複数の画面を移動する必要があります。 いずれの場合も設定は同じですが、以降の手順では、ポリシーを編集する場合のこれらの設定へのアクセス方法について説明します。 
  
4. [**スパムと一括操作**] セクションの [**スパム**]、[**信頼度の高いスパム**]、[**フィッシング電子メール**]、および [**一括メール**] の下で、受信した迷惑メールに対して実行するアクションを選択します。 使用できる値は次のとおりです。 

      - **[迷惑メール] フォルダーにメッセージを移動する:** 指定された受信者の迷惑メールフォルダーにメッセージを送信します。 これは、スパム、信頼度の高いスパム、および一括の既定のアクションです。

 **重要**: Exchange Online PROTECTION (EOP) のお客様の場合: このアクションをオンプレミスのメールボックスで使用するには、オンプレミスのサーバー上で2つの Exchange メールフロールールを構成して、EOP によって追加されたスパムヘッダーを検出する必要があります。 詳細については、「[スパムが各ユーザーの迷惑メールフォルダーにルーティングされる](ensure-that-spam-is-routed-to-each-user-s-junk-email-folder.md)ようにする方法」を参照してください。
 
      - **X-ヘッダーを追加します。** 指定された受信者にメッセージを送信します。ただし、メッセージをスパムとして識別するために、メッセージヘッダーに X-ヘッダーテキストを追加します。 このテキストを識別子として使用して、必要に応じて、受信トレイルールを作成するか、またはメッセージに対して処理するためにダウンストリームデバイスを使用することができます。 既定の X-ヘッダー テキストは「 **This message appears to be spam**」です。<br/>X-ヘッダーテキストをカスタマイズするには、[**この x-ヘッダーテキスト**入力ボックスを追加する] を使用します。 X-ヘッダーテキストをカスタマイズする場合は、次の条件に注意してください。 
    
      - ヘッダーに\< **\>ヘッダーのみを指定した場合、ヘッダーにスペース\< **\>がない場合は、カスタムテキストにコロンが追加され、その後に既定のテキストが続きます。       たとえば、"This-my custom-header" と指定すると、X-ヘッダーテキストは "このカスタムヘッダー: スパムと表示されます。" と表示されます。 
        
      - カスタムヘッダーテキスト内にスペースを含める場合、またはコロンを自分で追加した場合 ("X This is my custom header" または "X-my custom header:") の場合、X ヘッダーテキストは既定値の "the spam: このメッセージはスパムです。" と表示されます。
    
      - ヘッダーテキストは、 \< *header*  \>:\<  *value*  \>の形式で指定することはできません。 このようにすると、コロンの前と後の両方の値が無視され、代わりに既定の X-ヘッダーテキストが表示されます。「X-スパム: このメッセージはスパムです」と表示されます。 
      
      - メールボックスの迷惑メールの構成が原因で、この X ヘッダーのメールがメールボックスの迷惑メールフォルダーに移動される可能性があることに注意してください。 これを変更するには、Set-mailboxjunkemailconfiguration を使用してこの機能を無効にします。

      - **テキストに件名行を付加する:** 指定した受信者にメッセージを送信します。ただし、件名の前には、**このテキスト入力ボックスを使用して、プレフィックスの件名**に指定したテキストを付加します。 このテキストを識別子として使用して、必要に応じてメッセージをフィルター処理またはルーティングするルールを作成できます。 
        
      - **メールアドレスへのメッセージのリダイレクト:** 目的の受信者ではなく、指定された電子メールアドレスにメッセージを送信します。 "リダイレクト" アドレスを **[このメール アドレスにリダイレクトする]** ボックスに指定してください。

      - **メッセージの削除:** すべての添付ファイルを含む、メッセージ全体を削除します。 
        
      - **検疫メッセージ:** 目的の受信者ではなく、検疫にメッセージを送信します。 これは、フィッシングの既定のアクションです。 このオプションを選択した場合は、 **[次の期間スパムを保持する (日)]** 入力ボックスで、スパム メッセージを検疫する日数を指定します。 (その時間が経過すると、自動的に削除されます。 既定値は30日で、これが最大値です。 最小値は 1 日です)。<br/><br/>ヒント: EAC で検疫に存在する電子メールメッセージを管理者が管理する方法については、「[検疫](quarantine.md)」と「[管理者として検疫済みメッセージを検索して解放](find-and-release-quarantined-messages-as-an-administrator.md)する」を参照してください。 > スパム通知メッセージをユーザーに送信するように構成する方法については、「 [configure エンドユーザースパム通知を EOP に](configure-end-user-spam-notifications-in-eop.md)構成する」または「 [Exchange Online でエンドユーザーのスパム](configure-end-user-spam-notifications-in-exchange-online.md)通知を構成する」を参照してください。 

5. [**バルクメール**] の下で、バルクメールをスパムとして扱うしきい値を選択できます。 このしきい値は、メッセージのバルク苦情レベル (BCL) に基づいています。 1から9までのしきい値の設定を選択できます。1は最も多くのバルクメールをスパムとして示し、9では最もバルクメールを配信することができます。 その後、サービスは、メッセージを受信者の迷惑メールフォルダーに送信するなど、構成されたアクションを実行します。 詳細については、「[バルク苦情レベルの値](bulk-complaint-level-values.md)」と「[迷惑メールとバルクメールの違い](what-s-the-difference-between-junk-email-and-bulk-email.md)」を参照してください。 

6. [**スパムのプロパティ**] ページで、次のものを構成することで、ポリシーのテストモードオプションを設定できます。 
    
      - **[なし]** メッセージにテスト モード アクションを行いません。 既定ではこのオプションが選択されています。 
        
      - **既定のテストの X-ヘッダーテキストを追加する**このオプションを選択すると、指定された受信者にメッセージが送信されますが、特定の高度なスパムフィルターオプションと一致していることを識別するために、メッセージに特別な X ヘッダーを追加することもできます。 
        
      - **このアドレスに Bcc メッセージを送信する**このオプションを選択すると、入力ボックスに指定した電子メールアドレスにメッセージのブラインドカーボンコピーが送信されます。 <br/><br/>各オプションと関連付けられている X-ヘッダーテキストに関する説明を含む高度なスパムフィルターオプションの詳細については、「 [advanced spam filtering options](advanced-spam-filtering-asf-options.md)」を参照してください。

7. カスタムポリシーの場合にのみ、[**適用先**] メニュー項目をクリックしてから、このポリシーを適用するユーザー、グループ、およびドメインを指定する条件ベースのルールを作成します。 それぞれが一意の条件であれば、複数の条件を作成できます。 
    
      - ユーザーを選択するには、 **[受信者が次の場合]** を選択します。次のダイアログ ボックスで、ユーザー選択リストから会社の 1 人または複数の送信者を選択し、 **[追加]** をクリックします。リスト上にない送信者を追加するには、電子メール アドレスを入力してから **[名前の確認]** をクリックします。このボックスでは、ワイルドカードを使って、複数の電子メール アドレスを指定することもできます (例: \*@ _domainname_)。選択が完了したら、 **[OK]** をクリックして、メイン画面に戻ります。 
        
      - グループを選択するには、 **[受信者が次のメンバーの場合]** を選択します。その後、それに続くダイアログ ボックスでグループを選択または指定します。 **[OK]** をクリックして、メイン画面に戻ります。 
        
      - ドメインを選択するには、 **[受信者のドメインが次の場合]** を選択します。その後、それに続くダイアログ ボックスでドメインを追加します。 **[OK]** をクリックして、メイン画面に戻ります。<br/><br/>ルール内で例外を作成できます。たとえば、特定のドメインを除くすべてのドメインからのメッセージをフィルター処理できます。 **[例外の追加]** をクリックしてから、他の条件の作成方法と同じように例外条件を作成します。<br/><br/>グループへのスパム ポリシーの適用は、 **メールが有効なセキュリティ グループ** でのみサポートされます。 
  
8. **[保存]** をクリックします。ポリシー設定の概要が右側のウィンドウに表示されます。

既定のポリシーは無効にすることも削除することもできません。また、カスタムポリシーは既定のポリシーより常に優先されます。 カスタムポリシーの場合は、[**有効**] 列のチェックボックスをオンまたはオフにして、それらを有効または無効にすることができます。 既定で、すべてのポリシーが有効になっています。 カスタムポリシーを削除するには、ポリシーを選択し![、[](media/ITPro-EAC-DeleteIcon.gif)削除] アイコン [**削除**] アイコンをクリックして、ポリシーを削除することを確認します。

> [!TIP]
> 上![矢印アイコン](media/ITPro-EAC-UpArrowIcon.gif)および![下矢印アイコン](media/ITPro-EAC-DownArrowIcon.gif)をクリックすると、カスタムポリシーの優先度 (実行順序) を変更できます。 **[優先度]** が **0** のポリシーが最初に処理され、次に優先度が **1** のポリシー、次に **2** のポリシーというように順番に処理されます。 
  
## <a name="use-remote-powershell-to-configure-spam-filter-policies"></a>リモート PowerShell を使用してスパム フィルター ポリシーを構成する

PowerShell でスパム フィルター ポリシーを構成して適用することもできます。 Windows PowerShell を使って Exchange Online に接続する方法については、「[Exchange Online PowerShell への接続](https://go.microsoft.com/fwlink/p/?linkid=396554)」を参照してください。 Windows PowerShell を使って Exchange Online Protection に接続する方法については、「[Exchange Online Protection の PowerShell への接続](https://go.microsoft.com/fwlink/p/?linkid=627290)」を参照してください。
  
- [Get-HostedContentFilterPolicy](http://technet.microsoft.com/library/d510471a-dda5-4df7-b3f8-2ee7a1948436.aspx) スパム フィルター設定を表示します。 
    
- [Set-HostedContentFilterPolicy](http://technet.microsoft.com/library/f597aa65-baa7-49d0-8832-2a300073f211.aspx) スパム フィルター設定を編集します。 
    
- [New-HostedContentFilterPolicy](http://technet.microsoft.com/library/4d15128d-9e16-42a1-8ac5-36f07d4bbbf0.aspx) カスタム スパム フィルター ポリシーを新規作成します。 
    
- [Remove-HostedContentFilterPolicy](http://technet.microsoft.com/library/9fe1fe03-8f83-41e3-9bf5-084a392784d6.aspx) カスタム スパム フィルター ポリシーを削除します。 
    
カスタム スパム フィルター ポリシーをユーザー、グループ、ドメインに適用するには、[New-HostedContentFilterRule](http://technet.microsoft.com/library/2df13ba9-1eb0-4da3-bd72-a79d5fa15e26.aspx) コマンドレット (カスタム ポリシーに適用可能な新しいフィルター ルールを作成する場合) または [Set-HostedContentFilterRule](http://technet.microsoft.com/library/ba259260-ffd3-43f3-8ef4-9d8659679d02.aspx) コマンドレット (カスタム ポリシーに適用可能な既存のフィルター ルールを編集する場合) を使用します。ポリシーに適用するルールを有効または無効にするには、 [Enable-HostedContentFilterRule](http://technet.microsoft.com/library/354ece28-dcde-4b5f-88ed-475115e7ea78.aspx) コマンドレットまたは [Disable-HostedContentFilterRule](http://technet.microsoft.com/library/c1f8dafc-ef5d-47e3-b0fb-71a88e145fc5.aspx) コマンドレットを使用します。 
  
## <a name="how-do-you-know-this-worked"></a>正常な動作を確認する方法

スパムが適切に検出され、処理されるようにするために、サービスを通して GTUBE メッセージを送信できます。EICAR ウイルス対策テスト ファイルと同様、GTUBE はサービスが受信スパムを検出することを検証できるテストを行います。GTUBE メッセージはスパム フィルターで常にスパムとして検出されるはずで、メッセージに対して実行されるアクションは構成された設定に一致するはずです。
  
メール メッセージに 1 行で以下の GTUBE テキストを含めます。空白文字や改行は含めません。
  
```
XJS*C4JDBQADN1.NSBN3*2IDNEN*GTUBE-STANDARD-ANTI-UBE-TEST-EMAIL*C.34X
```

## <a name="fine-tuning-your-spam-filter-policy-to-prevent-false-positives-and-false-negatives"></a>スパム フィルター ポリシーを微調整して誤検知や検出漏れを回避する

スパムフィルター処理に対してより積極的なアプローチを採用する場合は、高度なスパムフィルター手法を有効にすることができます。 組織全体に適用される一般的なスパム設定については、「[セーフリストまたはその他の手法により電子メールが誤検知でスパムとしてマークされないようにする](https://go.microsoft.com/fwlink/p/?LinkId=534224)」または「[スパムの検出漏れ問題を防ぐために Office 365 スパム フィルターで迷惑メールをブロックする](reduce-spam-email.md)」を参照してください。 これらは、管理者レベルの制御権限を持っている場合にスパムの誤検知や検出漏れを防ぐ上で役立ちます。

## <a name="allowblock-lists"></a>許可/ブロックリスト

フィルターによってメッセージが表示されなくなった場合や、システムがそれをキャッチアップするのに時間がかかる場合があります。 この場合、スパム対策ポリシーには、現在の verdict を上書きするために使用できる Allow および Block リストがあります。 このオプションは、リストが管理不能になったり、フィルター処理スタックが何を実行しようとしているかを一時的に把握できるため、控えめに使用する必要があります。

許可リストと禁止リストは、いずれも顧客のスパム対策ポリシーの一部として構成されます。

1. [**許可するリスト**] セクションで、送信者やドメインなどのエントリを指定して、常に受信トレイに配信されるようにすることができます。 これらのエントリからのメールは、迷惑メール フィルターによって処理されません。 
    
      - 信頼できる送信者を [受信許可送信者一覧] に追加します。 [ ****![追加アイコン](media/ITPro-EAC-AddIcon.gif)の編集] をクリックし、選択ダイアログボックスで、許可する送信者のアドレスを追加します。 複数のエントリを区切るには、セミコロンまたは改行を使用します。 [**保存**] をクリックして、[**許可一覧**] ページに戻ります。 
        
      - 信頼できるドメインを [受信許可ドメイン一覧] に追加します。 [ ****![追加アイコン](media/ITPro-EAC-AddIcon.gif)の編集] をクリックし、選択ダイアログボックスで、許可するドメインを追加します。 複数のエントリを区切るには、セミコロンまたは改行を使用します。 [**保存**] をクリックして、[**許可一覧**] ページに戻ります。 

> [!CAUTION]
> 承認済みドメイン (所有しているドメイン) または Microsoft.com、office.com などの一般的なドメインを許可一覧に表示しないようにしてください。 これにより、なりすまし者が組織内のメールを無制限に送信できるようになります。

2. [ **受信拒否一覧**] ページで、送信者やドメインなどのエントリを指定すると、それらのエントリからのメールが常にスパムとしてマークされます。サービスにより、これらのエントリに一致する電子メールに対して、構成された精度の高いスパム処理が適用されます。 
    
      - 不要な送信者を [受信拒否送信者一覧] に追加します。 [ ****![追加アイコン](media/ITPro-EAC-AddIcon.gif)の編集] をクリックし、選択ダイアログボックスで、禁止する送信者のアドレスを追加します。 複数のエントリを区切るには、セミコロンまたは改行を使用します。 [**保存**] をクリックして、[**ブロックするリスト**] ページに戻ります。 
        
      - 不要なドメインを [受信拒否ドメイン一覧] に追加します。 [ ****![追加アイコン](media/ITPro-EAC-AddIcon.gif)の編集] をクリックし、選択ダイアログボックスで、禁止するドメインを追加します。 複数のエントリを区切るには、セミコロンまたは改行を使用します。 [**保存**] をクリックして、[**ブロックするリスト**] ページに戻ります。

> [!TIP]
>  組織がサービスによって提供される verdict と一致しない場合があります。 この場合は、許可またはブロックの一覧を永続的なままにしておくことができます。 ただし、許可リストに長期間ドメインを配置する場合は、ドメインが認証されていることを確認し、そうでない場合は DMARC reject に設定する必要があります。

## <a name="for-more-information"></a>関連情報
<a name="sectionSection6"> </a>

[DMARC のドメインのセットアップ](use-dmarc-to-validate-email.md)
  
[検疫](quarantine.md)
  
[セーフリストまたはその他の手法で誤検知の電子メールがスパムとしてマークされないようにする](https://go.microsoft.com/fwlink/p/?LinkId=534224)
  
[検出漏れの問題を防止するために Office 365 スパム フィルターを使用して迷惑メールをブロックする](https://go.microsoft.com/fwlink/p/?LinkId=534225)

[Spam Confidence Level](spam-confidence-levels.md)
  

